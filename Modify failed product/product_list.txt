<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><base href="https://www.dianxiaomi.com">
<input type="hidden" id="dxmState" name="dxmState" value="offline"/>
<input type="hidden" id="dxmOfflineState" name="dxmOfflineState" value="waitPublish"/>
<input type="hidden" id="productStatusType" name="productStatusType" value=""/>
<input type="hidden" id="shopId" name="shopId" value="-1"/>
<input type="hidden" id="groupId" name="groupId" value="0"/>
<input type="hidden" id="productIds" name="productIds" value=""/>
<input type="hidden" id="searchType" name="searchType" value="0"/>
<input type="hidden" id="sortName" name="sortName" value="gmt_create" />
<input type="hidden" id="sortValue" name="sortValue" value="" />
<input type="hidden" id="advancedSearch" name="advancedSearch" value=""/>
<input type="hidden" id ="platformFlag" value="smt"/>
<div id="ceilingDiv" class="ceilingDiv ceiling-div">
	<div class="ceiling-in">
		<div class="pull-left dropdown mLeft10">
			<button class="btn btn-primary" type="button" id="dropdownMenu2" data-toggle="dropdown">
				批量操作 <span class="caret"></span>
			</button>
			<ul class='dropdown-menu' role='menu' aria-labelledby='dropdownMenu2'>
				<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchEdit" onclick="batchAction(this);">批量编辑</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchDelete" onclick="batchAction(this);">批量删除</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchPublish" onclick="batchAction(this);">批量发布</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchAddListWaterMark" onclick="batchAction(this);">批量加水印</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchAddMarketWaterMark" onclick="batchAction(this);">营销水印</a></li>
						<li class='bgColor5 p5 pLeft10 fColor2'>快捷操作</li>
						<li role="presentation"><a href="javascript:" data="batchEditAttr" onclick="smtBatchAttr.batchUpdateAttr(this);">全属性修改</a></li>
						</ul>
		</div>
		<div class="pull-left p0 mLeft10 dropdown">
					<button class="btn btn-primary" type="button" onclick='batchExportProduct();'>按勾选项导出 </button>
				</div>
				<div class="pull-right">
			<div class="m-right10 inline-block">
				<span id="selectedData"></span>
			</div>
			<div class="inline-block">
				<ul class="pagination" id="ceilingPage"></ul>
			</div>
		</div>
	</div>
</div>
<div class="container-o-box" id="myTabContentOne">
	<div class="com-block m-bottom10">
		<div class="title" id="categoryNav">
			<span>当前位置：</span>
			<span>速卖通</span>
				<span class="simsun">&gt;</span>
				<span>待发布 </span>
				</div>
		<div class="content search-tab">
			<table>
				<tbody>
				<tr>
					<td>店铺账号：</td>
					<td class="selShopNameBox">
						<a class="shopName myj-aFocus myj-active"
						   href="javascript:" data-id="-1">全部</a>
						<a class="shopName myj-aFocus "
								   href="javascript:" data-id="2451968">康康</a>
							</td>
				</tr>
				<tr class="top-line">
					<td>搜索类型：</td>
					<td>
						<a class="myj-aFocus myj-active" href="javascript:" onclick="setSearchType('0', this)">标题</a>
						<a class="myj-aFocus" href="javascript:" onclick="setSearchType('1', this)">商品编码</a>
						</td>
				</tr>
				<tr class="searchTr">
					<td>搜索内容：</td>
					<td class="tab-separate">
						<form class="doNotSubmit">
							<div class="search-group-o">
								<div class="search-group-ipt default">
									<input class="form-control batchSearchType m-right8" id="searchValue" type="text" />
									<button class="btn btn-primary m-right10 serchBtn" id="btnSearch" onclick="btnSearchIt();" type="submit">搜索</button>
									<a class="advancedSearchBtn" href="javascript:" cid="showAdvancedSearch" data-name="productListAdvancedSearch"
										   data-value="0" onclick="listFreightTemplateId()">高级搜索</a>
									</div>
								<div class="search-group-senior" id="productListAdvancedSearch" style="display:none;">
									<table class="productListAdvancedSearch">
										<tr>
											<td>发货期：</td>
											<td>
												<input class="form-control" id="deliveryTimeLift" maxlength="9" type="text" onkeyup="value=value.replace(/[^0-9]/g,'')"> - <input class="form-control" id="deliveryTimeRight" type="text" maxlength="9" onkeyup="value=value.replace(/[^0-9]/g,'')">
											</td>
										</tr>
										<tr>
											<td>包装后重量(kg)：</td>
											<td>
												<input class="form-control" id="grossWeightLift" maxlength="9" type="text" onkeyup="value=value.replace(/[^0-9.]/g,'');">
												- <input class="form-control" id="grossWeightRight" maxlength="9" type="text" onkeyup="value=value.replace(/[^0-9.]/g,'')">
											</td>
										</tr>
										<tr>
											<td>产品分类：</td>
											<td>
												<select class="form-control" id="productCategory" style="width:350px;" onclick="listFreightTemplateId()">
												</select>
											</td>
											<td><a class="" href="javascript:" onclick="showCategorySelectModal()">选择分类</a></td>
										</tr>
										<tr>
											<td>运费模板：</td>
											<td>
												<select class="form-control" id="freightTemplateId" style="width:350px;" onclick="listFreightTemplateId()">
												</select>
											</td>
										</tr>
										<tr>
											<td>来源URL：</td>
											<td>
												<input class="form-control" id="sourceUrl" type="text" style="width:100%;"/>
											</td>
										</tr>
										<tr>
											<td>
												<select class="form-control" id="advancedTime" style="width:100px;">
													<option value="1">更新时间</option>
													<option value="0">创建时间</option>
												</select>
											</td>
											<td>
												<input class="form-control Wdate" style="height:34px;" id="timeLift" type="text" onclick="WdatePicker(WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd'}))"> - <input class="form-control Wdate" style="height:34px;" id="timeRight" type="text" onclick="WdatePicker(WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd'}))">
											</td>
										</tr>
										<tr>
											<td></td>
											<td style="text-align:right;">
												<a href="javascript:" cid="closeProductListAdvancedSearch" data-name="productListAdvancedSearch">取消</a>
												<a onclick="cleanContentAll()"  style="cursor:pointer!important;" class="mLeft10">重置</a>
												<button onclick="btnSearchIt();" type="submit" class="btn btn-primary mLeft10">搜索</button>
											</td>
										</tr>
									</table>
								</div>
							</div>
						</form>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
	</div>
	<div id="pageList">
		<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><script type="text/javascript" src="https://www.dianxiaomi.com/static/js/smtProductModifyPrice.js?v=pi45.35"></script>
<base href="https://www.dianxiaomi.com">
<input type="hidden" id="pageNo" name="pageNo" value="1"/>
<input type="hidden" id="totalPage" name="totalPage" value="1"/>
<input type="hidden" id="pageSize" name="pageSize" value="100"/>
<input type="hidden" id="totalSize" name="totalSize" value="7"/>
<input type="hidden" id="aeopAeProductSKUs" value="" name="aeopAeProductSKUs"/>
<input type="hidden" id="aeopNationalQuoteConfiguration" value="{}" name="aeopNationalQuoteConfiguration"/>


<link href="https://www.dianxiaomi.com/static/css/myjStyle.css?v=pi45.35" rel="stylesheet">
<style>
	.myj-table .imgDivOut {width:75px;height:75px;}
	.myj-table .findGoods {width:73px;height:73px;}
	.myj-table tr td {padding:3px 5px;vertical-align: top;}
	.myj-table .myj-table-in {width:100%;}
	.myj-table .myj-table-in tr td:first-child {border-left:none;}
	.myj-table .myj-table-in tr td:last-child {border-right:none;}
	.myj-table .myj-table-in tr td {border-left:none;border-right:none;line-height:24px;}
	.myj-table .myj-table-in tr td:nth-child(1) {width:110px;min-width:120px;word-wrap:break-word;word-break:break-all;text-align:left;vertical-align:top;}
	.myj-table .myj-table-in tr td:nth-child(2) {width:60px;min-width:80px;word-wrap:break-word;word-break:break-all;vertical-align:top;}
	.myj-table .myj-table-in tr td:nth-child(3) {width:60px;min-width:70px;word-wrap:break-word;word-break:break-all;vertical-align:top;}
	.myj-table .myj-table-in tr:first-child td {border-top:none;}
	.myj-table .myj-table-in tr:last-child td {border-bottom:none;}
	.myj-table .myj-table-in .variantBotton .btn{border:none;}
	.myj-table .myj-table-in .variantInput .glyphicon-edit{margin-left:5px;}
	.myj-table .myj-table-in tr td p{margin:0;padding: 0;}
	/*#priceTable select {border-radius: 4px;padding: 6px;border: 1px solid #ccc;line-height: 1.42857143;height: 34px;width: 50px;}*/
	.smt-product-diagnosi{display: inline-block;width:87%;}
	.smt-diagnose-resule{margin-bottom:10px;padding:10px 10px 5px;background-color: #fff6ed;border:1px solid #ffecd6;}
</style>
<div class="col-xs-12 p0 mTop10" id="allClassification">
	<div class="pull-left dropdown">
		<button class="btn btn-primary" type="button" id="dropdownMenu2" data-toggle="dropdown">
			批量操作 <span class="caret"></span>
		</button>
		<ul id='batchUl' class='dropdown-menu' role='menu' aria-labelledby='dropdownMenu2'>
			<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchEdit" onclick="batchAction(this);">批量编辑</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchDelete" onclick="batchAction(this);">批量删除</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchAddListWaterMark" onclick="batchAction(this);">批量加水印</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchPublish" onclick="batchAction(this);">批量发布</a></li>
						<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchTimingPublish" onclick="batchAction(this);">批量定时发布</a></li>
					<li role="presentation"><a role="menuitem" tabindex="-1" href="javascript:" data="batchAddMarketWaterMark" onclick="batchAction(this);">营销水印</a></li>
					</ul>
		</div>
	<div class="pull-left dropdown mLeft10">
				<button class="btn btn-primary" type="button" id="dropdownMenu3" data-toggle="dropdown">
					快捷操作 <span class="caret"></span>
				</button>
				<ul id='batchU2' class='dropdown-menu' role='menu' aria-labelledby='dropdownMenu2'>
					<li class='bgColor5 p5 pLeft10 fColor2'>产品信息</li>
						<li role="presentation"><a href="javascript:" data="pdtHead" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改标题</a></li>
						<li role="presentation"><a href="javascript:" data="deliveryDate" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改发货期</a></li>

						<li role="presentation"><a href="javascript:" data="areaAdjustPrice" onclick="smtBatchAttr.batchUpdateAttr(this);">批量区域调价</a></li>

						<li class='bgColor5 p5 pLeft10 fColor2'>产品属性</li>
						<li role="presentation"><a href="javascript:" data="pdtProperty" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改属性</a></li>
						<li role="presentation"><a href="javascript:" data="batchAttributeBrand" onclick="batchAction(this);">批量改品牌</a></li>
                        <li role="presentation"><a href="javascript:" data="pdtMotor" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改适用车型</a></li>
						<li class='bgColor5 p5 pLeft10 fColor2'>模板信息</li>
						<li role="presentation"><a href="javascript:" data="freightTemplate" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改运费模板</a></li>
						<li role="presentation"><a href="javascript:" data="serviceTemplate" onclick="smtBatchAttr.batchUpdateAttr(this);">批量改服务模板</a></li>

						<li class='bgColor5 p5 pLeft10 fColor2'>全属性修改</li>
						<li role="presentation"><a href="javascript:" data="batchEditAttr" onclick="smtBatchAttr.batchUpdateAttr(this);">全属性修改</a></li>
					</ul>
			</div>
		<div class="dropdown pull-right m-left10">
			<button class="btn btn-primary" id="dropdownMenuShipping" type="button" data-toggle="dropdown">
				同步产品<span class="caret m-left5"></span>
			</button>
			<ul class="dropdown-menu" id="batchSyncUl">
				<li><a href="javascript:" sxz="" onclick="toSmtProduct('0');">同步全部产品</a></li>
				</ul>
		</div>
	<div class="dropdown pull-right m-left10">
			<button class="btn btn-primary" id="dropdownMenuImport" data-toggle="dropdown" type="button">
				导入/导出<span class="caret m-left5"></span>
			</button>
			<ul class="dropdown-menu" id="batchUl">
				<li><a href="javascript:" sxz="batchPublish" onclick="showImportProduct();">导入产品</a></li>
					<li><a href="javascript:" sxz="batchPublish" onclick="showImportProductUrl('smt');">导入来源URL</a></li>
					<li class="bgColor5 p5 pLeft10 fColor2">导出选项</li>
					<li><a href="javascript:" sxz="batchPublish" onclick="showExportModal();">按页导出</a></li>
					<li><a href="javascript:" sxz="batchPublish" onclick="batchExportProduct();">按勾选项导出</a></li>
				</ul>
		</div>
	<div class="pull-right btn-box">
		<button class="btn btn-primary" type="button" onclick="window.open('https://www.dianxiaomi.com/smtProduct/add.htm');">创建产品</button>
			</div>
</div>
<div  class="col-xs-12 p0 mTop10">
	<div class="p0">
		</div>
	<div class="p0 borderBtmNo" style="height:39px;">
		<input type="hidden" id="onLineSmtId" value="">
		<input type="hidden" id="offLineSmtId" value="">
		<input type="hidden" id="audLineSmtId" value="">
		<input type="hidden" id="ediLineSmtId" value="">
		<input type="hidden" id="onLineSmtStateId" value="offline">
		<input type="hidden" id="ops" name="op" value=""/>
		<ul id="upPage" class="pageDiv" style="float:right;margin:3px 0 5px;"></ul>
		</div>
</div>
<div class="col-xs-12 tabConOne p0">
	<div id="pageList2">
		<div class="col-xs-12 p0" id="goodsContent">
			<table class="myj-table m-bottom0"  cid="productList">
				<thead>
					<tr class="text-center">
						<th style="box-sizing: content-box;"><input id="selectAll" selIptId="selectAll"  type="checkbox" value=""></th>
						<th class="w80 minW80 maxW80">图片</th>
						<th class="minW170">标题/产品ID</th>
						<th>分类/分组</th>
						<th class="maxW110">属性/商品编码</th>
						<th class="maxW110">价格</th>
						<th class="w80 minW80 maxW80">库存</th>
						<th style="width: 70px; max-width: 70px; min-width: 70px;">运费模板</th>
						<th>时间</th>
						<th>操作</th>
					</tr>
				</thead>
				<tbody id="smtSysMsg" class="xianshishujudate">
				<tr data-id="46483711645428674" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711645428674" data-shopid = "2451968" datename="showdate" subject="Three Ratels TZ-1200 17.1*15cm 1-4 pieces border collie on board car sticker  stickers auto decals removable" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://ae01.alicdn.com/kf/HTB1atW6a98YBeNkSnb4q6yevFXaI/Three-Ratels-TZ-1200-17-1-15cm-1-4-pieces-border-collie-on-board-car-sticker.jpg" class="imgCss lazy" data-order="https://ae01.alicdn.com/kf/HTB1atW6a98YBeNkSnb4q6yevFXaI/Three-Ratels-TZ-1200-17-1-15cm-1-4-pieces-border-collie-on-board-car-sticker.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.aliexpress.com/item/32859527293.html?algo_pvid=67836406-a652-44f0-a020-1c69d974d8ee&amp;algo_expid=67836406-a652-44f0-a020-1c69d974d8ee-35&amp;btsid=0b86d81616158677257164337e81c5&amp;ws_ab_test=searchweb0_0,searchweb201602_,searchweb201603_">速卖通</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">Three Ratels TZ-1200 17.1*15cm 1-4 pieces border collie on board car sticker  stickers auto decals removable</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711645428674" style="color:"></span><span id="comment_2_46483711645428674" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="200000182:193;5:100014064">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">style A/8 cm</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」2.30<br>

                                                            「批」1.61</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="200000182:193;5:361386">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">style A/12cm</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」3.10<br>

                                                            「批」2.17</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="200000182:193;5:361385">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">style A/20cm</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」4.50<br>

                                                            「批」3.15</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-16 12:09</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-21 00:48</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711645428674" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711645428674')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711645428674')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711645428674','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711645428674','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711657452762" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711657452762" data-shopid = "2451968" datename="showdate" subject="BERRYZILLA Stay Weird Decal JDM Vinyl Die Cut Decal for Windows, Bumper, Trucks, Cars, Laptops Funny Sticker 8.5&#034; x1.75&#034; White" deliveryTime="0" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://images-na.ssl-images-amazon.com/images/I/51TV5gRWeSL._AC_SL1000_.jpg" class="imgCss lazy" data-order="https://images-na.ssl-images-amazon.com/images/I/51TV5gRWeSL._AC_SL1000_.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.amazon.com/dp/B07R5TQHCS/ref=sspa_dk_detail_3?psc=1&amp;spLa=ZW5jcnlwdGVkUXVhbGlmaWVyPUExUjZEOTlJWEdLSzZaJmVuY3J5cHRlZElkPUEwMjQxNzg5MVg4WENCTVlWU1FINyZlbmNyeXB0ZWRBZElkPUEwODg5ODY2Mkc1Rkc0MFdGTlI1UCZ3aWRnZXROYW1lPXNwX2RldGFpbDImYWN0aW9uPWNsaWNrUmVkaXJlY3QmZG9Ob3RMb2dDbGljaz10cnVl">亚马逊(美国)</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">BERRYZILLA Stay Weird Decal JDM Vinyl Die Cut Decal for Windows, Bumper, Trucks, Cars, Laptops Funny Sticker 8.5&#034; x1.75&#034; White</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711657452762" style="color:"></span><span id="comment_2_46483711657452762" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="<none>">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」1.99<br>
                                                        </div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>0</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-20 17:41</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-21 00:48</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711657452762" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711657452762')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711657452762')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711657452762','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711657452762','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711657452760" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711657452760" data-shopid = "2451968" datename="showdate" subject="11.5*11.5cm Russian Eagle Decal Decoration stickers Coat of arms of Russia car body metal sticker" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://ae01.alicdn.com/kf/H457004e2173f4042b058a60bbbdbeb1dW/11-5-11-5cm-Russian-Eagle-Decal-Decoration-stickers-Coat-of-arms-of-Russia-car-body.jpg" class="imgCss lazy" data-order="https://ae01.alicdn.com/kf/H457004e2173f4042b058a60bbbdbeb1dW/11-5-11-5cm-Russian-Eagle-Decal-Decoration-stickers-Coat-of-arms-of-Russia-car-body.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.aliexpress.com/item/1005001900630016.html?spm=a2g0o.productlist.0.0.7db24934yKrJCA&amp;algo_pvid=e8a07680-211b-405f-9e95-677450c5c45e&amp;algo_expid=e8a07680-211b-405f-9e95-677450c5c45e-53&amp;btsid=0bb47a1a16162332802513524e12b8&amp;ws_ab_test=searchweb0_0,searchweb201602_,searchweb201603_">速卖通</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">11.5*11.5cm Russian Eagle Decal Decoration stickers Coat of arms of Russia car body metal sticker</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711657452760" style="color:"></span><span id="comment_2_46483711657452760" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="200000182:193;5:100014064">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic">GD/8 cm</span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」2.30<br>

                                                            「批」1.61</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="200000182:193;5:361386">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic">GD/12 cm</span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」3.20<br>

                                                            「批」2.24</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="200000182:193;5:361385">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic">GD/20 cm</span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」4.10<br>

                                                            「批」2.87</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-20 17:41</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-21 00:48</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711657452760" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711657452760')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711657452760')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711657452760','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711657452760','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711626580390" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711626580390" data-shopid = "2451968" datename="showdate" subject="RV State Sticker Travel Map - 11&#034; x 17&#034; - USA States Visited Decal - United States License Plate Non Magnet Road Trip Window" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://images-na.ssl-images-amazon.com/images/I/71NoB0XEcdL._AC_SL1000_.jpg" class="imgCss lazy" data-order="https://images-na.ssl-images-amazon.com/images/I/71NoB0XEcdL._AC_SL1000_.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.amazon.com/State-Sticker-Travel-Map-Accessories/dp/B07FMG2PRM/ref=pd_sbs_5?pd_rd_w=VL4ZT&amp;pf_rd_p=527ea27c-adf6-4b67-9c5f-265eb29e0622&amp;pf_rd_r=JEH27R30N1NGEB99D07T&amp;pd_rd_r=0de87951-d1e0-4f34-9398-415d3343d9d4&amp;pd_rd_wg=AI46H&amp;pd_rd_i=B07FMG2PRM&amp;psc=1">亚马逊(美国)</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">RV State Sticker Travel Map - 11&#034; x 17&#034; - USA States Visited Decal - United States License Plate Non Magnet Road Trip Window</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711626580390" style="color:"></span><span id="comment_2_46483711626580390" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="<none>">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」19.99<br>

                                                            「批」13.99</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-07 16:24</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-14 15:24</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711626580390" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711626580390')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711626580390')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711626580390','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711626580390','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711626580392" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711626580392" data-shopid = "2451968" datename="showdate" subject="RV State Sticker Travel Map - 11&#034; x 17&#034; - USA States Visited Decal - United States License Plate Non Magnet Road Trip Window" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://images-na.ssl-images-amazon.com/images/I/71yby9ZqfGL._AC_SL1000_.jpg" class="imgCss lazy" data-order="https://images-na.ssl-images-amazon.com/images/I/71yby9ZqfGL._AC_SL1000_.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.amazon.com/State-Sticker-Travel-Map-Accessories/dp/B07FMH8NB7/ref=pd_sbs_4?pd_rd_w=VL4ZT&amp;pf_rd_p=527ea27c-adf6-4b67-9c5f-265eb29e0622&amp;pf_rd_r=JEH27R30N1NGEB99D07T&amp;pd_rd_r=0de87951-d1e0-4f34-9398-415d3343d9d4&amp;pd_rd_wg=AI46H&amp;pd_rd_i=B07FMH8NB7&amp;psc=1">亚马逊(美国)</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">RV State Sticker Travel Map - 11&#034; x 17&#034; - USA States Visited Decal - United States License Plate Non Magnet Road Trip Window</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711626580392" style="color:"></span><span id="comment_2_46483711626580392" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="<none>">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」19.99<br>

                                                            「批」13.99</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-07 16:24</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-14 15:24</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711626580392" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711626580392')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711626580392')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711626580392','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711626580392','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711626580508" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711626580508" data-shopid = "2451968" datename="showdate" subject="Enjoy It Peace Frogs Life&#039;s a Trip Peace Frogs Car Sticker, Outdoor Rated Vinyl Sticker Decal for Windows, Bumpers, Laptops" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://images-na.ssl-images-amazon.com/images/I/61lDYZdGf8L._AC_.jpg" class="imgCss lazy" data-order="https://images-na.ssl-images-amazon.com/images/I/61lDYZdGf8L._AC_.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.amazon.com/Enjoy-Sticker-Outdoor-Windows-Bumpers/dp/B0753LVPJW/ref=pd_sbs_4?pd_rd_w=dYYMM&amp;pf_rd_p=527ea27c-adf6-4b67-9c5f-265eb29e0622&amp;pf_rd_r=467KWZ7XEGNY8RQCGPAY&amp;pd_rd_r=93c98275-52c4-4ba6-a938-c52a3bc2dfea&amp;pd_rd_wg=SPOgQ&amp;pd_rd_i=B0753LVPJW&amp;psc=1">亚马逊(美国)</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">Enjoy It Peace Frogs Life&#039;s a Trip Peace Frogs Car Sticker, Outdoor Rated Vinyl Sticker Decal for Windows, Bumpers, Laptops</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711626580508" style="color:"></span><span id="comment_2_46483711626580508" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="355:203282823">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">Life's A Trip</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」6.49<br>

                                                            「批」4.54</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="355:203282824">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">Trippin" 英寸符号</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」6.49<br>

                                                            「批」4.54</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="355:203282825">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">Road Tripping</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」6.49<br>

                                                            「批」4.54</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="355:203282826">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">Walking On Sunshine</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」6.49<br>

                                                            「批」4.54</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-07 16:24</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-14 15:24</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711626580508" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711626580508')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711626580508')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711626580508','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711626580508','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					<tr data-id="46483711626580494" data-cid="200000241">
							<td style="box-sizing:content-box;border-left:none;vertical-align:top;width:24px;min-width:24px;max-width:24px; padding:0;height: 100%;">
								<label style="width: 100%; height: 100%; padding-top:3px;">
									<input name="productBox" type="checkbox" value="46483711626580494" data-shopid = "2451968" datename="showdate" subject="GT Graphics Tie Dye Sea Turtle - Vinyl Sticker Waterproof Decal" deliveryTime="7" onclick="showSelCheckboxNum(this)">
								</label>
							</td>
							<td class="w80 minW80 maxW80 v-top">
								<div class="imgDivOut m-right0">
									<div class="findGoods">
										<img data-original="https://images-na.ssl-images-amazon.com/images/I/51RDC01XYRL._AC_.jpg" class="imgCss lazy" data-order="https://images-na.ssl-images-amazon.com/images/I/51RDC01XYRL._AC_.jpg"/>
										</div>
								</div>
								<p class="m0 f-center"><a target="_blank" href="https://www.amazon.com/Sea-Turtle-Beach-Ocean-Waterproof/dp/B06Y4J1YYV/ref=pd_di_sccai_1?pd_rd_w=cCFav&amp;pf_rd_p=c9443270-b914-4430-a90b-72e3e7e784e0&amp;pf_rd_r=YYCWREQ24Y596YYRTA2B&amp;pd_rd_r=c91bdb02-b5e6-42cc-b0e4-77314cfe8407&amp;pd_rd_wg=qU3ON&amp;pd_rd_i=B06Y4J1YYV&amp;psc=1">亚马逊(美国)</a></p>
                    </td>
							<td class="minW170 maxW250 f-left v-top word-break">
								<span class="productHead">GT Graphics Tie Dye Sea Turtle - Vinyl Sticker Waterproof Decal</span><br>
								<span class="limingcentUrlpic">
								&nbsp;</span>
								<div>
									<span id="comment_1_46483711626580494" style="color:"></span><span id="comment_2_46483711626580494" style="color:"></span>
									</div>
								<div class="fColor2">「<span class="shopName">康康</span>」</div>
								</td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;min-width: 100px;">
								<span class="productClassify">车贴(Car Stickers)</span><br>
								<span class="fColor2">
								FUN Car Decals<br>
										</span>
							</td>
							<td colspan="3" style="padding: 0">
                                    <table class="myj-table-in">
                                        <tr  data-productId="200000182:193;5:100014064">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">黑色/5x6 inches</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」3.00<br>

                                                            「批」2.10</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        <tr  data-productId="200000182:193;5:361386">
                                                <td class="maxW110">
                                                    <span class="limingcentUrlpic"><span class="noNewLine inline-block maxW160">黑色/7x8 inches</span></span><br/>
                                                    <span class="limingcentUrlpic"></span>
                                                    </td>
                                                <td class="maxW110 min-W100-imp">
                                                    <div style="display:inline-block;">
                                                        「零」4.20<br>

                                                            「批」2.94</div>
                                                    <span style="position: absolute;margin: 3px 0 0 5px;">
                                                        </span>
                                                </td>
                                                <td class="w80 minW80 maxW80 relative">
                                                    <span>999</span>
                                                    </td>
                                            </tr>
                                        </table>
                                    </td>
							<td style="word-break:break-all;vertical-align: top;text-align:left;max-width: 180px;">
								copy 2usd 10g PuHuo</td>
							<td class="w110 minW110 maxW110 v-top f-left">
								<p class="m0 fColor2">创建:</p>
									<p class="m0">2021-03-07 16:24</p>
									<p class="m0 fColor2">更新:</p>
									<p class="m0">2021-03-14 14:55</p>
								</td>
							<td class="w70 minW70 maxW70 v-top">
								<a href="smtProduct/edit.htm?id=46483711626580494" target="_blank">编辑</a><br>
										<div class="dropdown mLeft10">
												<a class="dropdown-toggle " href="javascript:" data-toggle="dropdown" type="button">发布<span class="caret"></span></a>
												<ul class="dropdown-menu pull-right" style="min-width:50px;">
													<li><a href="javascript:;" onclick="asyncCheckSmtProduct('46483711626580494')">立即发布</a></li>
													<li><a href="javascript:;" onclick="checkTimingPublish('46483711626580494')">定时发布</a></li>
												</ul>
											</div>
										<div class="dropdown">
									<a href="javascript:" class="dropdown-toggle" data-toggle="dropdown" type="button" onclick="" style="margin-left: 10px;">更多<span class="caret"></span></a>
									<ul class="dropdown-menu pull-right" role="menu" aria-labelledby="" style="min-width:70px;">
										<li role="presentation">
												<a  href="javascript:" onclick="Remark.addCommentProduct('46483711626580494','smt');">添加备注</a>
											</li>
										<li role="presentation"><a href="javascript:" onclick="delProduct('46483711626580494','')">删除</a></li>
										</ul>
								</div>
								</td>
						</tr>
					</tbody>
			</table>
		</div>
	</div>
</div>

<input type="hidden" id="selectImportUrlType" name="selectImportUrlType" value="2"/>
<input type="hidden" id="ecomType" name="ecomType" value=""/>

<div class="modal" id="importProductUrlModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导入产品来源URL</h4>
            </div>
            <div class="modal-body">
                <div style="min-height: 150px;overflow: auto;">
                    <div class="m-top15 m-bottom30" id="selectPUrlImportType">
                        <label><input class="m-right5" id="uploadUrlTypeTwo" name="uploadUrl" data-type="2" type="radio" checked/>追加来源URL</label>
                        <label class="m-left20"><input class="m-right5" id="uploadUrlTypeOne" name="uploadUrl" data-type="1" type="radio" />替换现有来源URL</label>
                    </div>
                    <div class="clear-fix" style="display: inline-block;">
                        <span id="uploadExcelPUrl" class="w100 pull-left v-middle"></span>
                        <span id="uploadFileNamePUrl" class=" mLeft20 pull-left" style="line-height: 30px;">您没有选中任何文件</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
					<span style="position: absolute;left: 0;margin: 8px 17px">
						<a href="/static/importTemplate/import_product_sourceurl.xlsx">模板下载</a>
					</span>
                <button type="button" class="btn btn-primary" onclick="uploadFilePUrl();">&#12288;确定&#12288;</button>
                <button type="button" class="btn btn-default" data-dismiss="modal" onclick="clearFilePUrl();">&#12288;关闭&#12288;</button>
            </div>
        </div>
    </div>
</div>

<div class="modal" id="syncFromBatchModalUrl" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" onclick="closeSyncFromBatchModal();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量操作</h4>
            </div>
            <!--content-->
            <div class="modal-body tab-content">
                <div class="progress">
                    <div id="batchProgressBarUrl" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                    </div>
                </div>
                <div class="mTop10">
                    状态：<span class="fRed" id="syncFromBatchModal_statusUrl">进行中...</span><br/>
                    详情：<div id="syncFromBatchModal_processDetailUrl" style="margin-left:30px;max-height: 200px;overflow-y: auto;"></div>
                </div>
            </div>
            <!--modalFoot-->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="closeSyncFromBatchModalUrl();">关闭</button>
            </div>
        </div>
    </div>
</div>


<!-- SMT批量修改模态层 -->
<div class="modal" id="smtBatchEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>
            <!--conter-->
            <div class="modal-body tab-content p10">
            </div>
            <!--modalFoot-->
            <div class="modal-footer" style="clear:both;">
                <button type="button" class="btn btn-primary smtBatchEdit" data-names="">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- SMT批量修改模态层end -->





<script type="text/javascript">
    /*关闭进程执行详情框*/
    var closeSyncFromBatchModalUrl = function(){
        $("#syncFromBatchModalUrl").modal("hide");
    };
    /*进程执行详情框*/
    var batchImport = function(uuid) {
        var p = 0;		// 记录进度条的值
        $("#syncFromBatchModalUrl").modal("show");
        var progressBar = $("#batchProgressBarUrl");
        // 先隐藏起来(防止出现进度条后退的效果)
        progressBar.css("width", "0%");
        progressBar.css("display", "");
        checkProcessStatus(uuid, function (data) {
            var num = data.num % 100;
            var status = "进行中...";
            if (num < p && data.code != 1) {
                // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                progressBar.css("display", "none");
                setTimeout(function () {
                    progressBar.css("display", "");
                }, 1000);
            }
            p = num;
            if (data.code == 0) {
                $("#batchProgressBarUrl").css("width", num + "%");
            } else {
                status = "已完成!";
                progressBar.css("width", "100%");
                progressBar.removeClass("active");
            }
            $("#syncFromBatchModal_statusUrl").html(status);
            $("#syncFromBatchModal_processDetailUrl").html(data.msg);
        });
        /*二次刷新初始化*/
        progressBar.css("display", "none");
        setTimeout(function(){
            progressBar.css("width", 0+"%");
            progressBar.css("display", "");
        },10);
        $("#syncFromBatchModal_statusUrl").html("0");
        $("#syncFromBatchModal_processDetailUrl").empty();

    };
    /* by wxh 2017.11.15  给隐藏框赋值*/
    $(document).off('click','#selectPUrlImportType input[name="uploadUrl"]');
    $(document).on('click','#selectPUrlImportType input[name="uploadUrl"]',function(){
        var boxStr = $(this).attr('data-type');
        $('#selectImportUrlType').val(boxStr);
        upExcelPUrl.settings("formData", {"PUrlImportType" : boxStr});
    });
    /** by wxh 2017.11.15 **/
    var PUrlfileUpOption = {
        'auto':false,
        'fileObjName' : 'FileData',
        'fileTypeExts': '*.xlsx;*.xls', //允许的格式
        'multi':false,
        'fileSizeLimit':3096,
        'removeTimeout':500,
        'showUploadedPercent':false,
//        'formData':{PUrlImportType:$('#selectPUrlImportType').val()},  //导入的方式是追加还是替换
        'formData':{
            PUrlImportType: $('#selectImportUrlType').val(), //导入的方式  追加2   替换1
            ecomType: $('#ecomType').val() //哪个平台
        },
        'buttonClass': 'btn btn-primary btn-block',
        'buttonText': '选择导入文件',
        'uploader' : 'https://www.dianxiaomi.com/comm/importProductPUrl.json',	// 后台对应的上传接口
        'uploadLimit' : 0,
        onUploadStart:function(files,formData){
            $("#importProductUrlModal").modal('hide');
        },
        onSelect:function(files){
            for(var i=0,len=files.length;i<len;i++){
                $("#uploadFileNamePUrl").html(files[i].name);
            }
            return false;
        },
        onStop:function(files){
            return false;
        },
        onUploadSuccess:function(file, data, response){
            data = $.parseJSON(data);
            var uuid = data.uuid;
            batchImport(uuid);
            clearFilePUrl();
            // 重新加载一下页面
        },
        onUploadError: function(file, errorCode, errorMsg, errorString){
            $('#loading').modal('hide');
            clearFilePUrl();
            $.fn.message({type:"error",msg:"导入数据超时，部分数据导入成功，请查询列表数据!"});
        }
    };
    /** by wxh 2017.11.15 **/
    var upExcelPUrl = $('#uploadExcelPUrl').Huploadify(PUrlfileUpOption);
    /** by wxh 2017.11.15 上传文件确定 **/
    var uploadFilePUrl = function(){
        var file = $("#uploadFileNamePUrl").text();
        if(file == '您没有选中任何文件'){
            $.fn.message({type:"error",msg:"您没有选中任何文件"});
            return;
        }
        upExcelPUrl.uploadLast();
    };
    /** 清空缓存文件 PUrl   恢复导入方式默认选择 **/
    var clearFilePUrl = function (){
        upExcelPUrl.cancel("*");
        $("#uploadFileNamePUrl").html("您没有选中任何文件");
        $('#selectImportUrlType').val('');//清空值
        $('#uploadUrlTypeOne').prop('checked',false);
        $('#uploadUrlTypeTwo').prop('checked',true);
    };
    // 显示导入来源URL窗口    by wxh 11.15
    function showImportProductUrl(thisEcomTypes){
        var boxStr = 2;
        $("#selectPUrlImportType").find('input[name="uploadUrl"]').each(function(){
            var dataType = $(this).attr('data-type');
            dataType == boxStr ? this.selected = true : this.selected = false;
        });
        //导入方式赋值
        $('#selectImportUrlType').val(boxStr);
        //导入平台
        $('#ecomType').val(thisEcomTypes);
        upExcelPUrl.settings('formData', {"ecomType" : thisEcomTypes});
        upExcelPUrl.settings('formData', {"PUrlImportType" : boxStr});
        $("#importProductUrlModal").modal('show');
    }
</script>


<input type="hidden" id="platform" name="platform" value=""/>

<div class="modal" id="importProductPriceStockModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导入更新价格库存</h4>
            </div>
            <div class="modal-body p-left30 p-bottom0 modalBody">
                <div style="min-height: 200px;overflow: auto;">
                    <div class="m-top10 m-bottom30 p-bottom20">
                        <span class="fColor2">第一步：导出全部产品</span><span class="mLeft5">
                        <a class="m-left10" onclick="getOnlineProductPriceStockExport();" style="cursor:pointer">
                            <span class="glyphicon glyphicon-download-alt mRight5"></span>下载全部</a></span>
                    </div>
                    <div class="m-top20 m-bottom25">
                        <span class="fColor2">第二步：修改产品价格库存后导入Excel</span>
                    </div>
                    <div class="clear-fix m-top10" style="display: inline-block;">
                        <span id="uploadExcelPriceStock" class="w100 pull-left v-middle"></span>
                        <span id="uploadFileNamePriceStock" class=" mLeft20 pull-left" style="line-height: 30px;">您没有选中任何文件</span>
                    </div>
                </div>
                <div class="m-top10"><span class="fColor2">直接导入更新请下载示例</span>
                    <span class="mLeft5"><a id="importTemplate" href="https://www.dianxiaomi.com/static/importTemplate/import_product_price_stock.xlsx">示例下载</a></span></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="uploadFilePriceStock();">&#12288;确定&#12288;</button>
                <button type="button" class="btn btn-default" data-dismiss="modal" onclick="clearFilePriceStock();">&#12288;关闭&#12288;</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="importAutoPartsModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog" style="width: 500px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导入更新汽配模板</h4>
            </div>
            <div class="modal-body p-left30 p-bottom0 modalBody">
                <div style="min-height: 200px;overflow: auto;">
                    <div class="m-top10 m-bottom30 p-bottom20">
                        <span class="fColor2">第一步：导出全部汽配产品</span><span class="mLeft5">
                        <a class="m-left10" onclick="getSmtOnlineAutoPartsProductExport();" style="cursor:pointer">
                            <span class="glyphicon glyphicon-download-alt mRight5"></span>下载全部</a></span>
                    </div>
                    <div class="m-top20 m-bottom25">
                        <span class="fColor2">第二步：修改汽配模板后导入Excel（导入最多支持5000条）</span>
                    </div>
                    <div class="clear-fix m-top10" style="display: inline-block;">
                        <span id="uploadExcelAutoParts" class="w100 pull-left v-middle"></span>
                        <span id="uploadFileNameAutoParts" class=" mLeft20 pull-left" style="line-height: 30px;">您没有选中任何文件</span>
                    </div>
                </div>
                <div class="m-top10"><span class="fColor2">直接导入更新请下载示例</span>
                    <span class="mLeft5"><a id="importAutoPartsTemplate" href="https://www.dianxiaomi.com/static/importTemplate/import_smt_auto_parts.xlsx">示例下载</a></span></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="uploadSmtAutoPartsProduct();">&#12288;确定&#12288;</button>
                <button type="button" class="btn btn-default" data-dismiss="modal" onclick="clearAutoPartsTemplate();">&#12288;关闭&#12288;</button>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="syncFromBatchModalPriceStock" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false"
     data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量操作</h4>
            </div>
            <!--content-->
            <div class="modal-body tab-content">
                <div class="progress">
                    <div id="batchProgressBarPriceStock" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                    </div>
                </div>
                <div class="mTop10">
                    状态：<span class="fRed" id="syncFromBatchModal_statusPriceStock">进行中...</span><br/>
                    详情：<div id="syncFromBatchModal_processDetailPriceStock" style="margin-left:30px;max-height: 200px;overflow-y: auto;"></div>
                </div>
            </div>
            <!--modalFoot-->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="closeSyncFromBatchModalPriceStock();">关闭</button>
            </div>
        </div>
    </div>
</div>


<!-- SMT批量修改模态层 -->
<div class="modal" id="smtBatchEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="myModalLabel"></h4>
            </div>
            <!--conter-->
            <div class="modal-body tab-content p10">
            </div>
            <!--modalFoot-->
            <div class="modal-footer" style="clear:both;">
                <button type="button" class="btn btn-primary smtBatchEdit" data-names="">确定</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- SMT批量修改模态层end -->
<!-- 导出产品 -->
<!-- 导出仓库信息 -->
<div class="modal" id="batchExportCosProductModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false" style="z-index: 1050;">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导出<span class="batchExportDataTitle">商品</span></h4>
            </div>
            <div class="modal-body tab-content">
                <div class="progress">
                    <div id="batchExportCosCheckReplicaProgressBarr" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                    </div>
                </div>
                <div class="mTop10">已导出：<span class="fRed" id="batchExportCosCheckReplicaProcessNumm">0</span> 条数据</div>
                <div id="exportCosReportShoww" class="mTop10"></div>
                <div id="exportCosUpDownloadboxZ"></div>
                <div id="exportCosReportShowww" class="mTop10"></div>
                <div id="exportCosUpDownloadboxZu"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 异步导出进度条 start-->
<div class="modal" id="pairProductExportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导出仓库清单</h4>
            </div>
            <!--content-->
            <div class="modal-body tab-content">
                <div class="progress">
                    <input id="exportPackageKeys" type="hidden"/>
                    <input id="exportTemplateId" type="hidden"/>
                    <div id="batchCheckReplicaProgressBara" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
                </div>
                <div class="mTop10">
                    已导出：<span class="fRed" id="batchCheckReplicaProcessNuma">0</span> 条配对关系记录
                </div>
                <div id="reportShowa" class="mTop10"></div>
                <div id="upDownloadbox"></div>
            </div>
            <!--modalFoot-->
            <div class="modal-footer">
                <div uid="downloadFill" class="mRight10 downloadFill">
                    <button uid="dropdown" class="btn dropdown-toggle" style="width:auto;" type="button" disabled = 'disabled'>
                        下载&nbsp;<span class="caret"></span>
                    </button>
                    <ul uid="dropdown-menu" class="dropdown-menu" role="menu">

                    </ul>
                </div>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!--异步导出进度条 end--><script>
    /*关闭进程执行详情框*/
    var closeSyncFromBatchModalPriceStock = function(){
        $("#syncFromBatchModalPriceStock").modal("hide");
    };
    /*进程执行详情框*/
    var batchImport = function(uuid) {
        var p = 0;		// 记录进度条的值
        $("#syncFromBatchModalPriceStock").modal("show");
        var progressBar = $("#batchProgressBarPriceStock");
        // 先隐藏起来(防止出现进度条后退的效果)
        progressBar.css("width", "0%");
        progressBar.css("display", "");
        checkProcessStatus(uuid, function (data) {
            var num = data.num % 100;
            var status = "进行中...";
            if (num < p && data.code != 1) {
                // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                progressBar.css("display", "none");
                setTimeout(function () {
                    progressBar.css("display", "");
                }, 1000);
            }
            p = num;
            if (data.code == 0) {
                $("#batchProgressBarPriceStock").css("width", num + "%");
            } else {
                status = "已完成!";
                progressBar.css("width", "100%");
                progressBar.removeClass("active");
            }
            $("#syncFromBatchModal_statusPriceStock").html(status);
            $("#syncFromBatchModal_processDetailPriceStock").html(data.msg);
        });
        /*二次刷新初始化*/
        progressBar.css("display", "none");
        setTimeout(function(){
            progressBar.css("width", 0+"%");
            progressBar.css("display", "");
        },10);
        $("#syncFromBatchModal_statusPriceStock").html("0");
        $("#syncFromBatchModal_processDetailPriceStock").empty();

    };

    var PriceStockfileUpOption = {
        'auto':false,
        'fileObjName' : 'FileData',
        'fileTypeExts': '*.xlsx;*.xls', //允许的格式
        'multi':false,
        'fileSizeLimit':3096,
        'removeTimeout':500,
        'showUploadedPercent':false,
        'formData':{
            platform: $('#platform').val() //哪个平台
        },
        'buttonClass': 'btn btn-primary btn-block',
        'buttonText': '选择导入文件',
        'uploader' : 'https://www.dianxiaomi.com/product/importProductPriceStock.json',	// 后台对应的上传接口
        'uploadLimit' : 0,
        onUploadStart:function(files,formData){
            $("#importProductPriceStockModal").modal('hide');
        },
        onSelect:function(files){
            for(var i=0,len=files.length;i<len;i++){
                $("#uploadFileNamePriceStock").html(files[i].name);
            }
            return false;
        },
        onStop:function(files){
            return false;
        },
        onUploadSuccess:function(file, data, response){
            data = $.parseJSON(data);
            var uuid = data.uuid;
            if(uuid){
                batchImport(uuid);
                clearFilePriceStock();
            }else{
                $.fn.message({type:"error",msg : data.msg});
            }
        },
        onUploadError: function(file, errorCode, errorMsg, errorString){
            $('#loading').modal('hide');
            clearFilePriceStock();
            $.fn.message({type:"error",msg:"导入数据超时，部分数据导入成功，请查询列表数据!"});
        }
    };

    var AutoPartsUpOption = {
        'auto':false,
        'fileObjName' : 'FileData',
        'fileTypeExts': '*.xlsx;*.xls', //允许的格式
        'multi':false,
        'fileSizeLimit':3096,
        'removeTimeout':500,
        'showUploadedPercent':false,
        'formData':{
            platform: $('#platform').val() //哪个平台
        },
        'buttonClass': 'btn btn-primary btn-block',
        'buttonText': '选择导入文件',
        'uploader' : 'https://www.dianxiaomi.com/smtProduct/importUpdateAutoPartsTemplate.json',	// 后台对应的上传接口
        'uploadLimit' : 0,
        onUploadStart:function(files,formData){
            $("#importAutoPartsModal").modal('hide');
        },
        onSelect:function(files){
            for(var i=0,len=files.length;i<len;i++){
                $("#uploadFileNameAutoParts").html(files[i].name);
            }
            return false;
        },
        onStop:function(files){
            return false;
        },
        onUploadSuccess:function(file, data, response){
            data = $.parseJSON(data);
            var uuid = data.uuid;
            batchImport(uuid);
            clearAutoPartsTemplate();
        },
        onUploadError: function(file, errorCode, errorMsg, errorString){
            $('#loading').modal('hide');
            clearAutoPartsTemplate();
            $.fn.message({type:"error",msg:"导入数据超时，部分数据导入成功，请查询列表数据!"});
        }
    };

    var upExcelPriceStock = $('#uploadExcelPriceStock').Huploadify(PriceStockfileUpOption);

    var uploadExcelAutoParts = $('#uploadExcelAutoParts').Huploadify(AutoPartsUpOption);
    /** 上传文件确定 **/
    var uploadFilePriceStock = function(){
        var file = $("#uploadFileNamePriceStock").text();
        if(file == '您没有选中任何文件'){
            $.fn.message({type:"error",msg:"您没有选中任何文件"});
            return;
        }
        upExcelPriceStock.uploadLast();
    };
    /** 导入更新smt汽配模板上传文件确定 **/
    var uploadSmtAutoPartsProduct = function(){
        var file = $("#uploadFileNameAutoParts").text();
        if(file == '您没有选中任何文件'){
            $.fn.message({type:"error",msg:"您没有选中任何文件"});
            return;
        }
        uploadExcelAutoParts.uploadLast();
    };
    /** 恢复导入方式默认选择 **/
    var clearFilePriceStock = function (){
        upExcelPriceStock.cancel("*");
        $("#uploadFileNamePriceStock").html("您没有选中任何文件");
        $('#selectImportUrlType').val('');//清空值
    };
    /** smt汽配恢复导入方式默认选择 **/
    var clearAutoPartsTemplate = function (){
        uploadExcelAutoParts.cancel("*");
        $("#uploadFileNameAutoParts").html("您没有选中任何文件");
        $('#selectImportUrlType').val('');//清空值
    };
    // 显示导入更新价格和库存窗口
    function showImportProductPriceStock(platform){
        var shopId = $("#shopId").val(),
            $modal = $('#importProductPriceStockModal');

        if (shopId == '' || shopId == -1){
            $.fn.message({type:'error',msg:"请选择要操作的店铺！"});
            return;
        }
        $('#platform').val(platform);//导入平台
        upExcelPriceStock.settings('formData', {"platform" : platform});

        if(platform == 'amazon'){
            $("#importTemplate").attr("href",gitWinLocHref()+"static/importTemplate/import_product_price_stock_amazon.xlsx");
        }else if (platform == 'wish'){
            if($modal.find('#ieRemind').length === 0){
                $modal.find('.modalBody').prepend('<div class="prompt-strip-top m-bottom10" id="ieRemind" style="display: block;">' +
                    '<div class="prompt-strip-con"><span class="f-w600 f-red">导入模板已于1月29日更新，请下载最新导入模板！</span></div></div>');
            }

            $("#importTemplate").attr("href",gitWinLocHref()+"static/importTemplate/import_product_price_stock_wish.xlsx");
        }else if (platform == 'shopify' || platform == 'shopee' || platform == 'joom'){
            $("#importTemplate").attr("href",gitWinLocHref()+"static/importTemplate/import_product_price_stock_sku.xlsx");
        }else if (platform == 'ebay'){
            $("#importTemplate").attr("href",gitWinLocHref()+"static/importTemplate/import_product_price_stock_ebay.xlsx");
            //lazada专用模板
        }else if(platform == 'lazada'){
            $("#importTemplate").attr("href",gitWinLocHref()+"static/importTemplate/import_product_price_stock_lazada.xlsx");
        }
        $modal.modal('show');
    }
    var showAutoPartsModal = function () {
        var shopId = $("#shopId").val(),
            $modal = $('#importAutoPartsModal');

        if (shopId == '' || shopId == -1){
            $.fn.message({type:'error',msg:"请选择要操作的店铺！"});
            return;
        }
        $modal.modal('show');
    }

    function getOnlineProductPriceStockExport() {
        var platform = $("#platform").val();
        var shopId = $("#shopId").val();
        batchExportData(gitWinLocHref()+"productComm/getOnlinePriceStockExcelExport.json",{platform:platform,shopId:shopId},'产品',0);
    }
    function getSmtOnlineAutoPartsProductExport() {
        batchExportData(gitWinLocHref()+"smtProduct/exportAutoPartsProduct.json",{shopId:$("#shopId").val()},'产品',0);
    }
</script><!-- 导出产品 -->
<!-- 导出仓库信息 -->
<div class="modal" id="batchExportCosProductModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false" style="z-index: 1050;">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导出<span class="batchExportDataTitle">商品</span></h4>
            </div>
            <div class="modal-body tab-content">
                <div class="progress">
                    <div id="batchExportCosCheckReplicaProgressBarr" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
                    </div>
                </div>
                <div class="mTop10">已导出：<span class="fRed" id="batchExportCosCheckReplicaProcessNumm">0</span> 条数据</div>
                <div id="exportCosReportShoww" class="mTop10"></div>
                <div id="exportCosUpDownloadboxZ"></div>
                <div id="exportCosReportShowww" class="mTop10"></div>
                <div id="exportCosUpDownloadboxZu"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>

<!-- 异步导出进度条 start-->
<div class="modal" id="pairProductExportModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">导出仓库清单</h4>
            </div>
            <!--content-->
            <div class="modal-body tab-content">
                <div class="progress">
                    <input id="exportPackageKeys" type="hidden"/>
                    <input id="exportTemplateId" type="hidden"/>
                    <div id="batchCheckReplicaProgressBara" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
                </div>
                <div class="mTop10">
                    已导出：<span class="fRed" id="batchCheckReplicaProcessNuma">0</span> 条配对关系记录
                </div>
                <div id="reportShowa" class="mTop10"></div>
                <div id="upDownloadbox"></div>
            </div>
            <!--modalFoot-->
            <div class="modal-footer">
                <div uid="downloadFill" class="mRight10 downloadFill">
                    <button uid="dropdown" class="btn dropdown-toggle" style="width:auto;" type="button" disabled = 'disabled'>
                        下载&nbsp;<span class="caret"></span>
                    </button>
                    <ul uid="dropdown-menu" class="dropdown-menu" role="menu">

                    </ul>
                </div>
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!--异步导出进度条 end--><div class="text-right  col-xs-12 p0 mTop10">
	<ul id="downPage" class="pageDiv"></ul>
</div>
<div class="modal timedRelease" id="adPromptModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:400px;">
		<div class="modal-content">
			<div class="modal-header" >
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">提示</h4>
			</div>
			<div class="modal-body"><span STYLE="margin-left: 45px;" >操作成功！已放入到<strong>「服务 > 广告投放」</strong>的计划中</span></div>
			<div class="modal-footer" style="border-top-width: 0px;">
				<a href="https://www.dianxiaomi.com/dxmAd/index.htm" target="_blank"><button type="button" class="btn btn-primary" style="border-top-width: 0px;color: #fff; background: #f1561e; border:none; margin-right:5px;">去编辑</button></a>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="msgModal" tabindex="-1" role="dialog" aria-labelledby="imgModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">消息提示</h4>
			 </div>
			<div class="modal-body tab-content">
				<div class="mTop10">
					<p id="msgText"></p>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="confirmDelivery" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabelCD">是否继续保存并发布</h4>
			</div>
			<!--conter-->
			<div class="modal-body tab-content">
				<div class="col-xs-12 mTop10 mBottom20 pLeft10s f14" id="saveErrorMsg">是否继续保存并发布？</div>
			</div>
			<!--modalFoot-->
			<div class="modal-footer" style="border-top:none;">
				<button type="button" class="btn btn-primary" id="toOnline">继续保存并发布</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="batchUpdateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"  onclick="closeBatchModal()">Close</span></button>
				<h4 class="modal-title">批量插入店小秘营销模块</h4>
			 </div>
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="batchUpdateProgressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>
				<div class="mTop10">
					状态：<span class="fRed" id="batchUpdateModal_status">插入中...</span><br/>
					详情：<div id="batchUpdateModal_processDetail" style="margin-left:30px;"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="closeBatchModal()">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 批量修改产品标题进度条 start -->
<div class="modal" id="batchUpdateSub" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:800px;">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only" onclick="closeBatchModal()">Close</span></button>
				<h4 class="modal-title" id="showResult">批量修改产品标题</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="batchUpdateSubProgressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>

				<div class="mTop10">
					状态：<span class="fRed" id="batchUpdateSubModal_status">修改中...</span><br/>
					详情：<div id="batchUpdateSubModal_details" style="margin-left:30px; max-height: 200px; overflow-y:auto;"></div>
				</div>
				<div class="p-top10" id="errorShow" style="max-height:400px; overflow-y: auto; display: none;">
					<table class="myj-table">
						<thead>
						<tr id="head"></tr>
						</thead>
						<tbody id="errorMsg">
						</tbody>
					</table>
				</div>
			</div>
			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal" onclick="closeBatchSub()">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--修改发货期模态框-->
<div class="modal" id="deliveryTimeEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" >
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="deliveryMyModalLabelNum">修改发货期</h4>
			</div>
			<!--conter-->
			<div class="modal-body tab-content p10 pLeft20">
				<form class="doNotSubmit">
					<div>
						<div style="width:5%" class="pull-left pTop8">
							<input type="radio" id="deliveryRadio1" checked="true" class="radioIpt" data-val="1">
						</div>
						<div style="width:22%" class="pull-left pTop10">
							按现有发货期  增加
						</div>
						<div style="width:35%" class="pull-left">
							<input id="deliveryInputNum1" class="form-control text" type="text" onkeyup="value=value.replace(/[^0-9-]/g,'')" placeholder="示例：1">
						</div>
					</div>
					<input id="deliveryNumType"  type="hidden" value=""/>
					<div style="clear:both;padding-left:151px;" class="fColor2">
						<span>提示：如果减少，可输入负数。</span>
					</div>
					<div>
						<div style="width:5%" class="pull-left pTop8 mTop10">
							<input type="radio" id="deliveryRadio2" class="radioIpt" data-val="2">
						</div>
						<div style="width:22%" class="pull-left mTop10">
							<input id="deliveryInputNum2" class="form-control text mBottom10" type="text" disabled="true" onkeyup="value=value.replace(/[^0-9]/g,'')" placeholder="示例：1">
						</div>
						<div style="width:30%" class="pull-left pTop10 fColor2 pLeft10 mTop10">(直接修改发货期)</div>
					</div>
					<input type="hidden" id="delivIds" value="">
					<input type="hidden" id="delivTimes" value="">
				</form>
			</div>
			<!--modalFoot-->
			<div class="modal-footer" style="clear:both;">
				<button type="button" class="btn btn-primary smtBatchEdit" name="deliveryTime" data-names="deliveryTime" onclick="submitBatchEdit(this)">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!--修改发货期模态框end-->
<!-- 修改运费模板 -->
<div class="modal" id="proFreTemplate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" >修改运费模板</h4>
			</div>
			<div class="modal-body">
				<div class="m-top20 m-bottom20">
					<span><span class="f-red">*</span>运费模板：</span>
					<span class="m-left10 m-right 10" uid="getFreightTemplateBox"></span>
					<a href="javascript:" onclick="syncProductFreights();">
						<i class="attach-icons md-18 normal" data-toggle="tooltip" data-placement="top" title="同步运费模板" >&#xE863;</i>
					</a>
				</div>
			</div>
			<div class="modal-footer">
				<input id="ids"  type="hidden" value=""/>
				<button type="button"  class="btn btn-primary" onclick="chooseTemplateCheck(this);">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!--修改运费模板end-->
<!-- 修改服务模板 -->
<div class="modal" id="updateServiceTemplate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" >修改服务模板</h4>
			</div>
			<div class="modal-body">
				<div class="m-top20 m-bottom20">
					<span><span class="f-red">*</span>服务模板：</span>
					<span class="m-left10 m-right 10" uid="getServiceTemplateBox"></span>
					<a href="javascript:" onclick="syncProductServices();">
						<i class="attach-icons md-18 normal" data-toggle="tooltip" data-placement="top" title="同步服务模板" >&#xE863;</i>
					</a>
				</div>
			</div>
			<div class="modal-footer">
				<input id="service_ids"  type="hidden" value=""/>
				<button type="button"  class="btn btn-primary" onclick="choosePromiseTemplateCheck(this);">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!--修改服务模板end-->

<!-- 批量区域调价 -->
<div class="modal" id="updateBetweenPrice" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:650px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" >批量区域调价</h4>
			</div>
			<div class="modal-body" style="max-height: 45px; overflow-y: auto;">
				<div class="p-bottom15">
					<span>引用模板：</span>
					<div class="inline-block div-dxmSelectionSort">
						<button class="btn btn-dxmSelectionSort treeSelectBtn deShow" type="button" data-names="treeSelectBtn">
							<span data-names="nodeName">---请选择引用模板---</span>
							<span class="caret"></span>
						</button>
						<ul class="menu dropdown-menu batch-add-watermark p0" id="priceModelId" style="width:240px;max-height:290px;overflow-y:auto;">
							<li><a class="p-top5" href="javascript:" style="overflow: hidden;text-overflow: ellipsis;" data-value="48192">标价</a></li>
							<li class="borderTop">
								<a class="p-top5" href="/smtAdjustPrice/adjustPrice.htm" target="_blank" style="color:#428bca;">+添加模板</a>
							</li>
						</ul>
					</div>
				</div>
				<div id="priceTable"></div>
			</div>
			<div class="modal-footer">
				<input id="priceIds"  type="hidden" value=""/>
				<button type="button"  class="btn btn-primary" onclick="modifyBetweenPrice(this);">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!--批量区域调价end-->

<div class="modal relatedMarketing" id="importProductModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog m-top80 w500">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">导入产品</h4>
			</div>
			<div class="modal-body tab-content">
				<table class="borderOut">
					<tr>
						<td class="insertName">店铺选择:</td>
						<td>
							<select class="form-control w220" id="importShopId">
								<option value="2451968">康康</option>
									</select>
						</td>
					</tr>
					<tr>
						<td></td>
						<td>
							<span class="fWhite bgColorJ p-left10 p-right5">说明！</span> 最大支持一次导入1000条数据
						</td>
					</tr>
					<tr>
						<td></td>
						<td>
							<div class="inline-block m-top10 m-bottom30" id="upload"></div>
						</td>
					</tr>
				</table>
			</div>
			<div class="modal-footer">
				<div class="pull-left m-top7 gray-b"><a href="javascript:" onclick="batchCreateProductShowModal();">批量创建Excel</a>（基于产品模板）</div>
				<button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 导出产品 -->
<div class="modal relatedMarketing" id="exportProductModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;margin-top:80px;">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">导出产品</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<table class="borderOut">
					<tr>
						<td class="insertName">导出页数:</td>
						<td>
							<input type="text" class="form-control" style="width:62%" placeholder="例如:1-5、8、11-13" id="exportPageNo" oninput="value=value.replace(/[^0-9\-]/g,'')"/>
						</td>
					</tr>
					<tr>
						<td></td>
						<td>
							<span class="fWhite bgColorJ pLeft10 pRight5">说明！</span> 最大支持一次导出1000个产品
						</td>
					</tr>
				</table>
			</div>
			<!--modalFoot-->
			<div class="modal-footer">
				<span id="exportProductModalSpan">开启邮箱验证，让您导出店铺数据更安全</span>
				<button type="button" class="btn btn-primary" onclick="batchExportProductAll();">导出</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 选择分类模态层 -->
<div class="modal" id="smtProductGroupChoose" tabindex="-1" role="dialog" aria-labelledby="smtProductGroupChoose" aria-hidden="false" data-backdrop="static" data-keyboard="false">

	<!-- 选择分类 -->
	<div class="modal-dialog" style="width:400px;">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="smtModalLabel">选择分组</h4>
			</div>
			<!--conter-->
			<div class="modal-body tab-content" style="padding-left:20px;padding-right:20px;padding-top:5px;">
				<div style="border:1px solid #ddd;border-radius:4px;width:100%;max-height:240px;overflow-y:auto;" id="treeB_Syn">
					<ul class="chooseTree">

					</ul>
				</div>
			</div>
			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="syncSmtProductGroup();">同步</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
	<!--选择分类end-->
</div>
<!-- 仿品检测模态层 -->
<div class="modal" id="batchCheckModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">仿品检测</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="progressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>

				<div class="mTop10">
					状态：<span class="fRed" id="batchCheckModal_status">检测中...</span><br/>
					详情：<div id="batchCheckModal_processDetail" style="margin-left:30px;"></div>
				</div>
			</div>

			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="btn btn-primary myj-hide" onclick="batchPublish(this.value,true);" name="confirmPublish">发布</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--从wish同步数据end-->
<!-- 批量定时检测模态层 -->
<div class="modal" id="publicTimingCheckModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">仿品检测</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="publicTimingProgressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>

				<div class="mTop10">
					状态：<span class="fGreen" id="batchCheckModalStatus">检测中...</span><br/>
					详情：<div id="batchCheckModalProcessDetail" style="margin-left:30px;"></div>
				</div>
			</div>

			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" name="operation" onclick="continueOperation()">继续</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--单个产品定时发布检测模态框-->
<div class="modal" id="singleTimingCheckModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">仿品检测</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="singleProgressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>

				<div class="mTop10">
					状态：<span class="fGreen" id="singleBatchCheckModalStatus">检测中...</span><br/>
					详情：<div id="singleBatchCheckModalProcessDetail" style="margin-left:30px;"></div>
				</div>
			</div>

			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" name="singleOperation" onclick="singleOperation()">继续</button>
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>

<div class="modal" id="modifyShopFreightTemplate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" onclick="reloadProProposal();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量运费模板</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content" style="max-height: 450px;overflow: auto;">
				<div class="m-bottom10">
					<span>您选择的产品属于不同的店铺，请分别为他们选择运费模板</span>
				</div>
				<table class="table-modal">
					<thead>
					<tr>
						<th>店铺</th>
						<th>模板选择</th>
					</tr>
					</thead>
					<tbody id="freightTempleTab">

					</tbody>
				</table>
			</div>
			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="pull-left btn btn-primary" onclick="syncProductFreightTemplate()">同步模板</button>
				<button type="button" class="btn btn-primary generatePurchaseOrders" onclick="saveProductFreightTemplate()">保存</button>
				<button type="button" class="btn btn-default" data-dismiss="modal" onclick="">关闭</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="modifyShopPromiseTemplate" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" onclick="reloadProProposal();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量服务模板</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content" style="max-height: 450px;overflow: auto;">
				<div class="m-bottom10">
					<span>您选择的产品属于不同的店铺，请分别为他们选择服务模板</span>
				</div>
				<table class="table-modal">
					<thead>
					<tr>
						<th>店铺</th>
						<th>模板选择</th>
					</tr>
					</thead>
					<tbody id="promiseTempleTab">

					</tbody>
				</table>
			</div>
			<!--modalFoot-->
			<div class="modal-footer">
				<button type="button" class="pull-left btn btn-primary" onclick="syncProductPromiseTemplate()">同步模板</button>
				<button type="button" class="btn btn-primary generatePurchaseOrders" onclick="saveProductPromiseTemplate()">保存</button>
				<button type="button" class="btn btn-default" data-dismiss="modal" onclick="">关闭</button>
			</div>
		</div>
	</div>
</div>
<div class="modal" id="batchCreateProductModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:800px;margin-top:80px;">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量创建产品</h4>
			</div>
			<div class="modal-body tab-content">
				<div class="p20">
					<div class="create-product-flowpath createProductFlowpath flowpath-active">
						<span>1.选择产品模板，下载excel文件</span><i></i>
					</div>
					<div class="create-product-flowpath createProductFlowpath">
						<span>2.填写信息，上传文件</span><i></i>
					</div>
					<div class="create-product-flowpath createProductFlowpath">
						<span>3.进入待发布，编辑/发布</span><i></i>
					</div>
				</div>
				<div class="p20 p-top0 headTabBox defaultCheck alterBiddingType">
					<div class="head-tab no-shadow">
						<ul class="title head-tab-nav headTabNav p0 batchCreateProTabBox">
							<li class="tab-check" uid="downFiles" onclick="batchCreateProChangeTab(1);">下载文件</li>
							<li uid="upFiles" onclick="batchCreateProChangeTab(2);">上传文件</li>
						</ul>
					</div>
					<div class="head-tab-pane m-top20 headTabPane" id="downFiles">
						<div>
							<div class="bgColor5 p20">
								<div class="m-bottom10">
									<span class="">产品模板：</span>
									<select class="form-component w250" id="selectedProductModule" onchange="getProductModuleMsg(this);">
										<option value="">请选择产品模板</option>
									</select>
									<a class="m-left10" href="javascript:" onclick="batchCreateProGetProModule();">
										<span class="glyphicon glyphicon-refresh" data-toggle="tooltip" data-placement="top" title="同步产品模板"></span>
									</a>
									<a class="m-left10" href="https://www.dianxiaomi.com/userTemplate/smt/index.htm" target="_blank">新建模板</a>
								</div>
								<div>
									<div>
										<span class="fWhite bgColorJ p-left10 p-right5">说明！</span>
										<span class="fColor2">选择产品模板，可以自动填写excel模板里的产品属性</span>
									</div>
								</div>
							</div>
							<div class="m-top20">
								<button class="btn btn-primary w80" type="button" onclick="batchCreateProDownFile();">下载文件</button>
								<span class="m-left20 productCategoryName"></span>
							</div>
						</div>
					</div>
					<div class="head-tab-pane m-top20 headTabPane myj-hide" id="upFiles">
						<div>
							<div class="m-top20">
								<div class="inline-block w150" id="batchCreateProUp"></div>
								<span class="m-left20 gray-c upFilesName"></span>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer" style="clear:both;">
				<button class="btn btn-primary comfirmUpFiles hide" type="button" onclick="batchCreateProComfirmUpExcel();">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 备注弹窗 -->
<!-- 备注弹窗 -->
<div class="modal" id="remarkModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <!--modalHead-->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">备注</h4>
            </div>
            <!--content-->
            <div class="modal-body tab-content">
                <table style="width:100%;">
                    <tr>
                        <td style="vertical-align: top;min-width:60px;width:60px;text-align:right;padding-top:10px;">内容：</td>
                        <td><textarea id="selColorComment" class="form-control" rows="7" placeholder="请填写您要备注的内容(最多500字)" maxlength="500"></textarea></td>
                    </tr>
                    <tr>
                        <td style="text-align: right;padding-top:10px;">颜色：</td>
                        <td style="padding-top:10px;">
                            <div id="commentColorDiv1">
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment1 bgCommentTagA bgCommentFocus" data-val="009926" id="commentColorBtn1"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment2 bgCommentTagA bgCommentBorder" data-val="F00"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment3 bgCommentTagA bgCommentBorder" data-val="0005FD"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment4 bgCommentTagA bgCommentBorder" data-val="FF5800"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment5 bgCommentTagA bgCommentBorder" data-val="8E0075"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment6 bgCommentTagA bgCommentBorder" data-val="FF6666"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment7 bgCommentTagA bgCommentBorder" data-val="FFCAC5"></a>
                                <a href="javascript:" onclick="Remark.selectCommentColor(this);" class="bgComment8 bgCommentTagA bgCommentBorder" data-val="00D0FF"></a>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <!--modalFoot-->
            <div class="modal-footer">
                <span id="tipContext"></span>
                <input type="hidden" id="productId" value=""/>
                <input type="hidden" id="platformRemark" value=""/>
                <button type="button" class="btn btn-primary" onclick="Remark.commentProductProcess();">提交</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!--备注end-->
<div class="modal" id="batchAddWaterMarkModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量加水印</h4>
            </div>
            <div class="modal-body">
                <input id="saveProductIds" type="hidden" value=""/>
                <input id="platformName" type="hidden" value=""/>
                <div class="p20">
                    <span>选择水印模板：</span>
                    <select class="form-control inline-block w200 m-right10 noNewLine" id="addWatermarkTemplate"></select>
                    <label>
                        <input id="addFirstPic" type="checkbox"/>
                        <span>只在首图上加水印</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <div class="btn-box">
                    <button class="btn btn-primary m-right10" type="button" onclick="listBatchAddWaterMark();">保存</button>
                    <button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal" id="batchWarterMarkResultModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" type="button" data-dismiss="modal" onclick="batchWarterMarkResultClose();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量添加水印</h4>
            </div>
            <div class="modal-body">
                <div class="progress">
                    <div class="progress-bar progress-bar-success progress-bar-striped" id="productAddWaterProgressBar" role="progressbar"
                         aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%"></div>
                </div>
                <div class="mTop10">
                    状态：<span class="fRed" id="productAddWaterModal_status">进行中...</span><br/>
                    <div id="productAddWaterModal_error"></div>
                    处理详情：<div id="productAddWaterModal_processDetail" style="margin-left:30px;;max-height:150px;overflow-y:scroll"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-determine" data-dismiss="modal" onclick="batchWarterMarkResultClose();">关闭</button>
            </div>
        </div>
    </div>
</div>
<!-- 批量编辑分类弹层 -->
<div class="modal" id="batchClassifyMatchingCategoryModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content bs-example bs-example-tabs">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">提示</h4>
            </div>
            <div class="modal-body tab-content m20 m-top0">
                <div>
                    <span class="custom-modal-back-icon attach-icons md-28 f-cyan pull-left m-right5">check_circle</span>
                    <span class="f-cyan">选择产品 —— </span>
                    <span class="m-right5" style="border-radius: 50%;width: 20px;height: 20px;line-height: 20px;padding-left: 5px;color: #00AEB3;display:inline-block;border: 1px solid #00AEB3;font-size: 14px;">2</span>
                    <span class="f-cyan">编辑分类 <span class="gray-a"> —— </span></span>
                    <span class="m-right5 gray-a" style="border: 1px solid #d0d3d6;border-radius: 50%;width: 20px;height: 20px;line-height: 20px;padding-left: 5px;background-color: white;display:inline-block;font-size: 14px;">3</span>
                    <span class="gray-c">编辑产品 <span class="gray-a"> —— </span></span>
                    <span class="m-right5 gray-a" style="border: 1px solid #d0d3d6;border-radius: 50%;width: 20px;height: 20px;line-height: 20px;padding-left: 5px;background-color: white;display:inline-block;font-size: 14px;">4</span>
                    <span class="gray-c">保存/发布</span>
                </div>
                <div class="batchProductEditClassify">
                    <div class="m-top20">共选择 <span class="f-W600" id="selectedClassify"></span>个产品，有 <span class="f-W600 f-red" id="unselectedClassify"></span>个产品未自动识别出分类，需要手动对应分类</div>
                </div>
                <div class="productEditClassify">
                    <div class="p10 m-top10 bgColor4">
                        <div class="imgDivOut border3" style="width: 70px;height: 70px;">
                            <div class="findGoods" id="productMainPic" style="height: 68px;"></div>
                        </div>
                        <div class="inline-block w350 v-top m-left5" id="productName"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="gray-b pull-left">
                    <span class="fColor2">说明！编辑分类，可使搬家/采集产品信息更完善；<br/>若选择跳过，需重新手动选择分类、添加变种信息。</span>
                </div>
                <span class="hide" id="correspondingClassify"></span>
                <button class="button btn-determine editCategotyBtn" type="button" onclick="moveHouseMatching.correspondingClassify(1);">编辑分类</button>
                <button class="button btn-gray m-left8 jumpOverGoEditProBtn" type="button" onclick="moveHouseMatching.correspondingClassify(0);">跳过，去编辑产品</button>
            </div>
        </div>
    </div>
</div>
<!--批量编辑分类弹层end--><!--备注end-->
<!--加载各个操作的提示窗-->
<input type="hidden" id="isSpecifyEmail"/>
<input type="hidden" id="specifyEmail"/>
<style type="text/css">
	.verifyEmailCodeModal .modal-dialog{width:500px;margin-top:80px;}
	.verifyEmailCodeModal .modal-body{padding: 35px 0 35px 70px;}
	.verifyEmailCodeModal .modal-body .verifyCode{display: inline;width:250px;}
	.verifyEmailCodeModal .modal-body .sendEmailBtn{vertical-align: inherit;}
	.smtProductDiagnoseModal .modal-dialog{width:600px;margin-top:80px;}
	.smtProductDiagnoseModal .modal-body{padding: 20px 15px 10px;}
	.smt-component-tag-info{
		display: inline-block;
		position: relative;
		margin: 5px 5px 0;
		padding: 5px 25px 5px 10px;
		font-size: 75%;
		font-weight: 600;
		line-height: 1;
		color: #fff;
		text-align: center;
		white-space: nowrap;
		vertical-align: baseline;
		border-radius: 2px;
		background-color: #5bc0de;
	}
	.smt-component-tag-remove {
		position: absolute;
		top: 1px;
		right: 3px;
		margin-left: 5px;
		width: 15px;
		height: 15px;
		font-size: 20px;
		font-weight: 600;
		vertical-align: middle;
		color: #fff;
	}
    .smt-component-tag-show{
        display: inline-block;
        max-width: 300px;
        overflow: hidden;
        text-overflow: ellipsis;
    }
</style>
<!-- 验证码 -->
<div class="modal verifyEmailCodeModal" id="verifyEmailCodeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" onclick="verifyCodeClose();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">邮箱验证</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content">
				<input type="text" id="verifyCode" name="verifyCode" placeholder="填写6位验证码" class="form-control verifyCode"/>
				<button class="btn btn-primary sendEmailBtn" onclick="sendEmailCode(this)">获取验证码</button>
				<p class="pTop10" style="margin-right:35px">验证码有效时间为10分钟</p>
				<button id="verifyCodeBtn" type="button" class="btn btn-primary mTop15 mRight10 w80">验证</button>
				<button id="verifyCodeCloseBtn" type="button" class="btn btn-default mTop15 w80" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>

<div class="modal verify-email-code verifyEmailCodeModal" id="orderProfitTypeSelectModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" onclick="verifyCodeClose();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">订单利润显示设置</h4>
			</div>
			<div class="modal-body tab-content">
				<div class="mBottom20">
					<label>
						<input name="orderProfitSelectInp" type="radio" value="0" checked>
						订单列表页不显示利润率
					</label>
				</div>
				<div class="mBottom20">
					<label>
						<input type="radio" name="orderProfitSelectInp" value="1">
						订单列表页显示销售利润率
					</label>
				</div>
				<div>
					<label>
						<input type="radio" name="orderProfitSelectInp" value="2">
						订单列表页显示成本利润率
					</label>
				</div>
				<div class="btn-box mLeft200">
					<button id="orderProfitSelectSubmit" type="button" class="btn btn-primary mTop15 mRight10 w80">确认
					</button>
					<button id="orderProfitSelectCloseBtn" type="button" class="btn btn-default mTop15 w80"
							data-dismiss="modal">关闭
					</button>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- 自动修正收件信息提示 -->
<div class="modal bothOrderModal" id="bothOrderModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header clear-fix p-bottom5">
				<button type="button" class="close" data-dismiss="modal" onclick="bothOrderClose();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title"></h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content p-left30">
				<div class="f-red f18 f-W600">严重提醒！</div>
				<div class="m-top20 m-bottom20">激活此项，如因信息填写错误，可能造成无法正常投递的风险。如因此产生的任何问题，小秘概不负责，请谨慎考虑后再开启此项。</div>
				<button class="button btn-determine mTop15 mRight10 w80" id="bothOrderBtn" type="button">确认开启</button>
				<button class="button btn-gray mTop15 w80" id="bothOrderCloseBtn" type="button" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>

<!-- 自动修正收件信息提示 -->
<div class="modal in-modal bothDefaultModal" id="bothDefaultModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog w500">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header clear-fix p-bottom5">
				<button type="button" class="close" data-dismiss="modal" onclick="bothOrderClose();"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">默认设置</h4>
			</div>
			<!--content-->
			<div class="modal-body tab-content p-left30">
				<div class="gray-c">当手机电话均为空，自动填充为默认值</div>
				<div class="m-top20">
					手机：<input class="form-component w250" id="defaultMobile" type="text" placeholder="允许最大20位数字" />
				</div>
				<div class="m-top20">
					电话：<input class="form-component w250" id="defaultPhone" type="text" placeholder="允许最大20位数字" />
				</div>
			</div>
			<div class="modal-footer">
				<button class="button btn-determine w80" id="bothSaveDefaultModal" type="button">保存</button>
				<button class="button btn-gray w80 m-left8" id="bothCloseDefaultModal" type="button" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript">
    var joinStr = "&-&";
    var arr = [];
    //测试
    //配置
    var sitt = {
        check: 1,//checkbx 0不显示，1显示
        showNum: 0,//统计数字 0不显示，1显示
        clickName: '',//分类后面显示的动做名
        objOption: "downSmtGroup(this)"
    };
    // 选择店铺时给上传组件赋值
    $("#importShopId").change(function () {
        var shopId = $(this).val();
        up.settings('formData', {"shopId": shopId});
    });
    var up = $('#upload').Huploadify({
        'auto': true,
        'fileObjName': 'FileData',
        'fileTypeExts': '*.xlsx;*.xls', //允许的格式
        'multi': false,
        'fileSizeLimit': 2048,
        'removeTimeout': 500,
        'formData': {shopId: $('#importShopId').val()},
        'buttonClass': 'btn btn-primary btn-block',
        'buttonText': '选择上传文件',
        'uploader': 'https://www.dianxiaomi.com/smtProduct/importProduct.json',		// 后台对应的上传接口
        onUploadStart: function () {
            $("#importProductModal").modal('hide');
            $('#loading').modal('show');
            // 去掉店铺选中的项
        },
        onSelect: function (files) {
            return true;
        },
        onStop: function (files) {
            return false;
        },
        'onUploadSuccess': function (file, data, response) {
            data = $.parseJSON(data);
            if (data != null) {
                $('#loading').modal('hide');
                var successList = data.successList;
                var failList = data.failList;
                batchReturnProcess(successList, failList, successList.length > 0 ? (successList.length) + "&nbsp;&nbsp;&nbsp;&nbsp;已保存到「 待发布」页，请在待发布页编辑、发布！" : "0");
                reloadPage("smtProduct/pageList.htm");
            }
        }
    });
    $(document).ready(function () {
		var clickCall = function(screenObj){
			$("#loading").modal("show");
			var Screening = {
						shopId:$('#shopId').val(),
						groupId:$('#groupId').val(),
						productStatusType:$("#productStatusType").val(),
						dxmState:$('#dxmState').val(),
						dxmOfflineState:$('#dxmOfflineState').val(),
						searchType:$('#searchType').val(),
						searchValue:$.trim($('#searchValue').val()),
						sortName:$('#sortName').val(),
						sortValue:$('#sortValue').val(),
						advancedSearch:$('#advancedSearch').val(),
						deliveryTimeLift:$.trim($('#deliveryTimeLift').val()),
						deliveryTimeRight:$.trim($('#deliveryTimeRight').val()),
						grossWeightLift:$.trim($('#grossWeightLift').val()),
						grossWeightRight:$.trim($('#grossWeightRight').val()),
						productCategory:$('#productCategory').val(),
						freightTemplateId:$('#freightTemplateId').val(),
						motorState:$('#motorState').val(),
						timeLift:$.trim($('#timeLift').val()),
						timeRight:$.trim($('#timeRight').val()),
						advancedTime:$('#advancedTime').val(),
                    	sourceUrl:$.trim($('#sourceUrl').val())
					},
					data = $.extend(screenObj,Screening);
			$.post('smtProduct/pageList.htm',data,function (data) {
				$('#pageList').html(data);
				$('#loading').modal('hide');
			},"html").always(function () {
				$("#loading").modal("hide");
			});
		};
		//注册分页
		MYJ_PAGINATION.init(MYJ_PAGINATION.get([50,100,300]),'',clickCall);
		MYJ_PAGINATION.init(MYJ_PAGINATION.get([50,100,300],true),'#ceilingPage',clickCall);
        // 全选
        $(document).on('click', '#selectAll', function () {
            if (this.checked) {
                $("input[name='productBox']").each(function () {
                    this.checked = true;
                });
            } else {
                $("input[name='productBox']").each(function () {
                    this.checked = false;
                });
            }
        });
        // 处理库存数量
        $(".skuStock_td").each(function () {
            var data = $(this).data("val");
            if (data) {
                //data = eval(data);
                var stock = 0;
                for (var i in data) {
                    stock += data[i].ipmSkuStock;
                }
                var productStatusType = $("#productStatusType").val();
                if ('onSelling' == productStatusType || 'offline' == productStatusType) {
                    var id = $(this).parent().attr("data-id");
                    var skuA = '&nbsp;&nbsp;<a href="javascript:;" class="glyphicon glyphicon-edit" onclick="updateStock(' + id + ');"></a>';
                    $(this).html(stock + skuA);
                } else {
                    $(this).text(stock);
                }
            }
        });
        // $('[cid="errMsgSpan"] [data-toggle="popover"]').popover('show');
        // 判断用户是否开启邮箱验证
        var emailVerify = $("#emailVerify").val();
        if (emailVerify == 'true') {
            $("#exportProductModalSpan").css("margin-right", "266px").html('<a href="sys/index.htm?go=m482">关闭邮箱验证</a>');
        } else {
            $("#exportProductModalSpan").css("margin-right", "112px").html('<a href="sys/index.htm?go=m482">开启邮箱验证</a>，让您导出店铺数据更安全');
        }
		$('[data-toggle="popover"]').popover();
	});
    // 移入待发布
    var moveToNoPublish = function (pid) {
        myjAlert.confirm({
            'content': '未选择的图片移入后会被清除，确定要「移入待发布」吗？',
            'callback': function (v) {
                if (v) {
                    $('#loading').modal('show');
                    $.get(
                        "smtProduct/moveToNoPublish.json",
                        {
                            id: pid,
                            shopId: $("#shopId").val(),
                        },
                        function (data) {
                            $('#loading').modal('hide');
                            if (data.code == 0) {
                                $.fn.message({type: "success", msg: "操作成功，请到待发布产品中查看"});
                                var url = "smtProduct/pageList.htm", pageNo = $('#pageNo').val(),
                                    pageSize = $('#pageSize').val();
                                reloadPage(url, pageNo, pageSize);
                            } else {
                                $.fn.message({type: "error", msg: data.msg});
                            }
                        }
                    ).error(function (err) {
                        $('#loading').modal('hide');
                        $.fn.message({type: "error", msg: "网络请求超时， 请稍后重试!"});
                    });
                }
            }
        });
    };
    // 根据勾选导出数据
    var batchExportProduct = function () {
        var box = [];
        $("input[name='productBox']:checked").each(function () {
            box.push($(this).val());
        });
        if (box.length == 0) {
            $.fn.message({type: "error", msg: "请至少选择一个产品"});
            return;
        }
        $.ajax({
            type: "GET",
            url: "smtProduct/getExportRemainCount.json",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 0) {
                    if (box.length > data.exportRemain) {
                        $.fn.message({
                            type: "error",
                            msg: "导出失败！您今天还能导出" + data.exportRemain + "个，想要导出更多请<a href='user/vipInfo.htm'> 升级VIP</a>！"
                        });
                        return;
                    }
                    var boxStr = box.join(",");
                    // 如果用户开启了邮箱验证，弹出验证框
                    var emailVerify = $("#emailVerify").val();
                    if (emailVerify == 'true') {
                        // 给验证按钮注册事件
                        $("#verifyCodeBtn").unbind("click");
                        $("#verifyCodeBtn").bind("click", verifyEmailCode(boxStr, processBatchExportProduct));
                        // 弹出验证框
                        $("#verifyCode").val("");
                        $("#verifyEmailCodeModal").modal("show");
                    } else {
                        processBatchExportProduct(boxStr);
                    }
                } else {
                    $.fn.message({type: "error", msg: "网络超时，请稍后重试！"});
                }
            }
        });
    };
    var processBatchExportProduct = function (boxStr) {
        var state = $("#dxmState").val();
        if (state) {
            batchExportData("https://www.dianxiaomi.com/smtProduct/batchExportProductExcel.json", {
                ids: boxStr,
                state: state
            }, '产品', 1000);
        } else {
            batchExportData("https://www.dianxiaomi.com/smtProduct/batchExportProductExcel.json", {
                ids: boxStr,
                state: ""
            }, '产品', 1000);
        }
    };
    // 显示按页导出弹框
    var showExportModal = function () {
        $("#exportProductModal").modal("show");
    };
    var batchExportProductAll = function () {
        var pageNo = $.trim($("#exportPageNo").val());
        if (!pageNo) {
            $.fn.message({type: "error", msg: "请填写需要导出的页数！"});
            return;
        }
        var pageSize = $('#pageSize').val();
        var totalPage = $('#totalPage').val();
        var startNo = 0;
        var endNo = 1;
        if (pageNo.indexOf("-") > -1) {
            var arr = pageNo.split("-");
            if (isNaN(arr[0]) || isNaN(arr[1])) {
                $.fn.message({type: "error", msg: "请输入有效的页数！"});
                return;
            }
            startNo = parseInt($.trim(arr[0]));
            endNo = parseInt($.trim(arr[1]));
            if (!startNo || !endNo || endNo < startNo) {
                $.fn.message({type: "error", msg: "请输入有效的页数！"});
                return;
            }
            if (startNo < 0 || endNo < 0 || startNo > totalPage || endNo > totalPage) {
                $.fn.message({type: "error", msg: "请输入有效的页数！"});
                return;
            }
        } else {
            if (isNaN(pageNo)) {
                $.fn.message({type: "error", msg: "请输入有效的页数！"});
                return;
            }
            startNo = parseInt($.trim(pageNo));
            if (!startNo || startNo < 0 || startNo > totalPage) {
                $.fn.message({type: "error", msg: "请输入有效的页数！"});
                return;
            }
            endNo = 0;
        }
        if (!pageSize) {
            pageSize = 50;
        }
		startNo = startNo < 1 ? 0 : startNo - 1;//纠正计算数据条数不对的问题
		if(endNo) pageSize = endNo * pageSize - startNo * pageSize;
        if (pageSize > 1000) {
            $.fn.message({type: "error", msg: "暂时只支持最大导出1000个产品！"});
            return;
        }
        $("#exportProductModal").modal("hide");
        $.ajax({
            type: "GET",
            url: "smtProduct/getExportRemainCount.json",
            data: {},
            dataType: "json",
            success: function (data) {
                if (data.code == 0) {
                    if (pageSize > data.exportRemain) {
                        $.fn.message({
                            type: "error",
                            msg: "导出失败！您今天还能导出" + data.exportRemain + "个，想要导出更多请<a href='user/vipInfo.htm'> 升级VIP</a>！"
                        });
                        return;
                    }
                    var params = {
                        shopId: $('#shopId').val(),
                        groupId: $('#groupId').val(),
                        productStatusType: $('#productStatusType').val(),
                        dxmState: $('#dxmState').val(),
                        dxmOfflineState: $('#dxmOfflineState').val(),
                        searchType: $('#searchType').val(),
                        searchValue: $.trim($('#searchValue').val()).replace(/%/g,'\\%').replace(/_/g,'\\_'),
                        sortName: $('#sortName').val(),
                        sortValue: $('#sortValue').val(),
                        deliveryTimeLift: $('#deliveryTimeLift').val(),
                        deliveryTimeRight: $('#deliveryTimeRight').val(),
                        grossWeightLift: $('#grossWeightLift').val(),
                        grossWeightRight: $('#grossWeightRight').val(),
                        timeLift: $('#timeLift').val(),
                        timeRight: $('#timeRight').val(),
                        productCategory: $('#productCategory').val(),
                        freightTemplateId: $('#freightTemplateId').val(),
                        advancedTime: $('#advancedTime').val(),
                        pageSize: $('#pageSize').val(),
                        pageNo: pageNo
					};
                    // var params = "shopId=" + $('#shopId').val() + "&groupId=" + $('#groupId').val() + "&productStatusType=" + $('#productStatusType').val()
                    //     + "&dxmState=" + $('#dxmState').val() + "&dxmOfflineState=" + $('#dxmOfflineState').val()
                    //     + "&searchType=" + $('#searchType').val() + "&searchValue=" + $.trim($('#searchValue').val()).replace(/%/g,'\\%').replace(/_/g,'\\_')
                    //     + "&sortName=" + $('#sortName').val() + "&sortValue=" + $('#sortValue').val()
                    //     + "&deliveryTimeLift=" + $('#deliveryTimeLift').val() + "&deliveryTimeRight=" + $('#deliveryTimeRight').val()
                    //     + "&grossWeightLift=" + $('#grossWeightLift').val() + "&grossWeightRight=" + $('#grossWeightRight').val()
                    //     + "&timeLift=" + $('#timeLift').val() + "&timeRight=" + $('#timeRight').val()
                    //     + "&productCategory=" + $('#productCategory').val() + "&freightTemplateId=" + $('#freightTemplateId').val()
                    //     + "&advancedTime=" + $('#advancedTime').val()
                    //     + "&pageSize=" + $('#pageSize').val() + "&pageNo=" + pageNo;
                    // 如果用户开启了邮箱验证，弹出验证框
                    var emailVerify = $("#emailVerify").val();
                    if (emailVerify == 'true') {
                        // 给验证按钮注册事件
                        $("#verifyCodeBtn").unbind("click");
                        $("#verifyCodeBtn").bind("click", verifyEmailCode(params, processBatchExportProductAll));
                        // 弹出验证框
                        $("#verifyCode").val("");
                        $("#verifyEmailCodeModal").modal("show");
                    } else {
                        processBatchExportProductAll(params);
                    }
                } else {
                    $.fn.message({type: "error", msg: data.msg});
                }
            }
        });
    };
    var processBatchExportProductAll = function (params) {
        batchExportData("https://www.dianxiaomi.com/smtProduct/batchExportProductExcelAll.json", params, '产品', 1000);
    };
    //给快捷操作批量修改单字段绑定改变事件
    var batchUpdateField = function (e) {
        var se = $(e).attr("data");
        if (se != "") {
            var box = [],
                shopIds = [],
                shopMap = {};
            $("input[name='productBox']:checked").each(function () {
                box.push($(this).val());
                if (shopMap[$(this).data('shopid')]) {
                    shopMap[$(this).data('shopid')] = shopMap[$(this).data('shopid')] + "," + $(this).val();
                    return true;
                }
                shopMap[$(this).data('shopid')] = $(this).val();
                shopIds.push($(this).data('shopid'));
            });
            if (box.length == 0) {
                $.fn.message({type: "error", msg: "请至少选择一个产品"});
                return;
            }
            if (se == "batchEditSubject") {
                var sub = [];
                $("input[name='productBox']:checked").each(function () {
                    sub.push($(this).attr("subject"));
                });
                var idBox = box.join("&-&");
                var subs = sub.join("&-&");
                /*$("#productIds").val(idBox);*/
                batchUpdateSubjects(idBox, subs);
            } else if (se == "batchEditDeliTime") {
                var deliTime = [];
                $("input[name='productBox']:checked").each(function () {
                    var deliveryT = $(this).attr("deliveryTime");
                    if (deliveryT == undefined || deliveryT == "") {
                        deliveryT = 0;
                    }
                    deliTime.push(deliveryT);
                });
                var idDeli = box.join("&-&");
                var deliveryTime = deliTime.join("&-&");
                batchUpdateDeliveryTime(idDeli, deliveryTime);
            } else if (se == "batchEditGroupIds") {
                var ids = box.join("&-&");
                setProductGroupIds();
                chooseProductGroups(ids);
            } else if (se == "batchEditFreight") {
                if ($('#shopId').val() > 0) {
                    var ids = box.join(",");
                    var freightLists = getFreights($('#shopId').val());
                    var str = getFreightTemplate(freightLists);
                    $('#proFreTemplate').find('span[uid="getFreightTemplateBox"]').html(str);
                    $("#ids").val(ids);
                    $('#proFreTemplate').modal("show");
                } else {
                    var shopIdStr = shopIds.join(",");
                    getAllShopFreightTemplateList(shopIdStr, 0);
                    $("#ids").val(JSON.stringify(shopMap));
                }

            } else if (se == "batchEditService") {//批量改服务模板
                if ($('#shopId').val() > 0) {
                    var ids = box.join(",");
                    var serviceLists = getServices($('#shopId').val());
                    var str = getServiceTemplate(serviceLists);
                    $('#updateServiceTemplate').find('span[uid="getServiceTemplateBox"]').html(str);
                    $("#service_ids").val(ids);
                    $('#updateServiceTemplate').modal("show");
                } else {
                    var shopIdStr = shopIds.join(",");//所有有产品的店铺id,用','连接起来,组成字符串
                    getAllShopServiceTemplateList(shopIdStr, 0);//所有店铺的产品批量改服务模板调用方法
                    $("#service_ids").val(JSON.stringify(shopMap));
                }

            } else if (se == "batchEditBetweenPrice") {//批量改区间价格
                var ids = "";
                if ($('#shopId').val() > 0) {//单个店铺商品
                    ids = box.join(",");//存放商品的id,用","进行拼接成字符串
                    getBetweenPrice();
                    $("#priceIds").val(ids);
                    $('#updateBetweenPrice').modal("show");
                } else {//全部店铺商品
                    ids = box.join(",");//存放商品的id,用","进行拼接成字符串
                    getBetweenPrice();
                    $("#priceIds").val(ids);
                    $('#updateBetweenPrice').modal("show");
                }

            }

        }
    };

    var getAllShopFreightTemplateList = function (shopIds, type) {
        $('#freightTempleTab').empty();
        if ($.trim(shopIds) == "") {
            $.fn.message({type: "error", msg: "请先选择店铺！"});
            return;
        }
        $.ajax({
            type: "POST",
            url: "smtShopInfoSync/allShopFreightList.json",
            data: {shopIds: shopIds, type: type, templateType: "freight"},
            dataType: "json",
            success: function (data) {
                if (data.code != -1) {
                    for (var key in data) {
                        if (key == "code") {
                            continue;
                        }
                        var str = key.split('&&');
                        var shopId = str[0];
                        var shopName = str[1];
                        var freightTemplateList = data[key];
                        var html = "";
                        getFreightHtml(html, shopName, shopId, freightTemplateList);
                    }
                    $('#modifyShopFreightTemplate').modal('show');
                    if (type != 0) {
                        $('#loading').modal("hide");
                        $.fn.message({type: "success", msg: "同步运费模板成功!"});
                        return;
                    }
                } else {
                    $.fn.message({type: "error", msg: data.msg});
                    return;
                }
            }
        });
    };
    //批量改服务模板(全部店铺)
    var getAllShopServiceTemplateList = function (shopIds, type) {
        $('#promiseTempleTab').empty();
        if ($.trim(shopIds) == "") {
            $.fn.message({type: "error", msg: "请先选择店铺！"});
            return;
        }
        $.ajax({
            type: "POST",
            url: "smtShopInfoSync/allShopFreightList.json",
            data: {shopIds: shopIds, type: type, templateType: "promised"},
            dataType: "json",
            success: function (data) {
                if (data.code != -1) {
                    for (var key in data) {
                        if (key == "code") {
                            continue;
                        }
                        var str = key.split('&&');
                        var shopId = str[0];
                        var shopName = str[1];
                        var promiseTemplateList = data[key];
                        var html = "";
                        getPromisetHtml(html, shopName, shopId, promiseTemplateList);
                    }
                    $('#modifyShopPromiseTemplate').modal('show');
                    if (type != 0) {
                        $('#loading').modal("hide");
                        $.fn.message({type: "success", msg: "同步服务模板成功!"});
                        return;
                    }
                } else {
                    $.fn.message({type: "error", msg: data.msg});
                    return;
                }
            }
        });
    };

    var getFreightHtml = function (html, shopName, shopId, freightTemplateList) {
        html += '<tr class="content"><td class="shopNameLi" shopId = "' + shopId + '">' + shopName + '</td>';
        html += '<td class="txt300"><select class="form-component" name="dispatchShop" id="dispatchShop">';
        var htmlStr = "<option value=''>-----请选择运费模板-----</option>";
        for (var i = 0; i < freightTemplateList.length; i++) {
            htmlStr += "<option cid='" + freightTemplateList[i].templateId + "'>" + freightTemplateList[i].templateName + "</option>";
        }
        html += htmlStr + "</select></td></tr>";
        $('#freightTempleTab').append(html);
    };
    //服务模板
    var getPromisetHtml = function (html, shopName, shopId, promiseTemplateList) {
        html += '<tr class="content"><td class="shopNameLi" shopId = "' + shopId + '">' + shopName + '</td>';
        html += '<td class="txt300"><select class="form-component" name="dispatchShop" id="dispatchShop">';
        var htmlStr = "<option value=''>-----请选择服务模板-----</option>";
        for (var i = 0; i < promiseTemplateList.length; i++) {
            htmlStr += "<option cid='" + promiseTemplateList[i].templateId + "'>" + promiseTemplateList[i].templateName + "</option>";
        }
        html += htmlStr + "</select></td></tr>";
        $('#promiseTempleTab').append(html);
    };

    var saveProductFreightTemplate = function () {
        var shopIdMap = $('#ids').val();
        if ($.trim(shopIdMap) != "") {
            shopIdMap = JSON.parse(shopIdMap);
            var idsAndFreight = {};
            $('#freightTempleTab').find('tr').each(function () {
                if ($.trim($(this).find('select[name="dispatchShop"]').find('option:selected').attr('cid')) != "") {
                    var templateId = $(this).find('select[name="dispatchShop"]').find('option:selected').attr('cid');
                    var shopId = $(this).find('td.shopNameLi').attr('shopid');
                    idsAndFreight[shopIdMap[shopId]] = templateId;
                }
            });

            if ($.isEmptyObject(idsAndFreight)) {
                $.fn.message({"type": "error", msg: "尚未选择店铺运费模板，请选择后操作！"});
                return;
            }
            var data = {
                idsAndFreight: JSON.stringify(idsAndFreight),
                field: "freightTemplate"
            }
            $('#modifyShopFreightTemplate').modal('hide');
            goOnline(data);
        }
    };

    var saveProductPromiseTemplate = function () {
        var shopIdMap = $('#service_ids').val();
        if ($.trim(shopIdMap) != "") {
            shopIdMap = JSON.parse(shopIdMap);
            var idsAndFreight = {};
            $('#promiseTempleTab').find('tr').each(function () {
                if ($.trim($(this).find('select[name="dispatchShop"]').find('option:selected').attr('cid')) != "") {
                    var templateId = $(this).find('select[name="dispatchShop"]').find('option:selected').attr('cid');
                    var shopId = $(this).find('td.shopNameLi').attr('shopid');
                    idsAndFreight[shopIdMap[shopId]] = templateId;
                }
            });

            if ($.isEmptyObject(idsAndFreight)) {
                $.fn.message({"type": "error", msg: "尚未选择店铺服务模板，请选择后操作！"});
                return;
            }
            var data = {
                idsAndFreight: JSON.stringify(idsAndFreight),
                field: "promisedTemplate"
            }
            $('#modifyShopPromiseTemplate').modal('hide');
            goOnline(data);
        }
    };

    var getFreights = function (shopId) {
        if ($.trim(shopId) == "") {
            $.fn.message({type: "error", msg: "请先选择店铺！"});
            return;
        }
        var freightTemplateList;
        $.ajax({
            type: 'POST',
            async: false,
            url: 'smtShopInfoSync/freightList.json',
            data: {
                shopId: shopId,
                type: 1
            },
            dataType: 'json',
            success: function (data) {
				freightTemplateList = data.freightTemplateList;
				if(+data.code === -1 && !freightTemplateList) $.fn.message({type: 'error', msg: data.msg ? data.msg : '该店铺没有运费模板!'});
            }
        });
        return freightTemplateList;
    };
    var getServices = function (shopId) {
        if ($.trim(shopId) == "") {
            $.fn.message({type: "error", msg: "请先选择店铺！"});
            return;
        }
        var promiseTemplateList;
        $.ajax({
            type: 'POST',
            async: false,
            url: 'smtShopInfoSync/promiseList.json',
            data: {
                shopId: shopId
            },
            dataType: 'json',
            success: function (data) {
				promiseTemplateList = data.promiseTemplateList;
				if(+data.code === -1 && !promiseTemplateList) $.fn.message({type: 'error', msg: data.msg ? data.msg : '该店铺没有运费模板!'});
            }
        });
        return promiseTemplateList;
    };
    var getFreightTemplate = function (freightLists) {
        if (freightLists) {
            freightLists = eval(freightLists);
            var str = '<select class="form-control inline-block w300" id="freightTemplateId">';
            str += '<option cid="">— —请选择运费模板— —</option>';
            for (var i = 0; i < freightLists.length; i++) {
                str += '<option cid="' + freightLists[i].templateId + '">' + freightLists[i].templateName + '</option>';
            }
            str += '</select>';
            return str;
        }
        return '';
    };
    //批量改服务模板(单个店铺)
    var getServiceTemplate = function (serviceLists) {
        if (serviceLists) {
            serviceLists = eval(serviceLists);
            var str = '<select class="form-control inline-block w300" id="serviceTemplateId">';
            str += '<option cid="">— —请选择服务模板— —</option>';
            for (var i = 0; i < serviceLists.length; i++) {
                str += '<option cid="' + serviceLists[i].templateId + '">' + serviceLists[i].templateName + '</option>';
            }
            str += '</select>';
            return str;
        }
        return '';
    };

    var setProductGroupIds = function () {
        setBatchProductGroup();
    };
    var chooseProductGroups = function (ids) {
        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            $.fn.message({type: "error", msg: "请选择速卖通店铺!"});
            return;
        }
        $("#productIds").val(ids);
        $('#productGroupChoose').modal('show');
    };
    var chooseGroupCheck = function () {
        var ids = $("#productIds").val();
        var group = $.fn.myj_tree.chooseTreeCheckGet('treeB');
        var groupIdSpan = "";
        var groupIds = "";
        var groupId = "";

        if (group != null && group.length > 0 && group.length < 4) {
            for (var i = 0; i < group.length; i++) {
                if (i > 0) {
                    groupIdSpan += "、";
                    groupIds += ",";
                }
                groupIdSpan += group[i].groupName;
                groupIds += group[i].groupId;
                groupId = group[i].groupId;
            }
            var data = {
                idStr: ids,
                groupIds: groupIds,
                field: 'groupIds'
            }
            $('#productGroupChoose').modal('hide');
            goOnline(data);
        } else if (group != null && group.length > 3) {
            $.fn.message({type: "error", msg: "选择分组个数应在1-3个"});
        } else {
            $.fn.message({type: "error", msg: "您尚未选择任何分组"});

        }

    };
    var chooseTemplateCheck = function (obj) {
        var idsAndFreight = {};
        var ids = $("#ids").val();
        var templateId = $(obj).closest('.modal-content').find('option:selected').attr('cid');
        idsAndFreight[ids] = templateId;
        if (!$.isEmptyObject(idsAndFreight)) {
            var data = {
                idsAndFreight: JSON.stringify(idsAndFreight),
                field: 'freightTemplate'
            }
            $('#proFreTemplate').modal("hide");
            goOnline(data);
        } else {
            $.fn.message({type: "error", msg: "请选择模板！"});
        }

    };
    //保存批量改服务模板
    var choosePromiseTemplateCheck = function (obj) {
        var idsAndPromised = {};
        var ids = $("#service_ids").val();//商品id
        var templateId = $(obj).closest('.modal-content').find('option:selected').attr('cid');//服务模板ID
        idsAndPromised[ids] = templateId;
        if (!$.isEmptyObject(idsAndPromised)) {
            var data = {
                idsAndFreight: JSON.stringify(idsAndPromised),
                field: 'promisedTemplate'
            }
            $('#updateServiceTemplate').modal("hide");
            goOnline(data);
        } else {
            $.fn.message({type: "error", msg: "请选择模板！"});
        }

    };
    //保存批量区间价格
    var modifyBetweenPrice = function (obj) {
        var aeopNationalQuoteConfiguration = getNationalPriceData();
        if (aeopNationalQuoteConfiguration == -1) {
            return;
        }
        var idsAndPromised = {};
        var ids = $("#priceIds").val();//商品id
        idsAndPromised[ids] = aeopNationalQuoteConfiguration;
        if (!$.isEmptyObject(idsAndPromised) && aeopNationalQuoteConfiguration != "{}") {
            var data = {
                idsAndFreight: JSON.stringify(idsAndPromised),
                field: 'price'
            }
            $('#updateBetweenPrice').modal("hide");
            goOnline(data);
        } else {
            $.fn.message({type: "error", msg: "请选择运送区域调价或重新输入调价"});
        }

    };
    var syncProductFreights = function () {
        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            //$.fn.message({type:"error",msg:"请先选择店铺！"});
            return;
        }
        //
        $.ajax({
            type: 'POST',
            async: false,
            url: 'smtShopInfoSync/freightList.json',
            data: {
                shopId: shopId
            },
            dataType: 'json',
            success: function (data) {
				var freightTemplateList = data.freightTemplateList;

				if(!+data.code && freightTemplateList) {
					$('#proFreTemplate').find('span[uid="getFreightTemplateBox"]').html(getFreightTemplate(freightTemplateList));
					$.fn.message({type: 'success', msg: '同步运费模板成功!'});
				} else {
					$.fn.message({type: 'error', msg: data.msg ? data.msg : '同步运费模板失败!'});
				}
            }
        });
    };
    //同步服务模板列表
    var syncProductServices = function () {
        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            //$.fn.message({type:"error",msg:"请先选择店铺！"});
            return;
        }
        //
        $.ajax({
            type: 'POST',
            async: false,
            url: 'smtShopInfoSync/promiseList.json',
            data: {
                shopId: shopId
            },
            dataType: 'json',
            success: function (data) {
				if(!+data.code && data.promiseTemplateList) {
					var promiseTemplateList = data.promiseTemplateList;

					$('#updateServiceTemplate').find('span[uid="getServiceTemplateBox"]').html(getServiceTemplate(promiseTemplateList));
					$.fn.message({type: 'success', msg: '同步服务模板成功!'});
				} else {
					$.fn.message({type: 'error', msg: data.msg ? data.msg : '同步服务模板失败!'});
				}
            }
        });
    };
    var batchUpdateDeliveryTime = function (ids, deleveryTimes) {
        $("#deliveryTimeEdit").modal();
        $("#delivIds").val(ids);
        $("#delivTimes").val(deleveryTimes);
    };

    $('#deliveryRadio1').click(function () {
        $("#deliveryInputNum2").attr('disabled', true);
        $('#deliveryRadio2').attr("checked", false);

        $("#deliveryInputNum1").attr('disabled', false);
    });

    $('#deliveryRadio2').click(function () {
        $("#deliveryInputNum1").attr('disabled', true);
        $('#deliveryRadio1').attr("checked", false);

        $("#deliveryInputNum2").attr('disabled', false);
    });

    var batchUpdateSubjects = function (ids, sub) {
        var footHtml = '<button type="button" class="btn btn-primary editSubject" data-names="editSubject" onclick="submitBatchEdit(this)" >确定</button>';
        footHtml += '<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>';
        $('#smtBatchEdit').find('#myModalLabel').html('修改标题');
        $('#smtBatchEdit').find('.modal-dialog').css('width', '500px');
        var str = '<form class="doNotSubmit"><div>' +
            '<div style="width:25%" class="pull-left text-right p10">标题开头添加</div>' +
            '<div style="width:55%" class="pull-left"><input type="text" id="titStart"  class="form-control titStart"></div>' +
            '</div>' +
            '<div style="clear:both;">' +
            '<div style="width:25%" class="pull-left text-right p10 mTop10">标题结尾添加</div>' +
            '<div style="width:55%" class="pull-left mTop10"><input type="text" id="titEnd"  class="form-control titEnd"></div>' +
            '</div>' +
            '<div style="clear:both;">' +
            '<div style="width:25%" class="pull-left text-right p10 mTop10">标题中的</div>' +
            '<div style="width:25%" class="pull-left mTop10"><input type="text" id="titCenterA"  class="form-control titCenterA"></div>' +
            '<div style="width:15%" class="pull-left text-right p10 mTop10">替换为</div>' +
            '<div style="width:25%" class="pull-left mTop10"><input type="text" id="titCenterB"  class="form-control titCenterB"></div>' +
            '<div><input type="hidden" id="ids"/><input type="hidden" id="subStr"/></div>' +
            '</div></form>';
        $('#smtBatchEdit').find('.modal-footer').html(footHtml);
        $('#smtBatchEdit').find('.modal-body').html(str);
        $("#ids").val(ids);
        $("#subStr").val(sub);
        $('#smtBatchEdit').modal("show");
    };
    var submitBatchEdit = function (e) {
        var dxmState = $("#dxmState").val();
        var v = $(e).attr("data-names");
        if (v != "") {
            var ops = $("#ops").val();
            if (v == "editSubject" || ops == 2) {
                $("#smtBatchEdit").modal('hide');
                var titStart = $("#titStart").val(),
                    titEnd = $("#titEnd").val(),
                    titCenterA = $("#titCenterA").val(),
                    titCenterRef = new RegExp(titCenterA, 'gi'),
                    titCenterB = $("#titCenterB").val(),
                    idStr = $("#ids").val(),
                    subStr = $("#subStr").val();
                if (titCenterB != null && titCenterB != "") {
                    if (titCenterA == null || titCenterA == "") {
                        $.fn.message({type: "error", msg: "请输入需替换的内容"});
                        return;
                    }
                }
                if (textCh(titStart)) {
                    $.fn.message({type: "error", msg: "对不起，您填写的标题中含有中文字符"});
                    return;
                } else if (textCh(titEnd)) {
                    $.fn.message({type: "error", msg: "对不起，您填写的标题中含有中文字符"});
                    return;
                } else if (textCh(titCenterA)) {
                    $.fn.message({type: "error", msg: "对不起，您填写的标题中含有中文字符"});
                    return;
                } else if (textCh(titCenterB)) {
                    $.fn.message({type: "error", msg: "对不起，您填写的标题中含有中文字符"});
                    return;
                }
                var subs = subStr.split("&-&");
                if (subs != null && subs.length > 0) {
                    for (var i = 0; i < subs.length; i++) {
                        subs[i] = titStart + subs[i] + titEnd;
                        subs[i] = subs[i].replace(titCenterRef, titCenterB);
                    }
                    var subjects = subs.join("&-&")
                    var data = {
                        idStr: idStr,
                        subjects: subjects,
                        status: dxmState,
                        field: 'subject'
                    }
                    if ($.trim(ops) == 2 || dxmState != "online") {
                        $("#ops").val("");
                        goOnline(data);
                        return;
                    }
                    $('#loading').modal('show');
                    //判断违禁词
                    $.ajax({
                        type: 'POST',
                        url: "smtProduct/checkBatchEditSub.json",
                        data: data,
                        dataType: 'json',
                        timeout: 60000,
                        success: function (check) {
                            $('#loading').modal('hide');
                            var failList = check.failList;
                            if (failList.length > 0) {
                                var failDetail = "";
                                for (var i = 0; i < failList.length; i++) {
                                    var obj = failList[i];
                                    if (obj.id == null || obj.id == "") {
                                        failDetail = failDetail + "失败原因:<span class=\"fRed\">" + obj.msg + "</span><br/>";
                                    } else {
                                        failDetail = failDetail + "产品标题:" + obj.msg + "<br/>";
                                    }
                                }
                                $("#saveErrorMsg").html(failDetail + "是否继续保存并发布？");
                                $("#toOnline").bind("click ", function () {
                                    $("#ops").val(2);
                                    $("#confirmDelivery").modal("hide");
                                    submitBatchEdit();
                                });
                                $("#confirmDelivery").modal("show");
                                return;
                            }
                            goOnline(data)
                        },
                        error: function () {
                            $('#loading').modal('hide');
                            $.fn.message({type: "error", msg: "网络请求超时, 请稍后再试！"});
                        }
                    });
                }
            } else if (v == "deliveryTime") {
                var ids = $("#delivIds").val();
                var deTimes = $("#delivTimes").val();
                var deTimesArray = deTimes.split("&-&");
                var obj = $(e).closest('.modal-content').find('input[type=radio]:checked');
                var type = $(obj).attr('data-val');
                if (type == '1') {
                    var num = $.trim($("#deliveryInputNum1").val());
                    if (num == '') {
                        num = '0';
                    }
                    var flag = true;
                    for (var i = 0; i < deTimesArray.length; i++) {
                        var numLast = parseInt(num) + parseInt(deTimesArray[i]);
                    }
                    if (flag) {
                        var deliTimeNum = [];
                        for (var i = 0; i < deTimesArray.length; i++) {
                            deTimesArray[i] = parseInt(num) + parseInt(deTimesArray[i]);
                        }
                        var deTime1 = deTimesArray.join("&-&");
                        var data = {
                            idStr: ids,
                            deliveryTime: deTime1,
                            field: 'deliveryTime'
                        }
                        $("#deliveryTimeEdit").modal("hide");
                        goOnline(data);
                    }
                } else if (type == '2') {
                    var num2 = $.trim($("#deliveryInputNum2").val());
                    if (!num2) {
                        $.fn.message({type: "error", msg: "请填写数量哦~"});
                    } else {
                        for (var t = 0; t < deTimesArray.length; t++) {
                            deTimesArray[t] = num2;
                        }
                        var deTime2 = deTimesArray.join("&-&");
                        var data = {
                            idStr: ids,
                            deliveryTime: deTime2,
                            field: 'deliveryTime'
                        }
                        $("#deliveryTimeEdit").modal("hide");
                        goOnline(data);
                    }
                }
            }
        }
    };

    var syncProductGroups = function () {
        //设置店铺分组
        var groupIds = getGroupChecks();
        if ($.trim(groupIds) == "") {
            groupIds = "";
        }

        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            $.fn.message({type: "error", msg: "请选择速卖通店铺!"});
            return;
        }
        $.ajax({
            type: 'GET',
            url: 'smtShopInfoSync/syncProductGroupNoAll.json',
            data: {
                shopId: shopId
            },
            dataType: 'json',
            success: function (data) {
				//选择产品分组
				if(!+data.code && data.data){
					var proGroupList = eval(data);

					setProductGroups(proGroupList, groupIds);
					$.fn.message({type: 'success', msg: '同步产品分组成功!'});
				}else{
					$.fn.message({type: 'error', msg: data.msg ? data.msg : '同步产品分组失败!'});
				}
            }
        });
    };
    //选择产品分组
    var setProductGroups = function (productGroupLists, pushStr) {
        if (productGroupLists != undefined) {
            arr = productGroupLists;
            $.fn.myj_tree.chooseTreeInit('treeB', arr, sitt, pushStr, 0);
        }
    };
    var getGroupChecks = function () {
        var groups = $.fn.myj_tree.chooseTreeCheckGet('treeB');
        var groupIds = "";
        if (groups != null && groups.length > 0) {
            for (var i = 0; i < groups.length; i++) {
                if (i > 0) {
                    groupIds += ",";
                }
                groupIds += groups[i].groupId;
            }
        }
        return groupIds;
    };
    // 给批量下拉动作绑定改变事件
    var batchAction = function (e) {
        var v = $(e).attr('data');
        if (v) {
            // 得到被选中的值,如果没有选中，给出提示
            var box = [],
                $checkProductBox = $('input[name="productBox"]:checked'),
				newObj = {
                	selectedClassify: $checkProductBox.length,
					unselectedClassify: 0
            	};

            $checkProductBox.each(function () {
                if (+$(this).closest('tr').attr('data-cid') == '') {
                    newObj['unselectedClassify'] += 1;
                }
                box.push($(this).val());
            });
            if (!box.length) {
                $.fn.message({type: 'error', msg: '请至少选择一个产品'});
                return;
            }
            var boxStr = box.join(',');
            $('#productIds').val(boxStr);
            if (v === 'batchDelete') {
                batchDelete(boxStr);
            } else if (v === 'batchMoveToNoPublish') {
                batchMoveToNoPublish(boxStr);
            } else if (v === 'batchEdit') {
                var productIdData = {
                    	shopId: $('#shopId').val(),
						ids: boxStr,
						platform: $('#platformName').val()
					},
                    state = $('#dxmState').val();
                if (state === 'draft') {
                    if (!newObj['unselectedClassify']) {
                        comOpenWinPost('https://www.dianxiaomi.com/smtProduct/batchEdit.htm', productIdData);
                        return;
                    }
                    $('#selectedClassify').html(newObj['selectedClassify']);
                    $('#unselectedClassify').html(newObj['unselectedClassify']);
                    $('.batchProductEditClassify').removeClass('hide');
                    $('.productEditClassify').addClass('hide');
                    $('#batchClassifyMatchingCategoryModal').modal('show').find('#correspondingClassify').html(JSON.stringify(productIdData));
                } else {
                    comOpenWinPost('https://www.dianxiaomi.com/smtProduct/batchEdit.htm', productIdData);
                }
            } else if (v === 'batchPublish') {
                asyncBatchCheckSmt(boxStr);
            } else if (v === 'batchOffline') {
                batchOffline(boxStr);
            } else if (v === 'batchOnline') {
                batchOnline(boxStr);
            } else if (v === 'batchMarketing') {
                batchMarketing(boxStr, 0);
            } else if (v === 'batchAttribute') {
                showCategoryModule(boxStr);
            } else if (v === 'batchAttributeBrand') {
                showCategoryBrandModule(boxStr);
            } else if (v == 'batchTimingPublish') {
                batchCheckPublish(boxStr);
            } else if (v == 'batchCancelPublish') {
                batchUnPublish(boxStr);
            } else if(v == 'batchAddListWaterMark'){
                //初始化水印模板
                getWaterMarkTemplate();
                $('#platformName').val('smt');
                $('#saveProductIds').val(boxStr);
                $('#batchAddWaterMarkModal').modal('show');
			} else if(v == 'batchAddMarketWaterMark'){ //速卖通营销水印
                MARKET_WATERMARK.watermarkModalShow('batch');
			}
        }
    };

    // 初始化批量操作下拉动作
    function initBatchAction() {
        $('#batchAction').val('');
    }

    /**删除产品**/
    var delProduct = function (id, dxmState) {
		var contentStr = '';
		if($.trim($('#dxmState').val()) === 'online') {//在线产品删除时添加说明提示
			contentStr = '<div><span class="fWhite p-left10 bgColorJ p-right5 v-top">说明！</span>' +
					'<div class="inline-block m-left5">' +
					'<div class="fColor2">删除仅代表该产品在【店小秘】删除，店铺后台仍然存在，</div>' +
					'<div class="fColor2">如果想在店铺后台删除，您在小秘系统删除之后请继续到店铺后台点击删除</div></div>' +
					'</div><div class="m-top10 f-w600">您确定要在店小秘删除吗？</div>';
		} else {
			contentStr = '<div class="m-top10 f-w600">您确定要在店小秘删除吗？</div>';
		}
        myjAlert.confirm({
            content: contentStr,
            typeModal: 'newModal',
            modalWidth: 550,
            callback: function(v){
                if (v) {
                    $('#loading').modal('show');
                    $.ajax({
                        type: 'GET',
                        url: gitWinLocHref() + 'smtProduct/delete.json',
                        data: {
                            id: id,
                            shopId: $('#shopId').val()
                        },
                        dataType: 'json',
                        success: function (data) {
                            $('#loading').modal('hide');
                            if (!+data.code) {
                                if (dxmState === 'online') {
                                    $.fn.message({type: 'success', msg: '产品从店小秘删除成功'});
                                } else {
                                    $.fn.message({type: 'success', msg: '删除成功'});
                                }
                                // 更新一下列表
                                var pageNo = $('#pageNo').val(),
                                    pageSize = $('#pageSize').val(),
                                    url = 'smtProduct/pageList.htm';
                                reloadPage(url, pageNo, pageSize);
                            } else {
                                $.fn.message({type: 'error', msg: data.msg});
                            }
                        }
                    });
                }
            }
        });
    };
    /**发布**/
    var pushSmtProduct = function (id) {
        $('#loading').modal('show');
        $.get(
            "smtProduct/pushSmtProduct.json",
            {
                id: id,
                shopId: $("#shopId").val()
            },
            function (data) {
                $('#loading').modal('hide');
                if (data.code == 0) {
                    $.fn.message({type: "success", msg: "已放入发布队列"});
                } else {
                    $.fn.message({type: "error", msg: data.msg});
                }
            }
        ).error(function (err) {
            $('#loading').modal('hide');
            $.fn.message({type: "error", msg: "网络请求超时， 请稍后重试!"});
        });
    };
    /*
    * 以下两个（检验违禁词）方法已经废弃 2020/2/28
    * */
    //检验违禁词,继续开启批量定时发布操作
    var continueOperation = function () {
        $("#publicTimingCheckModal").modal("hide");
        $("#batchTimingPublishModal").modal("show");
    };
    //检验违禁词,继续开启单个产品定时发布操作
    var singleOperation = function () {
        $("#singleTimingCheckModal").modal("hide");
        $("#timingPublishModal").modal("show");
    };
    //立即发布违禁词检验
    var batchPublish = function (boxStr, sureSubmit) {
        if ($.trim(sureSubmit) != "") {
            gotoOnline(boxStr);
            return;
        }
        $("#progressBar").css("width", "0%");
        $("#batchCheckModal_status").html("检测中...");
        $("#batchCheckModal_processDetail").html("");
        $("#batchCheckModal button[name='confirmPublish']").addClass("myj-hide").val("");
        $("#batchCheckModal").modal("show");
        //判断违禁词
        $.ajax({
            type: 'POST',
            url: "https://www.dianxiaomi.com/smtProduct/checkList.json",
            data: {ids: boxStr, shopId: $("#shopId").val()},
            dataType: 'json',
            success: function (check) {
                var p = 0;		// 记录进度条的值
                var uuid = check.uuid;
                checkProcessStatus(uuid, function (data) {
                    var num = data.num % 100;
                    var status = "检测中...";

                    if (num < p && data.code != 1) {
                        // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                        $("#progressBar").css("display", "none");
                        setTimeout(function () {
                            $("#progressBar").css("display", "");
                        }, 1000);
                    }
                    p = num;
                    if (data.code == 0) {
                        $("#progressBar").css("width", num + "%");
                    } else if (data.code == -1) {
                        status = "仿品检测已完成，无法完成发布原因如下：";
                        $("#progressBar").css("width", "100%");
                        $("#progressBar").removeClass("active");

                    } else if (data.code == 1) {
                        if (data.msg == "") {
                            status = "仿品检测已完成，即将开始发布。";
                            setTimeout(function () {
                                gotoOnline(boxStr);
                            }, 2000);
                        } else {
                            status = "仿品检测完成。存在侵权产品，是否继续发布？";
                            $("#batchCheckModal button[name='confirmPublish']").removeClass("myj-hide").val(boxStr);
                        }
                        $("#progressBar").css("width", "100%");
                        $("#progressBar").removeClass("active");
                    }
                    $("#batchCheckModal_status").html(status);
                    $("#batchCheckModal_processDetail").html(data.msg);
                });
            }
        });
    };
    var asyncBatchPublish = function (boxStr, failBoxStr, sureSubmit) {
        var ids = "";
        if (failBoxStr != null && failBoxStr != "") {
            ids = boxStr + "," + failBoxStr;
        } else {
            ids = boxStr;
        }
        if ($.trim(sureSubmit) != "") {
            asyncGotoOnline(ids);
            return;
        }
        $("#progressBar").css("width", "0%");
        $("#batchCheckModal_status").html("检测中...");
        $("#batchCheckModal_processDetail").html("");
        $("#batchCheckModal button[name='confirmPublish']").addClass("myj-hide").val("");
        $("#batchCheckModal").modal("show");
        //判断违禁词
        $.ajax({
            type: 'POST',
            url: "https://www.dianxiaomi.com/smtProduct/checkList.json",
            data: {
                ids: boxStr,
                shopId: $("#shopId").val()
            },
            dataType: 'json',
            success: function (check) {
                var p = 0;		// 记录进度条的值
                var uuid = check.uuid;
                checkProcessStatus(uuid, function (data) {
                    var num = data.num % 100;
                    var status = "检测中...";
                    if (num < p && data.code != 1) {
                        // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                        $("#progressBar").css("display", "none");
                        setTimeout(function () {
                            $("#progressBar").css("display", "");
                        }, 1000);
                    }
                    p = num;
                    if (data.code == 0) {
                        $("#progressBar").css("width", num + "%");
                    } else if (data.code == -1) {
                        status = "已完成，无法完成发布原因如下：";
                        $("#progressBar").css("width", "100%");
                        $("#progressBar").removeClass("active");

                    } else if (data.code == 1) {
                        if (data.msg == "") {
                            status = "已完成，即将开始发布。";
                            setTimeout(function () {
                                asyncGotoOnline(ids);
                            }, 2000);
                        } else {
                            status = "检测完成。存在侵权产品，是否继续发布？";
                            $("#batchCheckModal button[name='confirmPublish']").removeClass("myj-hide").val(boxStr);
                        }
                        $("#progressBar").css("width", "100%");
                        $("#progressBar").removeClass("active");
                    }
                    $("#batchCheckModal_status").html(status);
                    $("#batchCheckModal_processDetail").html(data.msg);
                });
            }
        });
    };
    var asyncBatchCheckSmt = function (boxStr) {
        $.ajax({
            type: "post",
            url: "smtProduct/batchAsyncSmtProduct.json",
            data: {
                ids: boxStr
            },
            dataType: "json",
            success: function (data) {
                var successList = data.successList;
                var failList = data.failList;
                var successNum = successList.length;
                var failNum = failList.length;
                if (failList.length > 0 && successList.length == 0) {
                    asyncbatchReturnProcess(successList, failList, successNum, failNum);
                } else {
                    var ids = [];
                    var fail = [];
                    var boxStr = "";
                    var failBoxStr = "";
                    //检测成功的id
                    $.each(successList, function (index) {
                        var obj = successList[index];
                        ids.push(obj.id);
                    });
                    //检测失败的id
                    boxStr = ids.join(",");
                    $.each(failList, function (index) {
                        var obj = failList[index];
                        fail.push(obj.id);
                    });
                    failBoxStr = fail.join(",");
                    asyncBatchPublish(boxStr, failBoxStr);
                }
            }
        });
    };
    var asyncCheckSmtProduct = function (boxStr) {
        $.ajax({
            type: "post",
            url: "smtProduct/checkSmtProduct.json",
            data: {
                id: boxStr
            },
            dataType: "json",
            success: function (data) {
                if (data.code == 0) {
                    batchPublish(boxStr);
                } else {
                    $.fn.message({type: "error", msg: data.msg});
                }
            }
        });
    };

    //批量立即发布的提交请求
    var asyncGotoOnline = function (boxStr) {
        $("#batchCheckModal").modal("hide");
		var dataObj = {
			submitType: 'batch',
			datas: {
				ids: boxStr,
				shopId: $("#shopId").val()
			}
		};
		//检测
		detection(dataObj, 'new');
    };
    //单个立即发布的提交请求
    var gotoOnline = function (boxStr) {
        $("#batchCheckModal").modal("hide");

		var dataObj = {
			submitType: 'single',
			datas: {
				ids: boxStr,
				shopId: $("#shopId").val()
			}
		};
		//检测
		detection(dataObj, 'new');
    };

    /*
    * 数据提交
    * dataObj包含了当前编辑需要保存的数据,以及如果需要其他字段则还包含其他参数字段
    * */
	var smtListSubmitDataAjaxSingleAndBatch = function (dataObj) {
		$('#loading').modal('show');
		$.post('smtProduct/batchPublish.json', dataObj.datas,
			function (data) {
				var successList = data.successList;
				var failList = data.failList;
				var failNum = failList.length;

				if(dataObj.submitType === 'batch'){
					asyncbatchReturnProcess(successList, failList, successList.length, failNum);
				}else{
					batchReturnProcess(successList, failList, successList.length > 0 ? "您的产品已提交发布，请在「在线产品」、「发布中」或「发布失败」页面查看！" : "0", failNum);
				}
				var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(), url = "smtProduct/pageList.htm";
				reloadPage(url, pageNo, pageSize);
				// 草稿箱刷新左侧数字显示
			}
		);
	};

	/*
	* 刊登检测
	*
	* */
	var detectionTypeObj = {
		priceDetection: false, //价格检测
		bannedWordDetection: false //违禁词检测
	};

	//获取检测项目
	var getDetectionItem = function(){
		var item = null;

		$.each(detectionTypeObj, function(i, j){
			if(j === false && item === null) item = i;
		});

		return item;
	};

	//检测
	var detection = function(data, type){
		//项目状态初始化
		if(type === 'new'){
			$.each(detectionTypeObj, function(i, j){
				if(j === true) detectionTypeObj[i] = false;
			});
		}

		//项目执行完成状态处理
		if(type && type !== 'new') detectionTypeObj[type] = true;

		//获取检测项目
		var item = getDetectionItem(),
			datas = data.datas,
			productIds = datas.ids,
			productIdArr = productIds ? productIds.split(',') : [],
			dataObj = {};

		if(item !== null){ //执行检测项目
			switch (item) {
				case 'priceDetection':
					/*
                    * 价格检测
                    * */
					dataObj = {
						platform: 'smt',
						position: 'listRelease', //列表页发布
						saveData: data,
						dxmState: 'offLine',
						detectionData: {
							ids: productIdArr.join('&-&')
						},
						detectionUrl: 'priceDetection/smtBatchProtectPriceDetection.json',
						callback: detection
					};
					PRICE_DETECTION_APPLY.priceDetectionEntrance(dataObj); //价格检测
					break;
				case 'bannedWordDetection':
					/*验证违禁词传过去的dataObj的格式确定为
					* dataObj= {
					*   saveData:{datas:{}, ...} 发布需要的数据,datas保存的是需要提交的参数,datas里面只保存提交需要的参数，其他的字段则根据抽出去的ajax请求方法还用到哪些字段进行单独添加
					*   detectionData:{platform:'dh', ...} 验证违禁词需要的数据，列表页发布和编辑页发布不一样的就是这里的字段固定为平台和要检测的产品id
					*   callback:function 验证违禁词完成之后的回调函数，回调的是提交发布方法，如果没有违禁词时直接走回调，或者是有违禁词，显示的弹层中用户点了跳过时回调
					* }*/
					dataObj = {
						saveData: data,
						detectionData: { //检测违禁词用到的数据,列表页发布需要的参数固定为平台和产品id
							platform: 'smt',
							productIds: productIds
						},
						callback: detection //提交发布
					};
					bannedWordProDet.setListSaveDataObj(dataObj, 'smt'); //检测违禁词
					break;
			}
		}else{ //执行结束
			smtListSubmitDataAjaxSingleAndBatch(data);
		}
	};

    var batchOffline = function (boxStr) {
        myjAlert.confirm({
            'content': '您确认要下架吗？',
            'callback': function (v) {
                if (v) {
                    $('#loading').modal('show');
                    $.post(
                        "smtProduct/batchOffline.json",
                        {
                            ids: boxStr
                        },
                        function (data) {
                            var successList = data.successList;
                            var failList = data.failList;
                            var successNum = successList.length;
                            var errorNum = failList.length;
                            batchReturnProcess(successList, failList, successNum + "个, 产品已成功下架", errorNum);

                            var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(),
                                url = "smtProduct/pageList.htm";
                            reloadPage(url, pageNo, pageSize);
                        }
                    );
                }
            }
        })
    };
    // 批量返回信息处理
    var asyncbatchReturnProcess = function (successList, failList, successNum, failNum) {
        $('#loading').modal('hide');
        $("#operateFailDetailDiv").css("display", "none");	// 默认不显示，有错误的时侯再显示
        var failDetail = "";
        if (failList.length > 0) {
            for (var i = 0; i < failList.length; i++) {
                var obj = failList[i];
                if (obj.id == null || obj.id == "") {
                    failDetail = failDetail + "失败原因:" + obj.msg + "<br/>";
                } else {
                    //failDetail = failDetail +"产品:" + obj.id + "&emsp;&emsp;  失败原因:"+ obj.msg + "<br/>";
                    failDetail = failDetail + "产品ID:&emsp; " + "<a target='_blank' href='smtProduct/edit.htm?id=" + obj.id + "'>" + obj.id + "</a>" + "&emsp; 失败原因: " + obj.msg + "<br/>";
                }
            }
            $("#operateFailDetailDiv").css("display", "");
        }
        if (successNum == undefined) {
            $("#operateSuccessNum").html(successList.length);
        } else {
            $("#operateSuccessNum").html(successNum);
        }
        if (failNum == undefined) {
            $("#operateFailNum").html(failList.length);
        } else {
            $("#operateFailNum").html(failNum);
        }
        $("#operateFailDetail").html(failDetail);

        $("#batchOperateRetModal").modal("show");
    };

    // 批量返回定时发布信息处理--改动的
    var checkbatchReturnProcess = function (successList, failList, successNum, failNum) {
        $('#loading').modal('hide');
        $("#operateFailDetailDiv").css("display", "none");	// 默认不显示，有错误的时侯再显示
        var failDetail = "";
        if (failList.length > 0) {
            for (var i = 0; i < failList.length; i++) {
                var obj = failList[i];
                if (obj.id == null || obj.id == "") {
                    failDetail = failDetail + "失败原因:" + obj.msg + "<br/>";
                } else {
                    if (obj.msg != null || obj.msg != "") {
                        failDetail = failDetail + "ID:&emsp; " + "<a target='_blank' href='smtProduct/edit.htm?id=" + obj.id + "'>" + obj.id + "</a>" + "&emsp;  " + obj.msg + "<br/>";
                    }
                }
            }
            $("#operateFailDetailDiv").css("display", "");
        }
        if (successNum == undefined) {
            $("#operateSuccessNum").html(successList.length);
        } else {
            if (successNum > 0) {
                $("#operateSuccessNum").html(successNum + "&emsp; 您的产品已提交发布，请在「定时发布」页面查看！");
            } else {
                $("#operateSuccessNum").html(successNum);
            }
        }
        if (failNum == undefined) {
            $("#operateFailNum").html(failList.length);
        } else {
            $("#operateFailNum").html(failNum);
        }
        $("#operateFailDetail").html(failDetail);

        $("#batchOperateRetModal").modal("show");
    };

    var batchOnline = function (boxStr) {
        myjAlert.confirm({
            'content': '您确认要上架吗？',
            'callback': function (v) {
                if (v) {
                    $('#loading').modal('show');
                    $.post(
                        "smtProduct/batchOnline.json",
                        {
                            ids: boxStr
                        },
                        function (data) {
                            var successList = data.successList;
                            var failList = data.failList;
                            var successNum = successList.length;
                            var errorNum = failList.length;
                            batchReturnProcess(successList, failList, successNum + "个, 产品已成功上架", errorNum);

                            var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(),
                                url = "smtProduct/pageList.htm";
                            reloadPage(url, pageNo, pageSize);
                        }
                    );
                }
            }
        })
    };
    var batchMarketing = function (boxStr, type) {
        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            $.fn.message({type: "error", msg: "请选择速卖通店铺！"});
        } else {
            downloadDxmModuleList(type);
        }
    };
    var usedMarketingModule = function () {
        //获取选中的产品
        var box = [];
        $("input[name='productBox']:checked").each(function () {
            box.push($(this).val());
        });
        if (box.length == 0) {
            $.fn.message({type: "error", msg: "请至少选择一个产品"});
            return;
        }
        var boxStr = box.join(",");
        //获取插入详情头部和尾部
        var type = $("input[name='marketType']:checked").val();
        //获取需要插入的模块
        var boxIds = $("#dxmModuleListDiv").val();
        if ($.trim(boxIds) == "") {
            $.fn.message({type: "error", msg: "请至少选择一个模块"});
            return;
        }
        $('#batchInsertModule').modal('hide');
        $('#batchUpdateModal').modal('show');
        $.post(
            "smtProduct/usedMarketingModule.json",
            {
                ids: boxStr,
                mIds: boxIds,
                type: type
            },
            function (data) {
                var p = 0;		// 记录进度条的值
                var uuid = data.uuid;
                checkProcessStatus(uuid, function (data) {
                    var num = data.num % 100;
                    var status = "插入中...";
                    if (num < p && data.code != 1) {
                        // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                        $("#batchUpdateProgressBar").css("display", "none");
                        setTimeout(function () {
                            $("#batchUpdateProgressBar").css("display", "");
                        }, 1000);
                    }
                    p = num;
                    if (data.code == 0) {
                        $("#batchUpdateProgressBar").css("width", num + "%");
                    } else {
                        status = "插入完成!";
                        $("#batchUpdateProgressBar").css("width", "100%");
                        $("#batchUpdateProgressBar").removeClass("active");
                    }
                    $("#batchUpdateModal_status").html(status);
                    $("#batchUpdateModal_processDetail").html(data.msg);
                });
            }
        );
    };
    // 批量修改后关闭按钮的动作处理
    var closeBatchModal = function () {
        $("#batchUpdateModal").modal("hide");
        var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(), url = "smtProduct/pageList.htm";
        reloadPage(url, pageNo, pageSize);
    };

    //店小秘模板
    var downloadDxmModuleList = function (type) {
        var shopId = $("#shopId").val();
        if ($.trim(shopId) == "") {
            return;
        }
        $('#loading').modal('show');
        $.ajax({
            type: 'POST',
            async: false,
            url: 'smtShopInfoSync/dxmModuleArray.json',
            data: {
                shopId: shopId
            },
            dataType: 'json',
            success: function (data) {
                $('#loading').modal('hide');
                var dxmModuleListDiv = "";
                var dxmModuleList = data.dxmModuleList;
                var id = $("#dxmModuleListDiv").val();

                if (dxmModuleList != undefined) {
                    dxmModuleListDiv = '<option value="">-- 请选择店小秘营销模板 --</option>';
                    for (var i = 0; i < dxmModuleList.length; i++) {
                        var mobule = dxmModuleList[i];
                        dxmModuleListDiv += '<option value="' + mobule.idStr + '" data-type="' + mobule.marketType + '">' + mobule.name + '</option>';
                    }
                    $("#dxmModuleListDiv").html(dxmModuleListDiv);
                    if (1 == type) {
                        $("#dxmModuleListDiv").val(id);
                        $.fn.message({type: "success", msg: "同步店小秘关联营销成功!"});
                    }
                    $("#batchInsertModule").modal('show');
                } else {
                    if (1 == type) {
                        $.fn.message({type: "error", msg: "同步店小秘关联营销失败!"});
                    }
                }
            }
        });
    };

    var selectDxmModule = function () {
        var type = $("#dxmModuleListDiv").find("option:selected").attr("data-type");
        if (type == 0) {
            $("#marketTypeSpan").html("自定义模块");
        } else {
            $("#marketTypeSpan").html("关联产品模块");
        }
    };
    //右侧内容li切换
    $('.liBtn').click(function () {
        $('.ulBtn li').each(function () {
            $(this).removeClass('liFoucs');
        });
        $(this).addClass('liFoucs');//点击后背景
        var dxmState = $('#dxmState').val();
        var name = $(this).attr("name");
        if ($.trim(dxmState) == 'online') {
            $("#productStatusType").val(name);
        } else {
            $("#dxmOfflineState").val(name);
        }
        var url = "smtProduct/pageList.htm";
        var searchValue = $.trim($('#searchValue').val()).replace(/%/g,'\\%').replace(/_/g,'\\_'),
            deliveryTimeLift = $.trim($('#deliveryTimeLift').val()),
            deliveryTimeRight = $.trim($('#deliveryTimeRight').val()),
            grossWeightLift = $.trim($('#grossWeightLift').val()),
            grossWeightRight = $.trim($('#grossWeightRight').val()),
            productCategory = $('#productCategory').val(),
            freightTemplateId = $('#freightTemplateId').val(),
            timeLift = $.trim($('#timeLift').val()),
            timeRight = $.trim($('#timeRight').val()),
            shelvesKinds = $('#shelvesKinds').val(),
			motorState = $('#motorState').val(),
            advancedTime = $('#advancedTime').val(),
        	sourceUrl = $.trim($('#sourceUrl').val()).replace(/%/g,'\\%').replace(/_/g,'\\_');
        if (timeLift != '' || timeRight != '') {
            if (timeLift == '') {
                $.fn.message({type: "error", msg: "起始日期不能为空！"});
                return;
            } else if (timeRight == '') {
                $.fn.message({type: "error", msg: "结束日期不能为空！"});
                return;
            }
        }
        if (timeLift != '' && timeRight != '') {
            var value = compareDate(timeLift, timeRight);
            if (value == 1) {
                $.fn.message({type: "error", msg: "结束时间必须大于等于开始时间!"});
                return;
            }
        }
        if (deliveryTimeLift != '' && deliveryTimeRight != '') {
            if (parseInt(deliveryTimeLift) > parseInt(deliveryTimeRight)) {
                $.fn.message({type: "error", msg: "最大发货期必需大于等于最小发货期！"});
                return;
            }
        }
        if (grossWeightLift != '' && grossWeightRight != '') {
            if (parseInt(grossWeightLift) > parseInt(grossWeightRight)) {
                $.fn.message({type: "error", msg: "最大包装后重量必需大于等于最小包装后重量！"});
                return;
            }
        }
        $('#loading').modal('show');
        $.post(
            url,
            {
                pageSize: $('#pageSize').val(),
                shopId: $('#shopId').val(),
                groupId: $('#groupId').val(),
                productStatusType: $('#productStatusType').val(),
                dxmState: dxmState,
                dxmOfflineState: $('#dxmOfflineState').val(),
                searchType: $('#searchType').val(),
                searchValue: searchValue,
                sortName: $('#sortName').val(),
                sortValue: $('#sortValue').val(),
                advancedSearch: $('#advancedSearch').val(),
                deliveryTimeLift: deliveryTimeLift,
                deliveryTimeRight: deliveryTimeRight,
                grossWeightLift: grossWeightLift,
                grossWeightRight: grossWeightRight,
                productCategory: productCategory,
                freightTemplateId: freightTemplateId,
                timeLift: timeLift,
                timeRight: timeRight,
                shelvesKinds: shelvesKinds,
				motorState:motorState,
                advancedTime: advancedTime,
                sourceUrl: sourceUrl
            },
            function (data) {
                $('#pageList').html(data);
                $('#loading').modal('hide');
            }
            , "html");
    });
    $('[data-toggle=tooltip]').tooltip();
    var removeTr = function (id) {
        $("tr[data-id=" + id + "]").remove();
    };
    $(document).ready(function () {
        /*注册懒加载*/
        $('.imgCss.lazy').lazyload({
            placeholder: "https://www.dianxiaomi.com/static/img/loading5.gif",
            threshold: 200,
            effect: "fadeIn",
            failurelimit: 10
        })
        // 找货源
        var findLink = function (obj, info) {
            var url = $(obj).closest("tr").find("a.productUrl").attr("href");
            url = url ? 'productUrl=' + url : 'imgUrl=' + info.imgUrl;
            window.open('https://www.dianxiaomi.com/alibabaSimilarSource/getSimilarUrl.htm?' + url + '&pid=mm_3245507754_17966_17982&type=tongkuan&module=product');
        }
        $('div.findGoods').each(function () {
            $(this).extensiblePicZoom({
				type: 'order',//让找货源里的图片用回放大的原图
				divWidth: '300',
				divHeight: '300',
                action: [{
                    name: '<i class="glyphicon glyphicon-search"></i>找货源',
                    type: 'right',
                    call: findLink
                }, {
                    name: '<span class="m-right10"><i class="attach-icons md-18">add</i><span style="vertical-align: text-bottom;">添加来源</span></span>',
                    type: 'right',
                    call: addLinkUrl
                }]
            });
        });
    });
    // $(function(){
    // 	$("div.imgDivIn").picZoom({
    // 		imgWidth: "296",
    // 		imgHeight: "296",
    // 		divWidth: "300",
    // 		divHeight:"300"
    // 	});
    // 	smtSysMsg();
    // })

    var smtSysMsg = function () {
        var onlineNum = $("#onLineSmtId").val(),
            offlineNum = $("#offLineSmtId").val(),
            audlineNum = $("#audLineSmtId").val(),
            edilineNum = $("#ediLineSmtId").val(),
            searchValue = $("#searchValue").val(),
            state = $("#onLineSmtStateId").val(),
            advancedSearch = $("#advancedSearch").val(),
            groupid = $('#groupId').val();
        if (onlineNum == 0 && offlineNum == 0 && audlineNum == 0 && edilineNum == 0 && state == "online" && groupid == '' && searchValue == '' && advancedSearch == '') {
            var asyncMsg = '同步产品';

            asyncMsg = '<a href="javascript:" style="display:inline;" onclick="toSmtProduct();">同步产品</a>';

            $("#smtSysMsg").html(
                '<tr><td colspan="12" style="height:200px;vertical-align: middle;text-align:center;font-size:16px; font-weight: bold">请点击「' + asyncMsg + '」即可将店铺内的产品信息同步到店小秘！</td></tr>'
            );
        }
    };
    var goOnline = function (data) {
        if (data.field == 'deliveryTime') {
            $("#showResult").html("批量修改发货期")
        } else if (data.field == 'groupIds') {
            $("#showResult").html("批量修改分组")
        } else if (data.field == 'freightTemplate') {
            $("#showResult").html("批量修改运费模板")
        } else if (data.field == 'promisedTemplate') {
            $("#showResult").html("批量修改服务模板")
        } else if (data.field == 'subject') {
            $("#showResult").html("批量修改标题")
        } else if (data.field == 'price') {
            $("#showResult").html("批量区域调价")
        }
        $("#batchUpdateSub").modal("show");
        /*2017.2.10 byzym 二次刷新初始化*/
        $("#batchUpdateSubProgressBar").css("display", "none");
        setTimeout(function () {
            $("#batchUpdateSubProgressBar").css("width", 0 + "%");
            $("#batchUpdateSubProgressBar").css("display", "");
        }, 10);
        $("#batchUpdateSubModal_status").html("");
        $("#batchUpdateSubModal_details").empty();
        $.post(
            "smtProduct/editSigleField.json",
            data,
            function (data) {
                var p = 0;		// 记录进度条的值
                var uuid = data.uuid;
                checkProcessStatus(uuid, function (data) {
                    var num = data.num % 100;
                    var status = "修改中...";
                    if (num < p && data.code != 1) {
                        // 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
                        $("#batchUpdateSubProgressBar").css("display", "none");
                        setTimeout(function () {
                            $("#batchUpdateSubProgressBar").css("display", "");
                        }, 100);
                    }

                    p = num;

                    if (data.code == 0) {
                        $("#batchUpdateSubProgressBar").css("width", num + "%");
                    } else {
                        status = "修改完成!";
                        $("#batchUpdateSubProgressBar").css("width", "100%");
                        $("#batchUpdateSubProgressBar").removeClass("active");
                    }
                    $("#batchUpdateSubModal_status").html(status);
                    $("#batchUpdateSubModal_details").html(data.msg);
                });
            }
        ).error(function (err) {
            $('#loading').modal('hide');
            $.fn.message({type: "error", msg: err});
        });
    };
    var closeBatchSub = function () {
        $("#batchUpdateSub").modal("hide");
        var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(), url = "smtProduct/pageList.htm";
        reloadPage(url, pageNo, pageSize);
    };
    var chooseSmtProductGroup = function () {
    	var groupid = $('#treeB_a').find('span.bgColor7').data('groupid');
        setProductGroup(productGroupList, '');
		$('#treeB_a').find('span[data-groupid="'+groupid+'"]').addClass('bgColor7');
        $('#smtProductGroupChoose').modal('show');
    };
    var syncSmtProductGroup = function () {
        var groupId = getSmtGroupCheck();
        if (groupId != null && groupId != "") {
            toSmtProduct(groupId);
        } else {
            $.fn.message({type: "error", msg: "请先选择分组！"});
        }
    };
    //获取smt同步分组id
    var getSmtGroupCheck = function () {
        var group = $.fn.myj_tree.chooseTreeCheckGet('treeB_Syn');
        var groupIds = "";
        if (group != null && group.length > 0) {
            for (var i = 0; i < group.length; i++) {
                if (i > 0) {
                    groupIds += ",";
                }
                groupIds += group[i].groupId;
            }
        }
        return groupIds;
    };
    var copySmtProduct = function (id) {
        $('#loading').modal('show');
        $.ajax({
            type: "POST",
            url: "smtProduct/copySmtProduct.json",
            data: {
                "id": id
            },
            dataType: "json",
            success: function (data) {
                $('#loading').modal('hide');
                for (var copyId in data) {
                    $.fn.message({
                        type: "success",
                        msg: "复制成功，已放入待发布。<a href=\"smtProduct/edit.htm?id=" + data[copyId] + "\" target=\"_blank\">    去编辑>></a>"
                    });
                }
            }
        });
    };
    //产品列表sku展开收起事件
    $(document).off('click', '.productListSkuShowSmt');
    $(document).on('click', '.productListSkuShowSmt', function () {
        var id = $(this).attr('data-productId');
        var dataType = $(this).attr('data-type');
        var value = $(this).attr('data-value'),
            td = $(this).closest('td');
        if (!+value) {//==0 状态为隐藏 方案为‘+ 展开SKU’
            td.find('tr.otherSkuTr').show();
            $(this).attr('data-value', 1).html('- 收起');
        } else {//==1 状态为隐藏 方案为‘- 收起SKU’
            td.find('tr.otherSkuTr').hide();
            $(this).attr('data-value', 0).html('+ 展开');
        }
    });
    //添加至广告投放
    var addToPlaning = function (platform, productId) {
        $.ajax({
            type: "POST",
            url: "dxmAd/addToPlaning.json",
            data: {
                "platform": platform,
                "productId": productId,
            },
            dataType: "json",
            success: function (data) {
                if (data.code > 0) {
                    $("#adPromptModal").modal('show');
                } else {
                    $.fn.message({type: "error", msg: "添加失败！"});
                }
            },
            error: function () {
                $.fn.message({type: "error", msg: "网络异常，请稍后重试！"});
            }
        });
    };
    //更改刊登失败错误提示文案
    $(document).ready(function () {
        var reg = new RegExp("post:Reason{innerData=null, reasonType=riskRestricted, code=31, description='(\\d+) has been punished', " +
            "provider.ns=riskControlProvider}");
        $('.productListErrorMsg').each(function () {
            var errorMsg = $(this).html();
            var category = $(this).attr('data-category');
            if (errorMsg) {
                errorMsg = errorMsg.replace('主图url不符合要求', '主图url不符合要求，<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=670" target="_blank">点此查看解决方案</a>')
                    .replace('sku图片不为空，类目属性允许自定义图片，但自定义图片不符合规则', 'sku图片不符合要求,<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=670 " target="_blank">点此查看解决方案</a>')
                    .replace('速卖通店铺授权异常，请重新授权！', '速卖通店铺授权异常，请重新授权！解决方案：如速卖通授权服务到期请重新购买，若已购买请在速卖通服务市场点击【使用】即可（<a href=\"http://help.dianxiaomi.com/help/getRefreshContent.htm?id=917\" target=\"_blank\">点此查看操作教程</a>）')
                    .replace('post:Reason{innerData=null, reasonType=merchantRestricted, code=11, description=\'This account didn\'t pass the merchant auth.\', provider.ns=merchantProvider}', '当前卖家未对商品所在类目的缴费或者续约，无法发布当前类目下的商品')
                    .replace('post:Reason{innerData=null, reasonType=overseaShippingRestricted, code=21, description=\'overseaShippingSellerService.canPostProduct return false.\', provider.ns=overseaShippingProvider}', '速卖通后台运输模板和发货地不一致。')
                    .replace('product have self-defined brand attribute', '自定义属性中不能包含“brand”字样')
                    .replace('detail module count than 2', ' 产品信息模块超出最大数量限制，速卖通最多允许选择一个关联营销模块和一个自定义模块')
                    .replace('post:system attribute of category is required, like attributeId :', '有必填属性未填写，属性:')
                    .replace('post:Reason{innerData=null, reasonType=brandRestricted, code=10, description=\'this brand can not use.\', provider.ns=brandAccessProvider}', '品牌无效，<a href="http://help.dianxiaomi.com/help/getRefreshContent.htm?id=237" target="_blank">点此查看解决方案</a>')
                    .replace('Invalid arguments:aeop_a_e_product.aeop_ae_product_s_k_uslist.size exceed max size', '变种sku数量超限，请减少数量')
                    .replace('edit:Reason{innerData=null, reasonType=activityRestricted, code=11, description=\'activity control can\'t allow edit.lockAttribute = aeProductPackage\', provider.ns=activityProvider}', '产品在活动中，只允许编辑部分信息，请点击产品右侧【更多—编辑活动中产品】编辑')
                    .replace(reg, '当前卖家账户被处罚，等待处罚结束后再发布商品。详情咨询速卖通官方客服')
                    .replace('读图片失败', '获取图片失败,<a href="http://help.dianxiaomi.com/help/getRefreshContent.htm?id=451" target="_blank">请查看解决办法</a>')
                    .replace('SYSTEM:Unexcepted exception: HSFTimeOutException-Timeout', '接口请求超时，请确认是否成功，未成功，请重试！')
                    .replace('person:Invoking uic service cause a timeout exception', '速卖通系统内部错误，请稍后重试')
                    .replace('Reason{innerData=null, reasonType=overseaShippingRestricted, code=21, description=\'overseaShippingSellerService.canPostProduct return false.\', provider.ns=overseaShippingProvider', '点击【编辑】ctrl+f 搜索发货地，非海外仓发货不要勾选国家，如需海外发货请到【速卖通后台-产品-运费模板-新建模板】申请海外发货权限')
                    .replace('Sorry, the product name must be from 1 to 128 characters', '产品标题必须在1~128个字符之间')
                    .replace('Sorry, the detail description information you filled in is not in English. Please input the information in English instead', '产品PC端描述包含非英文字符')
                    .replace('Sorry, the information you filled contains email address or website information', '产品PC端描述中包含了@符号，请点击【编辑-PC端描述-源码】ctrl+F 搜索@、或gif 将此删除再发布')
                    .replace('Reason{innerData=null, reasonType=postNumRestricted, code=21, description=\'Failed! Can\'t publish over the maximum number of items,You can continue to improve the product information and save it to the draft box.\', provider.ns=merchantProvider', '可发布商品超过数量上限,具体限制请联系速卖通平台客服核实')
                    .replace('SellerOrientedAccessService.post throw exception.e=com.taobao.hsf.exception.HSFTimeOutException: HSFTimeOutException-FutureTimeout ERR-CODE: [HSF-0002], Type: [BIZ], More: [http://console.taobao.net/help/HSF-0002] error message : timeout is 5000 at com.taobao.hsf.invocation.AsyncToSyncInvocationHandler.getRPCResult(AsyncToSyncInvocationHandler.java:273) at com.taobao.hsf.invocation.AsyncToSyncInvocationHandler.invokeType(AsyncToSyncInvocationHandler.java:232) at co', '速速卖通系统超时，请耐心等待速卖通系统接口稳定')
                    .replace('PostProduct:post a product cause an timeout exception', '速卖通系统内部异常导致发布产品超时，请耐心等待稍后重试')
                    .replace('Sizechart:The sizechart doesn\'t belong to the user! sizechartId=', '点击产品页面同步尺码模板，重新选择，您当前选择尺码模板在速卖通后台已不存在')
                    .replace('product sku attributes repeat', '产品有重复的属性，请删除')
                    .replace('Illegal delivery time value, the valid value should be between [1,7].', '当前分类发货期必须为1-7天，请点击编辑ctrl+f 快速搜索【发货期限】设置数值必须在1至7天')
                    .replace('product sku attribute definition name error', '产品属性填写other之后字定义的信息只能包含20个字符以内的英文和数字，请删除其他标点符号')
                    .replace('product sku image not allowed customized.', '产品属性已变更，当前分类不允许设置变种图片，请点击编辑删除变种图')
                    .replace('product sku number max is 256', 'sku变种数量不能大于256，请移除变种继续发布')
                    .replace('freight template doesn\'t exsit or freight\'s oversea shipping country does\'t match with the product.', '点击【编辑】ctrl+f 搜索发货地，非海外仓发货不要勾选国家，如果海外仓发货请核实勾选国家和速卖通后台设置运费模板国家是否一致或运费模板不存在')
                    .replace('must be greater than or equal to -30% and less then 100%', '点击【编辑】ctrl+f 搜索【区域调价】价格相对原售价的比例要在30%-100%')
                    .replace('You fill in the information in external mailbox or web page address, please check detailed describe in whether directly paste the external copy of text or pictures, pictures please unified local upload/pictures bank upload', '产品PC端描述中包含了@符号，请点击【编辑-PC端描述-源码】ctrl+F 搜索@、或gif 将此删除再发布。')
                    .replace('detail module count than 2', 'PC端描述中添加的产品模块不可超过2个，请移除继续发布')
                    .replace('Please enter numbers between 1 and 99 (no decimal points)', '设置的批量折扣只能在1%至99%，请点击编辑ctrl+f 快速搜索【批发】,修改批量折扣')
                    .replace('This account didn\'t pass the merchant auth', '未对商品所在类目缴费或续约，无法发布当前类目下商品。具体操作请咨询速卖通官方客服。')
                    .replace('not pass alipay auth', '当前卖家账户未通过实名认证，无法发布商品。具体实名认证操作请咨询速卖通官方客服。')
                    .replace('Sorry, the attribute you filled in is not in English. Please input the information in English instead.', '自定义属性包含了非英文字符、不可有中文和全角字符')
                    .replace('Sorry, the detail description information you filled in exceeds the limit of 60000 characters', 'PC端描述字符不可超过60000，请点击描述中的源码进行删除字符')
                    .replace('Reason{innerData=null, reasonType=brandRestricted, code=10, description=\'this brand can not use.\', provider.ns=brandAccessProvider', '到速卖通核实此类目产品是否已申请品牌发布权限<a href="http://help.dianxiaomi.comhelp/getRefreshContent.htm?id=237" target="_blank">点此查看解决方案</a>')
                    .replace('Property Value illegal: property value not in Candidate List. property named is Brand Name[2], submitted the property value is null', '品牌为空或者所选品牌无效，到速卖通核实此类目产品是否已申请品牌发布权限<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=1230" target="_blank">点此查看解决方案</a>')
            		.replace('Brand can\'t be empty', '您发布的该分类产品要求品牌必填且不能选择无品牌，点击【编辑】ctrl+F 搜索【品牌】进行完善（如何选择品牌）<a href="http://help.dianxiaomi.comhelp/getRefreshContent.htm?id=237" target="_blank">点此查看解决方案</a>')
                    .replace('Brand Name can\'t be empty', '您发布的该分类产品要求品牌必填且不能选择无品牌，点击【编辑】ctrl+F 搜索【品牌】进行完善（如何选择品牌）<a href="http://help.dianxiaomi.comhelp/getRefreshContent.htm?id=237" target="_blank">点此查看解决方案</a>')
					.replace('CHK_BASIC_MAXVALUE:Input value can\'t exceed 7', '当前分类发货期最大值为7，请点击编辑ctrl+f 快速搜索【发货期限】设置数值必须在1至7天')
            		.replace('You don’t have the brand credentials to post this product.', '您没有此品牌的发布权限或者速卖通后台品牌商标已过期，点击【编辑】ctrl+F 搜索【品牌】进行修改（如何选择品牌）<a href="http://help.dianxiaomi.comhelp/getRefreshContent.htm?id=237" target="_blank">点此查看解决方案</a>')
            		.replace('This cateogy is only available to qualified sellers.', '您没有该产品类目的发布权限，请登陆速卖通后台进行申请【账户及认证-类目招商准入-我要入驻】')
                    .replace('member_networkPlanningAndPunishment@post_tip', '店铺被速卖通处罚，禁止发布产品，请登录速卖通后台查看原因')
                    .replace('must be greater than or equal to 70%', '区域调价后价格要大于原售价70%')
                    .replace('000003:Your operation rights have been suspended. Please contact customer service.', '当前店铺操作权限已被暂停，请登陆速卖通店铺后台核实，如有疑问请咨询速卖通小何')
                    .replace('This is a restricted category. Please attain the authorization before publishing.', 'This is a restricted category. Please attain the authorization before publishing. 解决方案：发布该分类产品需先申请发布权限，请联系速卖通在线客服咨询具体操作流程')
                    .replace('Invalid arguments:aeop_a_e_product.aeop_ae_product_propertyslist.size exceed max size', '产品属性数量超过最大上限（车型库/自定义属性也属于产品属性）')
                    .replace('fail to persistent bycom.aliexpress.item.manage.server.biz.persistent.AeProductSKUStockPersistent', '速卖通接口异常，请重试')
					.replace('The template not belong to the seller.','The template not belong to the seller. 解决方案：点击编辑进入产品详情页面最下方运费模板点击同步，重新选择进行发布')
					.replace('Overseas sellers cannot use the novice shipping template.','Overseas sellers cannot use the novice shipping template. 解决方案：点击编辑进入产品详情页面最下方运费模板点击同步，重新选择进行发布')
					.replace('Brand Name:CHK_BASIC_REQUIRED:Brand Name is required','Brand Name:CHK_BASIC_REQUIRED:Brand Name is required ,解决方案：速卖通平台要求部分类目需注册品牌才可进行发布，请到速卖通后台-账号认证-品牌商标申请品牌且完成商标发布权限')
					.replace('Details:010016:Custom property name can\'t be duplicated','Details:010016:Custom property name can\'t be duplicated ,解决方案：点击产品编辑页面ctrl+F 搜索【自定义属性】属性名有重复请删除')
					.replace('运费模板异常，运费模板不属于当前卖家或运费模板支持国家与 发货地不一致','运费模板异常，运费模板不属于当前卖家或运费模板支持国家与 发货地不一致<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=1145" target="_blank">点此查看解决办法</a>')
					.replace('非中国大陆卖家不能使用新手运费模板，到速卖通后台创建然后小秘产品编辑页面同步重新选择','非中国大陆卖家不能使用新手运费模板，到速卖通后台创建然后小秘产品编辑页面同步重新选择<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=1145" target="_blank">点此查看解决办法</a>')
					.replace('检查图片 图片色彩空间为RGB、不能上传CRMK 图片颜色描述文件','检查图片 图片色彩空间为RGB、不能上传CRMK 图片颜色描述文件<a href="http://help.dianxiaomi.com/pre/getContent.htm?id=1149" target="_blank">点此查看解决办法</a>');
            }
			/**
			 * 处理速卖通汽配产品相关报错
			 * */
			if (errorMsg.indexOf("SYS_CHK_CAT_PROP_ID_NULL") > -1 || errorMsg.indexOf("Details:040049") > -1) {
				errorMsg = errorMsg + " 速卖通车型数据完善期间，存在接口不稳定情况，请3分钟后重试";
			}
            $(this).html(errorMsg);
        });
    });
    var textCh = function (e) {
        var validateA = /[\u4E00-\u9FA5]/g,//匹配中文
            validateB = /[\u4E00-\u9FA5;,；，]/g,//匹配中文、逗号或分号
            validateC = /[\W]/g,//匹配英文和数字
            validateD = /^[\w-]+$/,//匹配英文和数字中划线
            validateE = /[^\x00-\xff]/ig,//中文和全角字符
            validateF = /[^\u0021-\u0024\u0026\u0028-\u003B\u003D\u003F-\u007E]/g,
            validateG = /([^\x00-\xff]|(<.*?>))/g,
            validateH = /[^\x00-\x7F]/ig;//判断非ascii
        var str = e;

        var num = e.length;
        if (num != 0) {
            if (str.match(validateH)) {
                return true;

            }
        }
    };
    //隐藏按钮
    $(document).ready(function () {
        var shopId = $('#shopId').val();
        if (shopId == -1) {
            $('#menu_2').find('a').hide(); 		//隐藏待发布同步分组
            $('#menu_3').find('a').hide(); 		//隐藏在线同步分组
            $('div.outDiv').find('span.glyphicon').hide();
            $('div.outDiv span[title="同步速卖通数据"]').closest("span").hide();
            $('div.outDiv').find('div').addClass('m-left10');
            $('#treeB_a').removeClass('pBottom10');
            $('#treeB_b').removeClass('pBottom10');
        }


        //判断smt产品诊断提示功能是否开启end
    });

    /******速卖通区域调价引入模板 start*****/
    $(document).off('click', '#updateBetweenPrice .treeSelectBtn').on('click', '#updateBetweenPrice .treeSelectBtn', function () {
        $("#priceModelId").show();
        $(this).removeClass("deShow").addClass("deHide");
    });
    $(document).off('click', '#updateBetweenPrice').on('click', '#updateBetweenPrice', function () {
        var $treeSelectBtn = $("#updateBetweenPrice .treeSelectBtn");
        $treeSelectBtn.hover(function () {
            $(this).removeClass("deShow").addClass("deHide");
        }, function () {
            $(this).removeClass("deHide").addClass("deShow");
        });
        if (!$treeSelectBtn.hasClass("deHide")) {
            $("#priceModelId").hide();
            $treeSelectBtn.removeClass("deShow").addClass("deHide")
        }

    });
    //切换模板获取模板信息,并回填信息
    $("#priceModelId a").click(function () {
        var modelId = $(this).attr('data-value');
        $(".treeSelectBtn").find("[data-names='nodeName']").html($(this).html());
        $("#priceModelId").hide();
        if (modelId > 0) {
            $.ajax({
                type: "POST",
                url: "smtProduct/getAdjustPrice.json",
                data: {
                    "id": modelId
                },
                dataType: "json",
                success: function (obj) {
                    if (!$.isEmptyObject(obj)) {
                        //回填数据,先存起来
                        $("#aeopNationalQuoteConfiguration").val(obj.data);
                        //先清空上一个模板的数据,再填充数据
                        clearData();
                        //初始化数据
                        initContent();
                    }else {
						$.fn.message({type: "error", msg: "模板已被关闭或不存在！"});
					}
                },
                error: function () {
                    $.fn.message({type: "error", msg: "获取模板信息错误！"});
                }
            });
        }
    });

    var clearData = function () {
        $("#priceHolder").find('option[value = "percentage"]').prop("selected", true);

        var datas = $("#aeopNationalQuoteConfigurationTB .smtPrice").find('td.clearDirection');
        $.each(datas, function (i, m) {
            $(m).find('option[name = "plus"]').prop("selected", true);
            $(m).find('input[data-names = "value"]').val(0);
            $(m).find("span[name='relative']").text("");
            $(m).find("span[name='percentageSimple']").text("%");
        });
    };
    /******速卖通区域调价引入模板 end*****/

        //smt产品诊断提示功能关闭
    var closeSmtDiagnoseResult = function (obj, num) {
            $(obj).closest('.smtDiagnoseResule').addClass('myj-hide');
            if (num) {
                $.ajax({
                    type: 'POST',
                    url: 'diagnosisProject/reminding.json',
                    dataType: 'json',
                    success: function (data) {
                    }
                })
            } else {
                myjStorage.set('isShowDiagnosiResult', new Date().getDate())();
            }
        };
    //跳转到smt产品诊断结果页
    var skipSmtProDiaPage = function (type) {
        var shopId = $('#shopId').val(),
            dxmState = $('#dxmState').val(),
            productStatusType = $("#productStatusType").val();
        window.open('https://www.dianxiaomi.com/smtProductDiagnosisResult/index.htm?dxmState=' + dxmState + '&shopId=' + shopId + '&productStatusType=' + productStatusType + '&smtDiagnosisType=' + type + '', '_blank');
    };

    /*******************************批量创建产品************************************/
    //批量创建产品(excel)弹层显示
	var batchCreateProductShowModal = function () {
	    var $batchCreateProductModal = $('#batchCreateProductModal'),
			$selectedProductModule = $('#selectedProductModule'),
			$batchCreateProTabBox = $('.batchCreateProTabBox');
        $batchCreateProTabBox.find('.tab-check').removeClass('tab-check');
        $batchCreateProTabBox.find('li:first').addClass('tab-check').click();
        $selectedProductModule.val('');
        $('.productCategoryName').html('');
        $('.upFilesName').html('');

	    if($selectedProductModule.find('option').length === 1){
            batchCreateProGetProModule();
		}
		$('#importProductModal').modal('hide');
        $batchCreateProductModal.modal('show');
    };
	//批量创建产品弹层tab切换
	var batchCreateProChangeTab = function(num) {
	    var $createProductFlowpath = $('.createProductFlowpath:eq("1")'),
			$comfirmUpFiles = $('.comfirmUpFiles')
			//$moduleDown = $('.moduleDown');
        if(num === 1){
            $createProductFlowpath.removeClass('flowpath-active');
            $comfirmUpFiles.addClass('hide');
            //$moduleDown.removeClass('hide');
		}else{
            $createProductFlowpath.addClass('flowpath-active');
            $comfirmUpFiles.removeClass('hide');
            //$moduleDown.addClass('hide');
		}
    };
	//批量创建产品获取产品模板信息
	var batchCreateProGetProModule = function () {
        var $batchCreateProductModal = $('#batchCreateProductModal'),
            $selectedProductModule = $('#selectedProductModule');
        $('#loading').modal('show');
        $.ajax({
            type : 'POST',
            url : 'userTemplate/getTemplateInfoBy.json',
            dataType : 'json',
            success : function (data) {
                $('#loading').modal('hide');
                if(data && data.length){
                    var option = '<option value="">请选择产品模板</option>';
                    $.each(data,function (i,j) {
                        option += '<option value="'+j.categoryStrId+'" data-id="'+j.id+'">'+j.name+'</option>';
                    });
                    $selectedProductModule.html(option);
                    $('.productCategoryName').html('');
                }else{
                    $selectedProductModule.html('<option value="">请选择产品模板</option>');
                    $('.productCategoryName').html('');
                    $.fn.message({type:'warning',msg:'没有可用的产品模板，请点击新建模板！'});
                }
                $batchCreateProductModal.modal('hide').modal('show');
            },
            error : function () {
                $.fn.message({type:'error',msg:'获取产品模板失败，请刷新页面重试！'});
                $('#loading').modal('hide');
            }
        });
    };
	//产品模板下拉框选择时，获取信息
	var getProductModuleMsg = function (obj) {
        var categoryId = $(obj).val(),
			$productCategoryName = $('.productCategoryName');
        if(!categoryId){
            $productCategoryName.html('');
            return;
		}
        $.ajax({
            type : 'POST',
            url : 'smtCategory/getByCategoryId.json',
            data : {categoryId : categoryId},
            dataType : 'json',
            success : function (data) {
                if(data){
                    $productCategoryName.html('类目：'+data.nameZh + '('+ data.nameEn +')');
				}
            },
            error : function () {
                $.fn.message({type:'error',msg:'网络异常，请稍后重试'});
            }
        });
    };
	//批量创建产品下载文件
	var batchCreateProDownFile = function () {
        var id = $('#selectedProductModule').find('option:selected').attr('data-id');
        if(!id){
            $.fn.message({type:'error',msg:'请先选择产品模板'});
            return;
        }
        $.ajax({
            type: "GET",
            url: "userTemplate/quoteTemplate.json",
            data: {templateId:id},
            dataType: "json",
            success: function (data) {
				if (data.code === -1){
                    $.fn.message({type:'error',msg:data.msg});
                    return;
				}else{
                    window.location.href = "https://www.dianxiaomi.com/smtProduct/exportNewEcxel.json?templateId="+id;
				}
            }
        })
    };
    //批量创建产品上传文件
    var batchCreateProComfirmUpExcel = function () {
        var file = $(".upFilesName").text();
        if(!file){
            $.fn.message({type:"error",msg:"您没有选中任何文件"});
            return;
        }
        $('#loading').modal('show');
        batchCreateProUp.uploadLast();
    };
    var batchCreateProUp = $('#batchCreateProUp').Huploadify({
        'auto':false,
        'fileObjName' : 'FileData',
        'fileTypeExts': '*.xlsx;*.xls', //允许的格式
        'multi':false,
        'fileSizeLimit':2048,
        'removeTimeout':500,
        'showUploadedPercent':false,
        'formData':{},
        'buttonClass': 'btn btn-primary btn-block',
        'buttonText': '选择上传文件',
        'uploader' : 'https://www.dianxiaomi.com/smtProduct/newImportProduct.json ',	// 后台对应的上传接口
        'uploadLimit' : 0,
        onUploadStart:function(files,formData){
        },
        onSelect:function(files){
            for(var i=0,len=files.length;i<len;i++){
                $('.upFilesName').html(files[i].name);
            }
            return false;
        },
        onStop:function(files){
            return false;
        },
        onUploadSuccess:function(file, data, response){
            $('#loading').modal('hide');
            $('#batchCreateProductModal').modal('hide');
            data = $.parseJSON(data);
            if (data != null) {
                $('#loading').modal('hide');
                var successList = data.successList;
                var failList = data.failList;
                batchReturnProcess(successList, failList, successList.length > 0 ? (successList.length) + "&nbsp;&nbsp;&nbsp;&nbsp;已保存到「 待发布」页，请在待发布页编辑、发布！" : "0");
                reloadPage("smtProduct/pageList.htm");
            }
        },
        onUploadError: function(file, errorCode, errorMsg, errorString){
            $('#loading').modal('hide');
        }
    });
</script>
</div>
</div>
<!--平台产品复制模态层-->
<!-- 选择店铺 -->
<div class="modal" id="selectShopCopyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog"  style="width: 650px;">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">选择店铺</h4></div>
            <div class="modal-body tab-content max-h450-auto">
                <label>
                                        <input name="selectShopId" type="checkbox" checked="checked"
                                               value="2451968">&nbsp;康康</label>
                                    <br>
                                </div>
            <div class="modal-footer">
                <button id="selectShopCopyConfirmBtn" type="button" class="btn btn-primary">确定</button>
            </div>
        </div>
    </div>
</div><div class="modal" id="batchOperateRetModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">执行结果</h4>
			</div>
			<div class="modal-body tab-content">
				<div>
					执行成功：<span class="fBlue" id="operateSuccessNum"></span><br/>
					执行失败：<span class="fRed" id="operateFailNum">0</span><br/>
				</div>
				<div class="mTop10" id="operateFailDetailDiv">
					失败详情：<div id="operateFailDetail" style="padding-left:20px;max-height:150px;overflow-y:scroll"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 从速卖通同步数据 -->
<div class="modal" id="syncFromWishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">从速卖通同步产品</h4>
			 </div>
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="syncSmtProductprogressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>
				<div class="mTop10">
					状态：<span class="fRed" id="syncFromWishModal_status">进行中...</span><br/>
					详情：<div id="syncFromWishModal_processDetail" style="margin-left:30px; max-height: 400px; overflow-x: auto;"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--从wish同步数据end-->
<!-- 从速卖通同步数据 -->
<div class="modal" id="syncUpdateCategoryAttrModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量修改属性</h4>
			</div>
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="syncUpdateCategoryAttrModal_progressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>
				<div class="mTop10">
					状态：<span class="fRed" id="syncUpdateCategoryAttrModal_status">进行中...</span><br/>
					详情：<div id="syncUpdateCategoryAttrModal_processDetail" style="margin-left:30px;"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--从wish同步数据end-->
<!-- 批量修改品牌 start-->
<div class="modal" id="syncUpdateCategoryAttrBrandModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量修改品牌</h4>
			</div>
			<div class="modal-body tab-content">
				<div class="progress">
					<div id="syncUpdateCategoryAttrBrandModal_progressBar" class="progress-bar progress-bar-success progress-bar-striped " role="progressbar" aria-valuenow=10" aria-valuemin="0" aria-valuemax="100" style="width:0%">
					</div>
				</div>
				<div class="mTop10">
					状态：<span class="fRed" id="syncUpdateCategoryAttrBrandModal_status">进行中...</span><br/>
					详情：<div id="syncUpdateCategoryAttrBrandModal_processDetail" style="margin-left:30px;"></div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!--批量修改品牌end-->
<!-- 确认继续发布模态层 -->
<div class="modal" id="confirmDelivery" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">是否继续发布</h4>
			 </div>
			<div class="modal-body tab-content">
				<div class="col-xs-12 mTop10 mBottom20 pLeft10s f14" id="saveErrorMsg">是否继续发布？</div>
			</div>
			<div class="modal-footer" style="border-top:none;">
				<button type="button" class="btn btn-primary" id="toOnline">继续发布</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 确认继续发布模态层 -->
<!-- 批量插入营销模块模态层 -->
<div class="modal relatedMarketing" id="batchInsertModule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;margin-top:80px;">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量插入店小秘营销模块</h4>
			 </div>
			<div class="modal-body tab-content">
				<table class="borderOut">
					<tr>
						<td class="insertName">模块名称：</td>
						<td>
							<select onchange="selectDxmModule();" class="form-control pull-left" style="width:300px;" id="dxmModuleListDiv">
							</select>
							<a href="javascript:;" onclick="downloadDxmModuleList(1);"
							class="glyphicon glyphicon-refresh pull-left mLeft10 mTop8"></a>
						</td>
					</tr>
					<tr>
						<td class="insertName" style="vertical-align:top;">模块类型：</td>
						<td>
							<span id="marketTypeSpan">暂无</span>
						<td>
					</tr>
					<tr>
						<td class="insertName">显示位置：</td>
						<td>
							<label><input type="radio" name="marketType" value="0" checked="checked"> 在产品描述头部</label>
							<label class="mLeft10"><input type="radio" name="marketType" value="1"> 在产品描述底部</label>
						</td>
					</tr>
				</table>
			</div>
			<div class="modal-footer" style="clear:both;">
				<button type="button" class="btn btn-primary" onclick="usedMarketingModule();">保存</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 批量插入营销模块模态层end -->
<!-- 修改库存-->
<div class="modal smtEditModal" id="smtEditPurchasing" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:600px;">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel">修改库存</h4>
			 </div>
			<div class="modal-body tab-content p10" id="smtEditStockTable"></div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="batchUpdateStock();">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!-- 修改库存end -->
<!-- 修改库存-->
<div class="modal smtEditModal" id="smtEditPriceModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:600px;">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="myModalLabel2">修改价格</h4>
			 </div>
			<div class="modal-body tab-content p10" id="smtEditPriceTable">
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="batchUpdatePrice();">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!-- 修改库存end -->
<!-- 改属性 -->
<div class="modal" id="updateAttrFromSpace" style="z-index:2010;" tabindex="-1" role="dialog" aria-labelledby="imgModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-lg" style="min-width:1100px;margin-top:10px;">
		<div class="modal-content bs-example bs-example-tabs  col-xs-12 p0">
			<div class="modal-header col-xs-12">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">修改分类属性</h4>
			</div>
			<div id="selectImgContent" class="modal-body tab-content col-xs-12 pTop0" style="height:440px;">
				<iframe id="myFrame" src="" style="width:100%;height:100%;" scrolling="auto" frameborder="0"></iframe>
			</div>
			<div class="modal-footer col-xs-12">
				<button type="button" class="btn btn-primary" onclick="showAttrFromSpace();">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!-- 改属性end -->
<!-- 改品牌模态层 -->
<div class="modal" id="updateAttrBrandFromSpace" style="z-index:2010;" tabindex="-1" role="dialog" aria-labelledby="imgModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog modal-lg" style="min-width:1100px;margin-top:10px;">
		<div class="modal-content bs-example bs-example-tabs  col-xs-12 p0">
			<div class="modal-header col-xs-12">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">修改品牌</h4>
			</div>
			<div id="selectImgContentBrand" class="modal-body tab-content col-xs-12 pTop0" style="height:440px;">
				<iframe id="myFrameBrand" src="" style="width:100%;height:100%;" scrolling="auto" frameborder="0"></iframe>
			</div>
			<div class="modal-footer col-xs-12">
				<button type="button" class="btn btn-primary" onclick="showAttrBrandFromSpace();">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!-- 改品牌模态层end -->
<!-- 修改分类属性模块模态层 -->
<div class="modal" id="showCategoryModule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;margin-top:80px;">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量改属性</h4>
			</div>
			<div class="modal-body tab-content" id="categoryChooseDiv"></div>
			<div class="modal-footer" style="clear:both;">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 修改分类属性模态层end -->
<!-- 修改分类属性模块模态层 -->
<div class="modal" id="showCategoryBrandModule" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:500px;margin-top:80px;">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">批量改品牌</h4>
			</div>
			<div class="modal-body" style="max-height: 450px; overflow: auto;" id="categoryBrandChooseDiv"></div>
			<div class="modal-footer" style="clear:both;">
				<button type="button" class="btn btn-primary" data-dismiss="modal">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 修改分类属性模态层end -->
<!-- 批量修改模态层(层上层) -->
<div class="modal lzdSkuBatchEdit" id="modalBatchEdit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog">
		<div class="modal-content bs-example bs-example-tabs">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title"></h4>
			</div>
			<div class="modal-body tab-content p10"></div>
			<div class="modal-footer" style="clear:both;">
				<button type="button" class="btn btn-primary skuBatchEdit" data-names="">确定</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<!-- 批量修改模态层(层上层)end -->
<!-- 修改库存-->
<div class="modal smtEditModal" id="smtProductData" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:300px;">
		<div class="modal-content bs-example bs-example-tabs">
			<!--modalHead-->
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title" id="smtProductDataTitle">销售数据</h4>
			</div>
			<div class="modal-body tab-content p10" id="smtProductDataTable"></div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" onclick="updateProductData();">更新数据</button>
				<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
			</div>
		</div>
	</div>
</div>
<div class="modal modal-new AmazonCategoryChoose category-choose-modal default-amz" id="categoryChooseList" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
	<div class="modal-dialog" style="width:1106px;margin-top:60px;"  uid="choosen-box">
		<div class="modal-content">
			<div class="modal-header">
				<button class="close" type="button" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				<h4 class="modal-title">选择类目</h4>
			</div>
			<div class="modal-body p-left20" id="categoryIdAndName">

				<div class="searchCategoryIptOut default inline-block" uid="searchCategoryIptOut">
					<input class="form-component w850" id="searchCategory" type="text" placeholder="搜索分类名称">
					<button class="button btn-determine v-middle m-left10" uid="searchCategory" type="button" onclick="searchCategory();">搜 索</button>
				</div>
				<div style="height:40px;">
					<span class="categoryChooseCrumbs"><span name="categoryId" data-level="1">未选择类目</span><span name = "categoryId" data-level="2"></span><span name = "categoryId" data-level="3"></span><span name = "categoryId" data-level="4"></span></span>
				</div>
				<div class="categoryChooseOutDiv">
					<div class="categoryChooseMiddleDiv">
						<div class="pull-left categoryChooseInDiv" data-level="1">
							<div class="serch">
								<input class="form-component" type="text"/>
								<span class="glyphicon glyphicon-search"></span>
							</div>
							<div class="categoryList"></div>
						</div>
						<div class="pull-left categoryChooseInDiv" data-level="2">
							<div class="serch">
								<input class="form-component" type="text"/>
								<span class="glyphicon glyphicon-search"></span>
							</div>
							<div class="categoryList"></div>
						</div>
						<div class="pull-left categoryChooseInDiv" data-level="3">
							<div class="serch">
								<input class="form-component" type="text"/>
								<span class="glyphicon glyphicon-search"></span>
							</div>
							<div class="categoryList"></div>
						</div>
						<div class="pull-left categoryChooseInDiv" data-level="4">
							<div class="serch">
								<input class="form-component" type="text"/>
								<span class="glyphicon glyphicon-search"></span>
							</div>
							<div class="categoryList"></div>
						</div>
					</div>
				</div>
				<div class="classifie-search hide" cid="classifiedSearch"></div>
			</div>
			<div class="modal-footer btn-box">
				<span class="pull-left p-top10" id="instructions"><span class="fWhite bgColorJ pRight5 p-left5 m-right5">说明!</span>中文类目名来自谷歌翻译，仅供参考！</span>
				<button class="button btn-determine m-right10 selectCategoryList" type="button" uid="chooseBtn">选择</button>
				<button class="button btn-gray" type="button" onclick="categoryChooseCloseBtn(this)">关闭</button>
			</div>
		</div>
	</div>
</div>
<!-- 单个/批量定时发布模态框 -->
<div class="modal timedRelease" id="batchTimingPublishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog w850">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">批量定时发布</h4>
            </div>
            <div class="modal-body">
                <table>
                    <tr>
                        <td><label>定时方式：</label></td>
                        <td>
                            <select class="form-control" id="scheduleTimeType">
                                <option value="0">按间隔时间</option>
                                <option value="1">按分段时间</option>
                            </select>
                        </td>
                        <td id="scheduleTime0">
                            <input class="Wdate form-control h34-imp" id="dxmScheduleTimeStr" name="" type="text"
                                   value="" placeholder="" autocomplete="off"
                                   onClick="WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd HH:mm:ss',minDate:'%y-%M-%d %H:%m:%s',onpicked:timingDateEdit})"/>&nbsp;开始，
                            每&nbsp;<input class="form-control smIpt" id="timeInterval" type="text" value="1" onkeyup="value=value.replace(/[^0-9.]/g,'')"/>&nbsp;
                            分钟发布一个
                        </td>
                        <td id="scheduleTime1" style="display: none;">
                            <input class="Wdate form-control h34-imp" id="dxmScheduleStartTime" name="scheduleTime"
                                   type="text" value="" placeholder="" autocomplete="off"
                                   onClick="WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd HH:mm:ss',minDate:'%y-%M-%d %H:%m:%s',onpicked:timingDateEdit})"/>&nbsp;
                            开始至
                            &nbsp;<input class="Wdate form-control h34-imp" id="dxmScheduleEndTime" name="scheduleTime"
                                         type="text" value="" placeholder="" autocomplete="off"
                                         onClick="WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd HH:mm:ss',minDate:'%y-%M-%d %H:%m:%s',onpicked:timingDateEdit})"/>&nbsp;结束，
                            均时发布
                        </td>
                    </tr>
                    <tr>
                        <td><label>选择时区：</label></td>
                        <td colspan="2">
                            <select class="form-control w280" id="batchTimeZone">
                                <option value="0">(UTC+08:00)北京时间(中国)</option>
                                <option value="16">(UTC-08:00)太平洋时间(美国和加拿大)</option>
                                <option value="15">(UTC-07:00)山地时间(美国和加拿大)</option>
                                <option value="14">(UTC-06:00)中部时间(美国和加拿大)</option>
                                <option value="13">(UTC-05:00)东部时间(美国和加拿大)</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <input id="dxmProductId" type="hidden" value=""/>
                <button class="btn btn-primary" type="button" onclick="batchTimingPublish()">确定</button>
                <button class="btn btn-default" type="button" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<div class="modal timedRelease" id="timingPublishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="false" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog w500">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">定时发布</h4>
            </div>
            <div class="modal-body">
                <table>
                    <tr>
                        <td>定时发布时间：</td>
                        <td>
                            <input class="Wdate form-control h34-imp" id="dxmScheduleTime" name="" type="text" value="" placeholder="" autocomplete="off"
                                   onClick="WdatePicker({skin:'whyGreen',dateFmt: 'yyyy-MM-dd HH:mm:ss',minDate:'%y-%M-%d %H:%m:%s',onpicked:timingDateEdit})"/>
                            <input type="hidden" id="dxmScheduleProductId"/>
                        </td>
                    </tr>
                    <tr>
                        <td>选择时区：</td>
                        <td>
                            <select class="form-control w280" id="timeZone">
                                <option value="0">(UTC+08:00)北京时间(中国)</option>
                                <option value="16">(UTC-08:00)太平洋时间(美国和加拿大)</option>
                                <option value="15">(UTC-07:00)山地时间(美国和加拿大)</option>
                                <option value="14">(UTC-06:00)中部时间(美国和加拿大)</option>
                                <option value="13">(UTC-05:00)东部时间(美国和加拿大)</option>
                            </select>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="button" onclick="setTimingProduct()">确定</button>
                <button class="btn btn-default" type="button" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>
<!-- 修改库存end -->
<script type="text/javascript" src="https://www.dianxiaomi.com/static/js/productListCategroySelect.js?v=pi45.35"></script>
<script type="text/javascript">
	/*var optionM = { //速卖通列表页下拉模糊、精确搜索记忆用，模糊搜索还是精确搜索，速卖通目前没有下拉选项，先注释
		tId: '$！{sessionUser.user.id}',
		pForm: 'smt'
	};*/
	$(document).ready(function(){
		//批量插入营销模块 btn 的active切换
		$(document).on('click','a.batchInsertModularBtn',function(){
			$('a.batchInsertModularBtn').each(function(){
				$(this).find('span').removeClass('active');
			});
			$(this).find('span').addClass('active');
		});
		MULTI_SEARCH.init(); //初始化多个搜索 textarea
		initCategory("", "smt");
	});
	/**批量删除**/
	function batchDelete(boxStr){
		var contentStr = '';
		if($.trim($('#dxmState').val()) === 'online') {//在线产品删除时添加说明提示
			contentStr = '<div><span class="fWhite p-left10 bgColorJ p-right5 v-top">说明！</span>' +
					'<div class="inline-block m-left5">' +
					'<div class="fColor2">删除仅代表该产品在【店小秘】删除，店铺后台仍然存在，</div>' +
					'<div class="fColor2">如果想在店铺后台删除，您在小秘系统删除之后请继续到店铺后台点击删除</div></div>' +
					'</div><div class="m-top10 f-w600">您确定要在店小秘删除吗？</div>';
		} else {
			contentStr = '<div class="m-top10 f-w600">您确定要在店小秘删除吗？</div>';
		}
		myjAlert.confirm({
            content: contentStr,
            typeModal: 'newModal',
            modalWidth: 550,
            callback: function(v){
				if(v){
					$('#loading').modal('show');
					$.post(gitWinLocHref() + 'smtProduct/batchDelete.json',
						{
							ids: boxStr,
							shopId: $('#shopId').val()
						},
						function(data){
							if(data){
								$('#loading').modal('hide');
								var successList = data.bor.successList,
									failList = data.bor.failList;
								batchReturnProcess(successList, failList);
								var url = 'smtProduct/pageList.htm',
									pageNo = $('#pageNo').val(),
									pageSize = $('#pageSize').val();
								reloadPage(url, pageNo, pageSize);
							}
						}
					).error(function(err){
						$('#loading').modal('hide');
						$.fn.message({type: 'error', msg: '网络请求超时， 请稍后重试!'});
					});
				}
			}
		});
	}
	/** 批量移入待发布 **/
	function batchMoveToNoPublish(ids){
		myjAlert.confirm({
			'content':'未选择的图片移入后会被清除，确定要「移入待发布」吗？',
			'callback':function(v){
				if(v){
					$('#loading').modal('show');
					$.post(
						"smtProduct/batchMoveToNoPublish.json",
						{
							ids:  ids,
							shopId : $("#shopId").val()
						},
						function(data){
							$('#loading').modal('hide');
							var successList = data.bor.successList;
							var failList 	= data.bor.failList;
							batchReturnProcess(successList, failList);

							var url = "smtProduct/pageList.htm", pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val();
							reloadPage(url, pageNo, pageSize);
						}
					).error(function(err){
						$('#loading').modal('hide');
						$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
					});
				}
			}
		})
	}
	// 批量返回信息处理
	function batchReturnProcess(successList, failList, successNum, failNum){
		$('#loading').modal('hide');
		$("#operateFailDetailDiv").css("display","none");	// 默认不显示，有错误的时侯再显示
		var failDetail = "";
		if(failList.length>0){
			for(var i=0; i<failList.length; i++){
				var obj = failList[i];
				if(obj.id == null || obj.id == ""){
					failDetail = failDetail + "失败原因:"+ obj.msg + "<br/>";
				}else{
					failDetail = failDetail +"ID:" + obj.id + "&emsp;&emsp;  失败原因:"+ obj.msg + "<br/>";
				}
			}
			$("#operateFailDetailDiv").css("display","");
		}
		if(successNum == undefined){
			$("#operateSuccessNum").html(successList.length);
		}else{
			$("#operateSuccessNum").html(successNum);
		}
		if(failNum == undefined){
			$("#operateFailNum").html(failList.length);
		}else{
			$("#operateFailNum").html(failNum);
		}
		$("#operateFailDetail").html(failDetail);

		$("#batchOperateRetModal").modal("show");
	}
	// 根据条件搜索
	var btnSearchIt = function(){
		var searchValue = $.trim($('#searchValue').val()).replace(/%/g,'\\%').replace(/_/g,'\\_'),
			deliveryTimeLift = $.trim($('#deliveryTimeLift').val()),
			deliveryTimeRight = $.trim($('#deliveryTimeRight').val()),
			grossWeightLift = $.trim($('#grossWeightLift').val()),
			grossWeightRight = $.trim($('#grossWeightRight').val()),
			productCategory = $('#productCategory').val(),
			freightTemplateId = $('#freightTemplateId').val(),
			timeLift = $.trim($('#timeLift').val()),
			timeRight = $.trim($('#timeRight').val()),
            shelvesKinds=$('#shelvesKinds').val(),
			advancedTime = $('#advancedTime').val(),
			motorState = $('#motorState').val(),
        	sourceUrl = $.trim($('#sourceUrl').val()).replace(/%/g,'\\%').replace(/_/g,'\\_');

        if ( shelvesKinds != -1) {
            $('.ulBtn li').each(function(){
                $(this).removeClass('liFoucs');
            });
            $('.ulBtn li:eq(1)').addClass('liFoucs');//点击后背景
            var dxmState = $('#dxmState').val();
            var name = $('.ulBtn li:eq(1)').attr("name");
            if($.trim(dxmState) == 'online'){
                $("#productStatusType").val(name);
            }
        }
		//2019-11-21 hlx 搜索超过200条提示报错
		if(typeof inputInfoLengthJudgment === 'function'){
			var type = inputInfoLengthJudgment($('#searchValue'));

			if(type){
				return;
			}
		}

		if(timeLift != '' || timeRight != ''){
			if(timeLift == ''){
				$.fn.message({type:"error", msg:"起始日期不能为空！"});
				return;
			}else if(timeRight == ''){
				$.fn.message({type:"error", msg:"结束日期不能为空！"});
				return;
			}
		}
		if(timeLift != '' && timeRight != ''){
			var value = compareDate(timeLift,timeRight);
			if(value == 1){
				$.fn.message({type:"error", msg:"结束时间必须大于等于开始时间!"});
				return;
			}
		}
		if(deliveryTimeLift != '' && deliveryTimeRight != ''){
			if(parseInt(deliveryTimeLift) > parseInt(deliveryTimeRight)){
				$.fn.message({type:"error", msg:"最大发货期必需大于等于最小发货期！"});
				return;
			}
		}
		if(grossWeightLift != '' && grossWeightRight != ''){
			if(parseInt(grossWeightLift) > parseInt(grossWeightRight)){
				$.fn.message({type:"error", msg:"最大包装后重量必需大于等于最小包装后重量！"});
				return;
			}
		}

		var url = "smtProduct/pageList.htm";
		$('#loading').modal('show');
		$.ajax({
			type: "POST",
			url: url,
			data: {
			    pageSize: $('#pageSize').val(),
				shopId:$('#shopId').val(),
				groupId:$('#groupId').val(),
				productStatusType:$('#productStatusType').val(),
				dxmState:$('#dxmState').val(),
				dxmOfflineState:$('#dxmOfflineState').val(),
				searchType:$('#searchType').val(),
				searchValue:searchValue,
				sortName:$('#sortName').val(),
				sortValue:$('#sortValue').val(),
				advancedSearch:$('#advancedSearch').val(),
				deliveryTimeLift:deliveryTimeLift,
				deliveryTimeRight:deliveryTimeRight,
				grossWeightLift:grossWeightLift,
				grossWeightRight:grossWeightRight,
				productCategory:productCategory,
				freightTemplateId:freightTemplateId,
				timeLift:timeLift,
				timeRight:timeRight,
				advancedTime:advancedTime,
                shelvesKinds:shelvesKinds,
				motorState:motorState,
                sourceUrl:sourceUrl
			},
			dataType: "html",
			success: function(data){
				$('#pageList').html(data);
				$('#loading').modal('hide');
			},
			error: function(err){
				$('#loading').modal('hide');
				$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
			}
		});
	};
	//重置，清空所有高级搜索填入的内容
	function cleanContentAll(){
		$('#deliveryTimeLift').val('');
		$('#deliveryTimeRight').val('');
		$('#grossWeightLift').val('');
		$('#grossWeightRight').val('');
		$('#productCategory').val('');
		$('#freightTemplateId').val('');
		$('#timeLift').val('');
		$('#timeRight').val('');
		$('#shelvesKinds').val('-1');
		$('#motorState').val('0');
		$("#productCategory").html('<option value="">-- 请选择 --</option>');
    }

	/**同步速卖通产品**/
	function syncSmtProduct(e,t){
		e.stopPropagation();
		var groupId = $(t).parent().parent().find('.chooseTreeName').attr("data-groupid");
		toSmtProduct(groupId);
	}
	/**同步速卖通产品**/
	function toSmtProduct(groupId){
		$("#syncFromWishModal").modal("show");
		$("#syncFromWishModal h4.modal-title").text("从速卖通同步产品");
		$.ajax({
			type: "POST",
			url: "smtProduct/syncSmtProduct.json",
			data: {"shopId":$('#shopId').val(),"groupId":groupId},
			dataType: "json",
			success: function(data){
				var p = 0;		// 记录进度条的值
				var uuid = data.uuid;

				checkProcessStatus(uuid, function(data){
					var num 	= data.num % 100;
					var status = "进行中...";

					if(num<p && data.code!=1){
						// 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
						$("#syncSmtProductprogressBar").css("display", "none");
						setTimeout(function(){
							$("#syncSmtProductprogressBar").css("display", "");
						},1000);
					}
					p = num;
					if(data.code==0){
						$("#syncSmtProductprogressBar").css("width", num + "%");
					}else{
						status = "已完成!";
						$("#syncSmtProductprogressBar").css("width", "100%");
						$("#syncSmtProductprogressBar").removeClass("active");
					}
					$("#syncFromWishModal_status").html(status);
					var msg = strFilterUrl(data.msg);
					$("#syncFromWishModal_processDetail").html(msg);
				});
				/*2017.2.10 byzym 二次刷新初始化*/
				$("#syncSmtProductprogressBar").css("display", "none");
				setTimeout(function(){
					$("#syncSmtProductprogressBar").css("width", 0+"%");
					$("#syncSmtProductprogressBar").css("display", "");
				},10);
				$("#syncFromWishModal_status").html("");
				$("#syncFromWishModal_processDetail").empty();
			}
		});
        $('#syncFromWishModal').off('hidden.bs.modal');
		$('#syncFromWishModal').on('hidden.bs.modal', function (e){
			btnSearchIt();
		});
	}
	/**同步速卖通产品**/
	function toSmtProductByIds(id){
		var box = [];
		var boxStr = '';
		if(id == '' || id == null){
			// 得到被选中的值,如果没有选中，给出提示
			$("input[name='productBox']:checked").each(function(){
				box.push($(this).val());
			});
			if(box.length == 0){
				$.fn.message({type:"error",msg:"请至少选择一个产品"});
				initBatchAction($('#state').val());
				return;
			}
			boxStr = box.join(",");
		}else {
			boxStr = id;
		}
		$("#syncFromWishModal").modal("show");
		/*2017.2.10 byzym 二次刷新初始化*/
		$("#syncSmtProductprogressBar").css("display", "none");
		setTimeout(function(){
			$("#syncSmtProductprogressBar").css("width", 0+"%");
			$("#syncSmtProductprogressBar").css("display", "");
		},10);
		$("#syncFromWishModal_status").html("");
		$("#syncFromWishModal_processDetail").empty();
		$("#syncFromWishModal h4.modal-title").text("从速卖通同步产品");
		$.ajax({
			type: "POST",
			url: "smtProduct/syncSmtProductById.json",
			data: {"shopId":$('#shopId').val(),"ids":boxStr},
			dataType: "json",
			success: function(data){
				var p = 0;		// 记录进度条的值
				var uuid = data.uuid;

				checkProcessStatus(uuid, function(data){
					var num 	= data.num % 100;
					var status = "进行中...";

					if(num<p && data.code!=1){
						// 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
						$("#syncSmtProductprogressBar").css("display", "none");
						setTimeout(function(){
							$("#syncSmtProductprogressBar").css("display", "");
						},1000);
					}
					p = num;
					if(data.code==0){
						$("#progressBar").css("width", num + "%");
					}else{
						status = "已完成!";
						$("#syncSmtProductprogressBar").css("width", "100%");
						$("#syncSmtProductprogressBar").removeClass("active");
					}
					$("#syncFromWishModal_status").html(status);
					var msg = strFilterUrl(data.msg);
					$("#syncFromWishModal_processDetail").html(msg);
				});
			}
		});
        $('#syncFromWishModal').off('hidden.bs.modal');
		$('#syncFromWishModal').on('hidden.bs.modal', function (e){
			btnSearchIt();
		});
	}
	/*var checkAutoOnline = function(){
		$("#smtAutoOnline").each(function(){
			var flag = this.checked;
			var smtAutoOnline = 0;
			if(flag){
				smtAutoOnline = 1;
				$("#smtAutoOnline").val(smtAutoOnline);
			}else{
				smtAutoOnline = 0;
				$("#smtAutoOnline").val(smtAutoOnline);
			}
			setAutoOnline(smtAutoOnline);
		});
	};
	var setAutoOnline = function(smtAutoOnline){
		var shopId = $("#shopId").val();
		if($.trim(shopId) == ""){
			$.fn.message({type:"error", msg:"请选择店铺!"});
			return ;
		}
		$.post(
			"smtProduct/updateSmtAutoOnline.json",
			{
				shopId:shopId,
				smtAutoOnline:smtAutoOnline
			},
			function(data){
				if(data.code == 0){
					$.fn.message({type:"success",msg:data.msg});
				}else{
					$.fn.message({type:"error",msg:data.msg});
				}
			}
		).error(function(err){
			$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
		});
	};*/
	//修改价格
	var updateStock = function(id){
		$.post(
				"smtProduct/getSmtProduct.json",
				{
					id:id
				},
				function(data){
					if(data.product){
						var product = data.product;
						var skus = product.smtProductSkuList;
						if(skus && skus.length>0){
							var table = '<div style="max-height:360px;overflow-y:auto;"><table class="myj-table" data-pid="'+id+'">';
							var allStock = 0;
							for(var i=0;i<skus.length;i++){
								var sku = skus[i];
								var name = sku.name;
								var nameArr = name.split(";");
								if(i == 0){
									table += '<tr>';
									for(var j=0;j<nameArr.length;j++){
										var headName = '其他';
										if(nameArr[j])
											headName = nameArr[j].split(":")[0];
										table += '<th style="width:120px;">'+headName+'</th>';
									}
									table += '<th style="width:178px;"><b>商品编码</b></th>';
									table += '<th style="width:60px;"><b>图片</b></th>';
									table += '<th style="width:60px;"><b>库存</b><br/>(<a href="javascript:" name="modalBatchEdit" data-value="ipmSkuStock">修改</a>)</th>';
									table += '</tr>';
								}
								table += '<tr>';
								for(var j=0;j<nameArr.length;j++){
									if(nameArr[j] && nameArr[j].length>1){
										table += '<td>'+nameArr[j].split(":")[1]+'</td>';
									}else{
										table += '<td></td>';
									}
								}
								table += '<td>'+sku.skuCode+'</td>';
								if(sku.skuImage){
									table += '<td><div class="imgDivOut"><div class="imgDivIn"><img src="'+sku.skuImage+'" class="imgCss"/></div></div></td>';
								}else{
									table += '<td></td>';
								}
								table += '<td><input class="w80" type="text" data-id="'+sku.id+'" name="ipmSkuStock" value="'+sku.ipmSkuStock+'" onkeyup="addAllStock(this);"/></td>';
								table += '</tr>';
								allStock += sku.ipmSkuStock;
							}
							table += '</table></div>';
							table += '<div id="allStock" class="mTop10"><b>总库存：</b>'+allStock+'</div>';
							$("#smtEditStockTable").html(table);
							$("#smtEditPurchasing").find(".modal-dialog").css('width','600px');
						}else{
							var table = '<table class="text-center" data-pid="'+id+'">';
							table += '<tr>';
							table += '<td><b>总库存</b></td>';
							table += '<td><input id="allStock" type="text" data-id="<none>" name="ipmSkuStock" value="'+product.minStock+'" onkeyup="clearMistakeNumber(this)"/></td>';
							table += '</tr>';
							table += '</table>';
							$("#smtEditStockTable").html(table);
							$("#smtEditPurchasing").find(".modal-dialog").css('width','300px');
						}
						$("#smtEditPurchasing").modal("show");
					}
				}
			).error(function(err){
				$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
			});
	};
	//设置总价格
	var addAllStock = function(e){
		var objRegExp  =  /[^0-9]/;
		var val = $(e).val();
		if(objRegExp.test(val)){
			$(e).val($(e).val().replace(/[^\d]/g,''));
		}
		var allStock = 0;
		$('input[name="ipmSkuStock"]').each(function(){
			var stock = $(this).val();
			allStock += +stock;
		});
		$('#allStock').html('<b>总库存：</b>'+allStock);
	};
	//批量保存库存
	var batchUpdateStock = function(){
		var skuStocks = [];
		$('input[name="ipmSkuStock"]').each(function(){
			var ipmSkuStock = $(this).val();
			if($.trim(ipmSkuStock) == ""){
				ipmSkuStock = 0;
			}
			var skuId = $(this).attr('data-id');

			skuStocks.push({id:skuId,ipmSkuStock:ipmSkuStock});
		});
		var id = $("#smtEditStockTable table").attr("data-pid");
		$('#loading').modal('show');
		$.post(
				"smtProduct/editMutilpleSkuStocks.json",
				{
					id:id,
					aeopAeProductSKUs:JSON.stringify(skuStocks)
				},
				function(data){
					$('#loading').modal('hide');
					if(data.code == 0){
						$.fn.message({type:"success",msg:"修改库存成功！"});
						$("#smtEditPurchasing").modal("hide");

						// 更新一下列表
						var pageNo = $('#pageNo').val(), pageSize = $('#pageSize').val(), url = "smtProduct/pageList.htm";
						reloadPage(url, pageNo, pageSize);
					}else{
						$.fn.message({type:"error",msg:data.msg});
					}
				}
			).error(function(err){
				$('#loading').modal('hide');
				$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
			});
	};
	//修改价格
	var updatePrice = function(id){
		$.post('smtProduct/getSmtProduct.json', {id: id},
            function(data){
                if(data.product){
                    var product = data.product,
                        skus = product.smtProductSkuList;
                    if(skus && skus.length){
                        var table = '<div style="max-height:360px;overflow-y:auto;"><table class="myj-table" data-pid="'+id+'">';
                        for(var i = 0; i < skus.length; i++){
                            var sku = skus[i],
                                name = sku.name,
                                nameArr = name.split(';');
                            if(i == 0){
                                table += '<tr>';
                                for(var j=0;j<nameArr.length;j++){
                                    var headName = '其他';
                                    if(nameArr[j])
                                        headName = nameArr[j].split(':')[0];
                                    table += '<th style="width:120px;">'+headName+'</th>';
                                }
                                table += '<th style="width:178px;"><b>商品编码</b></th>' +
                                    '<th style="width:60px;"><b>图片</b></th>' +
                                    '<th style="width:60px;"><b>价格 $ <br/>(<a href="javascript:"' +
                                    ' name="modalBatchEdit" data-value="skuPrice">修改</a>)</th></tr>';
                            }
                            table += '<tr>';
                            for(var j=0;j<nameArr.length;j++){
                                if(nameArr[j] && nameArr[j].length>1){
                                    table += '<td>'+nameArr[j].split(":")[1]+'</td>';
                                }else{
                                    table += '<td></td>';
                                }
                            }
                            table += '<td>'+sku.skuCode+'</td>';
                            if(sku.skuImage){
                                table += '<td><div class="imgDivOut"><div class="imgDivIn"><img src="'+sku.skuImage+'" class="imgCss"/></div></div></td>';
                            }else{
                                table += '<td></td>';
                            }
                            table += '<td><input class="w80" type="text" data-id="'+sku.id+'" name="skuPrice" ' +
                                'value="'+sku.skuPrice+'" oninput="clearNoNumAndMinus(this)"/></td></tr>';
                        }
                        table += '</table></div>';
                        $('#smtEditPriceTable').html(table);
                        $('#smtEditPriceModal').find('.modal-dialog').css('width', '600px');
                    }else{
                        var table = '<table class="text-center" data-pid="'+id+'"><tr>' +
                            '<td><b>价格</b></td><td><input type="text" data-id="<none>" name="skuPrice"' +
                            ' value="'+product.productPrice+'" oninput="clearNoNumAndMinus(this)"/></td></tr></table>';
                        $('#smtEditPriceTable').html(table);
                        $('#smtEditPriceModal').find('.modal-dialog').css('width', '300px');
                    }
                    $("#smtEditPriceModal").modal("show");
                }
            }).error(function(err){
            $.fn.message({type: 'error', msg: '网络请求超时，请稍后重试！'});
        });
	};
	var batchUpdatePrice = function(){
		var skuPrices = [];
		$('input[name="skuPrice"]').each(function(){
			var skuPrice = $(this).val();
			if($.trim(skuPrice) == ""){
				skuPrice = 0;
			}
			var skuId = $(this).attr('data-id');
			skuPrices.push({id:skuId,skuPrice:skuPrice});
		});
		var id = $("#smtEditPriceTable table").attr("data-pid");

		//价格提交
		var editMutilpleSkuPrice = function(data){
			$('#loading').modal('show');
			$.post('smtProduct/editMutilpleSkuPrice.json',
					{
						id: data.id,
						aeopAeProductSKUs: data.aeopAeProductSKUs //JSON.stringify(skuPrices)
					},
					function(data){
						$('#loading').modal('hide');
						if(+data.code === 0){
							$.fn.message({type: 'success', msg: '修改价格成功！'});
							$('#smtEditPriceModal').modal('hide');

							//更新一下列表
							var pageNo = $('#pageNo').val(),
								pageSize = $('#pageSize').val(),
								url = 'smtProduct/pageList.htm';

							reloadPage(url, pageNo, pageSize);
						}else{
							$.fn.message({type:"error",msg:data.msg});
						}
					}
			).error(function(err){
				$('#loading').modal('hide');
				$.fn.message({type: 'error', msg: '网络请求超时， 请稍后重试！'});
			});
		};

		//价格检测
		var dataObj = {
			platform: 'smt',
			position: 'listChange',
			dxmState: 'online',
			saveData: {
				id: id,
				aeopAeProductSKUs: JSON.stringify(skuPrices)
			},
			detectionData: {
				id: id,
				aeopAeProductSkus: JSON.stringify(skuPrices) //产品属性和自定义属性（json字符串）
			},
			detectionUrl: 'priceDetection/smtAdjustPriceDetection.json',
			callback: editMutilpleSkuPrice
		};
		PRICE_DETECTION_APPLY.priceDetectionEntrance(dataObj); //价格检测
	};
	// 显示导入产品窗口
	function showImportProduct(){
		$("#importShopId option").each(function(){
			if($(this).val == '-1'){
				this.selected = true;
			}else{
				this.selected = false;
			}
		});
		$("#importProductModal").modal('show');
	}
	var showCategoryModule  = function(ids){
		$('#loading').modal('show');
		$.post(
				"smtProduct/getProductCategory.json",
				{
					ids : ids
				},
				function(data){
					$('#showCategoryModule').modal('show');
					$('#loading').modal('hide');

					if(data && data.result){
						var info = '共选择<span class="fRed">'+data.totalNum+'</span>个产品，产品分类如下，请分别编辑属性：<br/><br/>';
						for(var categoryId in data.result){
							var obj = data.result[categoryId];
							var aHtml = '<a class="lh24" href="javascript:" onclick="updateAttrFromSpace(\''+obj.ids+'\',\''+categoryId+'\')">修改属性</a>';

							info = info + obj.categoryName + '（'+obj.num+'）  '+aHtml+'<br/>';
						}
						$('#showCategoryModule #categoryChooseDiv').html(info);
					}
				}
		);
	}
	var updateAttrFromSpace = function(ids,categoryId){
		var shopId = $("#shopId").val();
		var dxmState = $("#dxmState").val();
		$('#showCategoryModule').modal('hide');
		$("#updateAttrFromSpace").modal("show");
		if(categoryId == "-1"){
			categoryId = "";
		}
		if(categoryId != ""){
			$('#categoryHistoryId option[value=""]').hide();
		}
		$("#myFrame").attr("src", 'smtProduct/editAttribute.htm?shopId='+shopId+'&ids='+ids+'&dxmState='+dxmState+'&categoryId='+categoryId);
		$('#updateAttrFromSpace').on('hidden.bs.modal', function (e){
			$('#showCategoryModule').modal('show');
		});
	}
	var showAttrFromSpace = function() {
		var data = document.getElementById('myFrame').contentWindow.save();
		if(data == null){
			return ;
		}else{
			$('#updateAttrFromSpace').modal('hide');
			$('#showCategoryModule').modal('hide');
			$("#syncUpdateCategoryAttrModal").modal("show");
			$("#syncUpdateCategoryAttrModal h4.modal-title").text("修改速卖通产品属性");
			/*2017.2.10 byzym 二次刷新初始化*/
			$("#syncUpdateCategoryAttrModal_progressBar").css("display", "none");
			setTimeout(function(){
				$("#syncUpdateCategoryAttrModal_progressBar").css("width", 0+"%");
				$("#syncUpdateCategoryAttrModal_progressBar").css("display", "");
			},10);
			$("#syncUpdateCategoryAttrModal_status").html("");
			$("#syncUpdateCategoryAttrModal_processDetail").empty();
			$.post(
					"smtProduct/updateProductAttribute.json",
					{
						ids : data.ids,
						shopId : data.shopId,
						aeopAeProductPropertys : data.aeopAeProductPropertys,
						categoryId:data.categoryId
					},
					function(data){
						var p = 0;		// 记录进度条的值
						var uuid = data.uuid;

						checkProcessStatus(uuid, function(data){
							var num 	= data.num % 100;
							var status = "进行中...";

							if(num<p && data.code!=1){
								// 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
								$("#syncUpdateCategoryAttrModal_progressBar").css("display", "none");
								setTimeout(function(){
									$("#syncUpdateCategoryAttrModal_progressBar").css("display", "");
								},1000);
							}
							p = num;
							if(data.code==0){
								$("#syncUpdateCategoryAttrModal_progressBar").css("width", num + "%");
							}else{
								status = "已完成!";
								$("#syncUpdateCategoryAttrModal_progressBar").css("width", "100%");
								$("#syncUpdateCategoryAttrModal_progressBar").removeClass("active");
							}
							$("#syncUpdateCategoryAttrModal_status").html(status);
							$("#syncUpdateCategoryAttrModal_processDetail").html(data.msg );
						});

						$('#syncUpdateCategoryAttrModal').on('hidden.bs.modal', function (e){
							$('#showCategoryModule').modal('show');
						});
					}
			);
		}
	}
	var showCategoryBrandModule  = function(ids){
		$('#loading').modal('show');
		$.post(
				"smtProduct/getProductCategory.json",
				{
					ids : ids
				},
				function(data){
					$('#showCategoryBrandModule').modal('show');
					$('#loading').modal('hide');

					if(data && data.result){
						var info = '共选择<span class="fRed">'+data.totalNum+'</span>个产品，产品分类如下，请分别编辑品牌属性：<br/><br/>';
						for(var categoryId in data.result){
							var obj = data.result[categoryId];
							var aHtml = '<a href="javascript:;" onclick="updateAttrBrandFromSpace(\''+obj.ids+'\',\''+categoryId+'\')">修改品牌</a>';

							info = info + obj.categoryName + '（'+obj.num+'）  '+aHtml+'<br/>';
						}
						$('#showCategoryBrandModule #categoryBrandChooseDiv').html(info);
					}
				}
		);
	}
	var updateAttrBrandFromSpace = function(ids,categoryId){
		var shopId = $("#shopId").val();
		var dxmState = $("#dxmState").val();
		$('#showCategoryBrandModule').modal('hide');
		$("#updateAttrBrandFromSpace").modal("show");
		if(categoryId == "-1"){
			categoryId = "";
		}
		$("#myFrameBrand").attr("src", 'smtProduct/editAttributeBrand.htm?shopId='+shopId+'&ids='+ids+'&dxmState='+dxmState+'&categoryId='+categoryId);
		$('#updateAttrBrandFromSpace').on('hidden.bs.modal', function (e){
			$('#showCategoryBrandModule').modal('show');
		});
	}
	var showAttrBrandFromSpace = function() {
		var data = document.getElementById('myFrameBrand').contentWindow.save();
		if(data == null){
			return ;
		}else{
			$('#updateAttrBrandFromSpace').modal('hide');
			$('#showCategoryBrandModule').modal('hide');
			$("#syncUpdateCategoryAttrBrandModal").modal("show");
			$("#syncUpdateCategoryAttrBrandModal h4.modal-title").text("修改品牌");
			$.post(
					"smtProduct/updateProductPropertysBrand.json",
					{
						ids : data.ids,
						shopId : data.shopId,
						brand : data.aeopAeProductPropertys,
						categoryId:data.categoryId
					},
					function(data){
						var p = 0;		// 记录进度条的值
						var uuid = data.uuid;
						checkProcessStatus(uuid, function(data){
							var num 	= data.num % 100;
							var status = "进行中...";
							if(num<p && data.code!=1){
								// 为了去掉变为n->0时的动画效果，在此先隐藏，然后再置0，最后再定时显示出来
								$("#syncUpdateCategoryAttrBrandModal_progressBar").css("display", "none");
								setTimeout(function(){
									$("#syncUpdateCategoryAttrBrandModal_progressBar").css("display", "");
								},1000);
							}
							p = num;
							if(data.code==0){
								$("#syncUpdateCategoryAttrBrandModal_progressBar").css("width", num + "%");
							}else{
								status = "已完成!";
								$("#syncUpdateCategoryAttrBrandModal_progressBar").css("width", "100%");
								$("#syncUpdateCategoryAttrBrandModal_progressBar").removeClass("active");
							}
							$("#syncUpdateCategoryAttrBrandModal_status").html(status);
							$("#syncUpdateCategoryAttrBrandModal_processDetail").html(data.msg );
						});
						/*2017.2.10 byzym 二次刷新初始化*/
						$("#syncUpdateCategoryAttrBrandModal_progressBar").css("display", "none");
						setTimeout(function(){
							$("#syncUpdateCategoryAttrBrandModal_progressBar").css("width", 0+"%");
							$("#syncUpdateCategoryAttrBrandModal_progressBar").css("display", "");
						},10);
						$("#syncUpdateCategoryAttrBrandModal_status").html("");
						$("#syncUpdateCategoryAttrBrandModal_processDetail").empty();
						$('#syncUpdateCategoryAttrBrandModal').on('hidden.bs.modal', function (e){
							$('#showCategoryBrandModule').modal('show');
						});
					}
			);
		}
	}
	/*****批量修改*****/
	//批量弹层(层上层)html生成
	$(document).on('click','a[name=modalBatchEdit]',function(){
		var type = '',
			str = '',
			aName = $(this).data('value'),
			modal = $('#modalBatchEdit'),
			id = $(this).closest('.modal-body').attr('id');
		aName ? type = aName : type = '';
		if(!type){
			return;
		}
		modal.find('.modal-body').empty();
		modal.find('.modal-title').html('');
		switch (type)
		{
			case 'skuPrice'://价格||促销价
				modal.find('.modal-title').html('修改价格');
				modal.find('.modal-dialog').css('width','400px');
				str = '<div style="width:85%;margin:0 auto;">'+
						'<div class="mTop10">'+
						'<input type="radio" name="priceEditType" value="1" checked style="margin-right:27px;position:relative;top:2px;">'+
						'<input type="text" class="form-control" onkeyup="value=value.replace(/[^0-9.]/g,\'\')" style="display:inline-block;width:90px;margin-right:10px;">'+
						'<span class="fColor2">(直接修改价格)</span>'+
						'</div>'+
						'<div class="mTop10"><input type="radio" name="priceEditType"  value="2" style="margin-right:10px;position:relative;top:2px;">按 '+
						'<select class="form-control" disabled data-names="retailPrice" style="display:inline-block;width:90px;">'+
						'<option value="1">金额</option>'+
						'<option value="2">百分比</option>'+
						'</select> 增加'+
						'&nbsp;&nbsp;&nbsp;<input type="text" disabled onkeyup="value=value.replace(/[^0-9.-]/g,\'\')" class="form-control" style="display:inline-block;width:90px;"/>'+
						'&nbsp;<span class="danwei"></span>'+
						'</div>'+
						'<div class="mTop10 fColor2">小提示：如果减少，可以输入负数</div>'+
						'</div>';
				break;
			case 'ipmSkuStock'://库存
				modal.find('.modal-title').html('修改库存');
				modal.find('.modal-dialog').css('width','400px');
				str = '<div style="width:95%;margin:0 auto;">'+
						'<div class="numDiv">'+
						'<div style="width:5%" class="pull-left pTop8 mTop10"><input type="radio" name="numRadio" checked="true" class="radioIpt" data-val="2"></div>'+
						'<div style="width:35%" class="pull-left mTop10"><input id="num2" class="form-control text mBottom10" type="text" onkeyup="value=value.replace(/[^0-9]/g,\'\')" placeholder="示例：1"></div>'+
						'<div style="width:35%" class="pull-left pTop10 fColor2 pLeft10 mTop10">(直接修改库存量)</div>'+
						'<div class="clear"></div></div>'+
						'<div class="numDiv mTop10">'+
						'<div style="width:5%" class="pull-left pTop8"><input type="radio" name="numRadio" class="radioIpt" data-val="1"></div>'+
						'<div style="width:35%" class="pull-left pTop10">按现有库存量  增加</div>'+
						'<div style="width:35%" class="pull-left"><input id="num1" class="form-control text" type="text" disabled="true" onkeyup="value=value.replace(/[^0-9-]/g,\'\')" placeholder="示例：1"></div>'+
						'<div class="clear"></div></div>'+
						'<div style="clear:both;" class="fColor2"><span>提示：如果减少，可输入负数。</span></div>'+
						'</div>';
				break;
		}
		modal.find('.modal-body').html(str);
		modal.find('button.skuBatchEdit').attr('data-names',aName).attr('modalId',id);
		modal.modal('show');
		modal.find('input[type="text"]:first').focus();
	});
	//批量弹层确定按钮
	$(document).off('click','button.skuBatchEdit').on('click','button.skuBatchEdit',function(){
		var switchType = '',
			modal = $('#modalBatchEdit'),
			objId = $(this).attr('modalId'),//price
			tableObj = $('#'+objId+' table'),
			modalObj = tableObj.closest('.modal'),
			btnName = $(this).attr('data-names'),//retailPrice\skuCode\skuInventoryQty
			input = tableObj.find('input[name="'+btnName+'"]');

		btnName ? switchType = btnName : switchType = '' ;
		if(!switchType){
			return;
		}
		switch(switchType){
			case 'skuPrice'://价格
				var $priceIpt = modal.find('input[name="priceEditType"]:checked'),
					typePrice = $priceIpt.attr('value'),
				    price = '';

				if(typePrice == 1){
                    price = $priceIpt.closest('div').find('input[type="text"]').val();
                    if(price != '' && price != undefined && !isNaN(price)){
                        price = parseFloat(price);
                        if(price > 0) input.val(price.toFixed(2));
                    }
                }else if(typePrice == 2){
                    var numPrice = $priceIpt.closest('div').find('select[data-names="retailPrice"]').val();
					price = $priceIpt.closest('div').find('input[type="text"]').val();
                    if (price != '' && price != undefined && !isNaN(price)){
						if (numPrice == 1){
							input.each(function(){
								var priceCell = $(this).val();
								if($.trim(priceCell) == "") priceCell = "0.00";
								var priceCellArr = priceCell.split('-');
								var priceStr = "";
								for(var i=0;i<priceCellArr.length;i++){
									var cell = (parseFloat(priceCellArr[i])+parseFloat(price)).toFixed(2);
									i>0 ? priceStr = priceStr+"-"+cell : priceStr = cell;
								}
								$(this).val(priceStr);
							});

						}
						if (numPrice == 2){
							input.each(function(){
								var priceCell = $(this).val();
								if($.trim(priceCell) == "") priceCell = "0.00";
								var priceCellArr = priceCell.split('-');
								var priceStr = "";
								for(var i=0;i<priceCellArr.length;i++){
									var cell = (parseFloat(priceCellArr[i]) * (100 + parseFloat(price)) / 100).toFixed(2);
									i>0 ? priceStr = priceStr+"-"+cell : priceStr = cell;
								}
								$(this).val(priceStr);
							});
						}
                    }
                }
				break;
			case 'ipmSkuStock'://库存
				var $numRadio = modal.find('input[name="numRadio"]:checked'),
				    typeStock = $numRadio.attr('data-val'),
                    numStock = $numRadio.closest('div.numDiv').find('input[type="text"]').val();

				if(typeStock == 1){
					if(numStock != ''){
						input.each(function(){
							var newNum = Number($(this).val())+Number(numStock);
							$(this).val(newNum);
						});
					}else{
						$.fn.message({type:"error",msg:"请输入库存增加数"});
						return;
					}
				}
				if(typeStock == 2){
					if(numStock != ''){
						input.val(numStock);
					}else{
						$.fn.message({type:"error",msg:"请输入库存数"});
						return;
					}
				}
				var allStock = 0;
				$('input[name="ipmSkuStock"]').each(function(){
					var stock = $(this).val();
					allStock += +stock;
				});
				$('#allStock').html('<b>总库存：</b>'+allStock);
				break;

		}
		modal.modal('hide');
	});
	//弹层事件注册
	$(document).on('click','input[name="priceEditType"]',function(){
		$(this).closest('div.modal-body').find('input[type="text"],select').attr('disabled',true);
		if(this.checked){
			$(this).closest('div').find('input[type="text"],select').attr('disabled',false);
		}
	});
	$(document).on('change','select[data-names="retailPrice"]',function(){
		var num = $(this).val();
		if (num == 1)
		{
			$('span.danwei').html('');
		}
		if (num == 2)
		{
			$('span.danwei').html('%');
		}
	});
	$(document).on('keyup','#skuBatchEdit input[type="text"]',function(e){
		var keyCode = e.keyCode ? e.keyCode : e.which ? e.which : e.charCode;
		if (keyCode == 13) {
			$('#skuBatchEdit').find('button.skuBatchEdit').click();
		}
	});
	$(document).on('click','input[name="numRadio"]',function(){
		var val = $(this).attr('data-val');
		if(val == 1){
			$("#num2").attr('disabled',true);
			$("#num1").attr('disabled',false);
		}else if (val == 2){
			$("#num2").attr('disabled',false);
			$("#num1").attr('disabled',true);
		}
	});
	$('#modalBatchEdit').on('hidden.bs.modal', function (e) {
		var id = $('#modalBatchEdit .skuBatchEdit').attr('modalid');
		var modal = $('#'+id).closest('.modal');
		modal.modal('hide').modal('show');
	})
	/*****批量修改(层上层)end*****/
	var showProductData = function(elem){
		var id = $(elem).data("id");					// 加入购物车数
		var addCartCount = $(elem).data("addcartcount");					// 加入购物车数
		var outputOrder = $(elem).data("outputorder");					// 成交订单数
		var exposedCount = $(elem).data("exposedcount");					// 曝光量
		var favoritedCount = $(elem).data("favoritedcount");					// 收藏量
		var viewedCount = $(elem).data("viewedcount");					// 30天浏览量
		loadProductDataTable(id,addCartCount,outputOrder,exposedCount,favoritedCount,viewedCount);
	};
	var loadProductDataTable = function(id,addCartCount,outputOrder,exposedCount,favoritedCount,viewedCount){
		var table = '<div style="max-height:3600px;overflow-y:auto;"><table class="myj-table" data-id="'+id+'">';
		table += '<tr>';
		table += '<th style="width:60px;"><b>产品数据</b></th>';
		table += '<th style="width:60px;"><b>数据量</b></th>';
		table += '</tr>';
		table += '<tr><td>购物车数</td><td>'+addCartCount+'</td></tr>';
		table += '<tr><td>成交量</td><td>'+outputOrder+'</td></tr>';
		table += '<tr><td>曝光</td><td>'+exposedCount+'</td></tr>';
		table += '<tr><td>收藏量</td><td>'+favoritedCount+'</td></tr>';
		table += '<tr><td>30天浏览量</td><td>'+viewedCount+'</td></tr>';
		table += '</table></div>';
		$("#smtProductDataTable").html(table);
		$("#smtProductData").modal("show");
	}
	var updateProductData = function(){
		var id = $("#smtProductData .myj-table").data("id");
		$('#loading').modal('show');
		$.post("smtProduct/syncSmtProductData.json",{
			id : id
			},function(data){
				$('#loading').modal('hide');
				if(data.code == 0) {
					var product = data.product;
					loadProductDataTable(product.id,product.addCartCount,product.outputOrder,product.exposedCount,product.favoritedCount,product.viewedCount);
					var pa = $("#goodsContent a[data-id='"+product.id+"']");
					$(pa).data("addcartcount",product.addCartCount);
					$(pa).data("outputorder",product.outputOrder);
					$(pa).data("exposedcount",product.exposedCount);
					$(pa).data("favoritedcount",product.favoritedCount);
					$(pa).data("viewedcount",product.viewedCount);
					$.fn.message({type:"success", msg:"同步产品销售数据成功！"});
				}else{
					$.fn.message({type:"error", msg:data.msg});
				}
			}
		).error(function(err){
			$.fn.message({type:"error", msg:"网络请求超时， 请稍后重试!"});
			$('#loading').modal('hide');
		});
	}
	// 全选显示当前数据
	$(document).on('click','table[cid="productList"] input[type="checkbox"]',function(){
		showSelCheckboxNum(this);
	})
	// 将后台返回给前台的错误提示中的特定标签转化为a标签
	var strFilterUrl = function(str){
		var strs = '';
		strs = str.replace(/%#W7Ox0Ze%#/g,'<a href=\"');
		strs = strs.replace(/%#uIGOykJW%#/g,'" target="_black" >');
		strs = strs.replace(/%#ulvupSta%#/g,'</a>')
		return strs;
	};

</script>

